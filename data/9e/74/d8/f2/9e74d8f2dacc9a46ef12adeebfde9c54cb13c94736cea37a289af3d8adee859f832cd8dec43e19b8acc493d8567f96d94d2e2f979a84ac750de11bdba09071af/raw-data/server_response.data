<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">

  

<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NL48VKT');</script>
  <!-- End Google Tag Manager -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>OAuth 2.0 Authentication
plugin | Kong Docs</title>
  <meta name="description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices." />
  <meta name="author" content="KongHQ" />
  <meta property="og:title" content="OAuth 2.0 Authentication
plugin | Kong Docs" />
  <meta property="og:site_name" content="Kong Docs" />
  <!-- use share link for facebook -->
  <meta property="og:url" content="https://docs.konghq.com" />
  <meta property="og:description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices." />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="en_US" />
  <meta
    property="og:image"
    content="https://docs.konghq.com/assets/images/share.png"
  />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@thekonginc" />
  <meta name="twitter:creator" content="@thekonginc" />
  <meta name="twitter:url" content="https://docs.konghq.com" />
  <meta name="twitter:description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices." />
  <meta
    name="twitter:image"
    content="https://docs.konghq.com/assets/images/share.png"
  />
  <meta property="fb:admins" content="227304446" />
  <meta property="fb:admins" content="576641408" />
  <meta
    name="google-site-verification"
    content="CrU3zp02dNKTe8NSAipL4NCPkrIjDXG8fViTZ-MIzP4"
  />
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
    integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
    crossorigin="anonymous"
  />

  <!-- New Relic -->
  <script type="text/javascript">
/* eslint-disable */
window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(20),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,c){try{h?h-=1:o(c||new UncaughtException(t,e,n),!0)}catch(f){try{i("ierr",[f,s.now(),!0])}catch(d){}}return"function"==typeof u&&u.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t,e){var n=e?null:s.now();i("err",[t,n])}var i=t("handle"),a=t(21),c=t("ee"),s=t("loader"),f=t("gos"),u=window.onerror,d=!1,p="nr@seenError",h=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){"stack"in l&&(t(13),t(12),"addEventListener"in window&&t(6),s.xhrWrappable&&t(14),d=!0)}c.on("fn-start",function(t,e,n){d&&(h+=1)}),c.on("fn-err",function(t,e,n){d&&!n[p]&&(f(n,p,function(){return!0}),this.thrown=!0,o(n))}),c.on("fn-end",function(){d&&!this.thrown&&h>0&&(h-=1)}),c.on("internal-error",function(t){i("ierr",[t,s.now(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){M++,S=y.hash,this[u]=b.now()}function o(){M--,y.hash!==S&&i(0,!0);var t=b.now();this[l]=~~this[l]+t-this[u],this[d]=t}function i(t,e){E.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=b.now()})}var c="-start",s="-end",f="-body",u="fn"+c,d="fn"+s,p="cb"+c,h="cb"+s,l="jsTime",m="fetch",v="addEventListener",w=window,y=w.location,b=t("loader");if(w[v]&&b.xhrWrappable){var g=t(10),x=t(11),E=t(8),P=t(6),O=t(13),R=t(7),T=t(14),L=t(9),j=t("ee"),N=j.get("tracer");t(15),b.features.spa=!0;var S,M=0;j.on(u,r),j.on(p,r),j.on(d,o),j.on(h,o),j.buffer([u,d,"xhr-done","xhr-resolved"]),P.buffer([u]),O.buffer(["setTimeout"+s,"clearTimeout"+c,u]),T.buffer([u,"new-xhr","send-xhr"+c]),R.buffer([m+c,m+"-done",m+f+c,m+f+s]),E.buffer(["newURL"]),g.buffer([u]),x.buffer(["propagate",p,h,"executor-err","resolve"+c]),N.buffer([u,"no-"+u]),L.buffer(["new-jsonp","cb-start","jsonp-error","jsonp-end"]),a(T,"send-xhr"+c),a(j,"xhr-resolved"),a(j,"xhr-done"),a(R,m+c),a(R,m+"-done"),a(L,"new-jsonp"),a(L,"jsonp-end"),a(L,"cb-start"),E.on("pushState-end",i),E.on("replaceState-end",i),w[v]("hashchange",i,!0),w[v]("load",i,!0),w[v]("popstate",function(){i(0,M>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(13),c=t(12),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",p="resource",h="-start",l="-end",m="fn"+h,v="fn"+l,w="bstTimer",y="pushState",b=t("loader");b.features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=b.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,b.now()])}),a.on(m,function(t,e,n){this.bstStart=b.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),this.bstType])}),c.on(m,function(){this.bstStart=b.now()}),c.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),"requestAnimationFrame"])}),o.on(y+h,function(t){this.time=b.now(),this.startPath=location.pathname+location.hash}),o.on(y+l,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(23)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(20);e.exports=o;var a=window,c="fetch-",s=c+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,d=a.Response,p=a.fetch,h="prototype";u&&d&&p&&(i(f,function(t,e){r(u[h],e,s),r(d[h],e,s)}),r(a,"fetch",c),o.on(c+"end",function(t,e){var n=this;e?e.clone().arrayBuffer().then(function(t){n.rxSize=t.byteLength,o.emit(c+"done",[null,e],n)}):o.emit(c+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(23)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){function r(t){function e(){s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}function n(){s.emit("jsonp-error",[],p),s.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}var r=t&&"string"==typeof t.nodeName&&"script"===t.nodeName.toLowerCase();if(r){var o="function"==typeof t.addEventListener;if(o){var a=i(t.src);if(a){var u=c(a),d="function"==typeof u.parent[u.key];if(d){var p={};f.inPlace(u.parent,[u.key],"cb-",p),t.addEventListener("load",e,!1),t.addEventListener("error",n,!1),s.emit("new-jsonp",[t.src],p)}}}}}function o(){return"addEventListener"in window}function i(t){var e=t.match(u);return e?e[1]:null}function a(t,e){var n=t.match(p),r=n[1],o=n[3];return o?a(o,e[r]):e[r]}function c(t){var e=t.match(d);return e&&e.length>=3?{key:e[2],parent:a(e[1],window)}:{key:t,parent:window}}var s=t("ee").get("jsonp"),f=t(23)(s);if(e.exports=s,o()){var u=/[?&](?:callback|cb)=([^&#]+)/,d=/(.*)\.([^.]+)/,p=/^(\w+)(\.|$)(.*)$/,h=["appendChild","insertBefore","replaceChild"];f.inPlace(HTMLElement.prototype,h,"dom-"),f.inPlace(HTMLHeadElement.prototype,h,"dom-"),f.inPlace(HTMLBodyElement.prototype,h,"dom-"),s.on("dom-start",function(t){r(t[0])})}},{}],10:[function(t,e,n){var r=t("ee").get("mutation"),o=t(23)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],11:[function(t,e,n){function r(t){var e=a.context(),n=c(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(23),a=t("ee").get("promise"),c=i(a),s=t(20),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;s(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),c=f.resolve(i);return c}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),s(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=c(t[0],"resolve-",this),t[1]=c(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),c.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=c(t[0],"cb-",this),t[1]=c(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],12:[function(t,e,n){var r=t("ee").get("raf"),o=t(23)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],13:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(23)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],14:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,y,"fn-",c)}function i(t){b.push(t),l&&(x?x.then(a):v?v(a):(E=-E,P.data=E))}function a(){for(var t=0;t<b.length;t++)r([],b[t]);b.length&&(b=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),d=t(23)(u),p=NREUM.o,h=p.XHR,l=p.MO,m=p.PR,v=p.SI,w="readystatechange",y=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],b=[];e.exports=u;var g=window.XMLHttpRequest=function(t){var e=new h(t);try{u.emit("new-xhr",[e],e),e.addEventListener(w,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(h,g),g.prototype=h.prototype,d.inPlace(g.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),l){var x=m&&m.resolve();if(!v&&!m){var E=1,P=document.createTextNode(E);new l(a).observe(P,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===w||a()})},{}],15:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=a.now()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var s=t.getResponseHeader("X-NewRelic-App-Data");s&&(e.cat=s.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return l(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(16),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,p=t("id"),h=t(19),l=t(18),m=window.XMLHttpRequest;a.features.xhr=!0,t(14),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,h&&(h>34||h<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=l(r);i&&(n.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var c=0;c<d;c++)e.addEventListener(u[c],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,e],e)})}},{}],16:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],17:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[f.now()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(20),c=t(21),s=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",h=p+"ixn-";a(d,function(t,e){u[e]=o(p+e,!0,"api")}),u.addPageAction=o(p+"addPageAction",!0),u.setCurrentRouteName=o(p+"routeName",!0),e.exports=newrelic,u.interaction=function(){return(new r).get()};var l=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(h+"tracer",[f.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return e.apply(this,arguments)}catch(t){throw s.emit("fn-err",[arguments,this,t],n),t}finally{s.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){l[e]=o(h+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],18:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],19:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],20:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],21:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],22:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],23:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(21),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){p([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o,e)}catch(a){p([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){p([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function p(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o,i){if(!p.aborted||i){t&&t(n,r,o);for(var a=e(o),c=l(n),s=c.length,f=0;f<s;f++)c[f].apply(a,r);var d=u[y[n]];return d&&d.push([b,n,r,a]),a}}function h(t,e){w[t]=l(t).concat(e)}function l(t){return w[t]||[]}function m(t){return d[t]=d[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var w={},y={},b={on:h,emit:n,get:m,listeners:l,context:e,buffer:v,abort:a,aborted:!1};return b}function i(){return new r}function a(){(u.api||u.feature)&&(p.aborted=!0,u=p.backlog={})}var c="nr@context",s=t("gos"),f=t(20),u={},d={},p=e.exports=o();p.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!x++){var t=g.info=NREUM.info,e=p.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(y,function(e,n){t[e]||(t[e]=n)}),s("mark",["onload",a()+g.offset],null,"api");var n=p.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===p.readyState&&i()}function i(){s("mark",["domContent",a()+g.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(c=Math.max((new Date).getTime(),c))-g.offset}var c=(new Date).getTime(),s=t("handle"),f=t(20),u=t("ee"),d=window,p=d.document,h="addEventListener",l="attachEvent",m=d.XMLHttpRequest,v=m&&m.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var w=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1071.min.js"},b=m&&v&&v[h]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:c,now:a,origin:w,features:{},xhrWrappable:b};t(17),p[h]?(p[h]("DOMContentLoaded",i,!1),d[h]("load",r,!1)):(p[l]("onreadystatechange",o),d[l]("onload",r)),s("mark",["firstbyte",c],null,"api");var x=0,E=t(22)},{}]},{},["loader",2,15,5,3,4]);
;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"13e44ec848",applicationID:"187820761",sa:1}
</script>


  <!-- FullStory -->
  <!-- <script>
/* eslint-disable */
window['_fs_debug'] = false;
window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = '7JS2S';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
    o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};g.event=function(i,v){g('event',{n:i,p:v})};
    g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
    g.consent=function(a){g("consent",!arguments.length||a)};
    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
    g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
</script>
 -->

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "KongHQ",
      "url": "https://docs.konghq.com",
      "logo": "https://docs.konghq.com/assets/images/logo.png",
      "sameAs": [
        "https://www.facebook.com/konginc",
        "https://twitter.com/thekonginc",
        "https://plus.google.com/+mashape"
      ]
    }
  </script>

  <!-- Preload assets -->
  <link rel="dns-prefetch" href="//cloud.typography.com" />
  <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700"
    rel="stylesheet"
  />
  <link rel="dns-prefetch" href="//dev.visualwebsiteoptimizer.com" />
  <link rel="dns-prefetch" href="//cdn.segment.com" />

  <!-- Recaptcha -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <!-- ##gulp-resource-hints## -->

  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico" />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"
  />
  <link
    rel="stylesheet"
    href="/assets/styles.css?v=1635454550"
  />

  
  

  <link rel="canonical" href="https://docs.konghq.com/hub/kong-inc/oauth2/index" />
    

</head>

<!-- Kong Cookie Policy -->
<div class="cookie-policy-container">
  <p>In order to give you better service, we use cookies. By continuing to use our website, you agree to the use of cookies as described in our <a href=" https://konghq.com/cookie-policy/">Cookie Policy</a>.
  <button class="cookie-policy-accept btn button" type="submit" tabindex="0">I agree</button>
</div>



  <body
    id="/hub/kong-inc/oauth2/index"
    
    data-spy="scroll"
    data-target="#scroll-sidebar"
    data-offset="350"
  >

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NL48VKT"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <header class="navbar-v2 closed">
  <a class="skip-main" href="#main">Skip to content</a>
  <!-- uncomment the promo-banner div when adding a new promo banner
  <!--also uncomment the promo banner sections in app/assets/stylesheets/header.less and gulpfile.js-->
  <!-- <div id="promo-banner">
    <div class="container">
      <div class="closebanner"></div> <strong><label>EVENT</label> Join the Kong Summit Hackathon &nbsp;&mdash;<a target="_blank"
          href="https://konghq.com/summit-hackathon">Start Hacking &rarr;</a></strong>
    </div>
  </div> -->
  <div class="navbar-content">
    <a href="https://konghq.com" class="navbar-brand col col-xl-auto">
      <img src="/assets/images/logos/kong-logo-blue.svg" alt="Kong Logo" id="kong-logo">
    </a>
    <span class="logo-divider">|</span>
    <a href="/" class="navbar-brand col col-xl-auto">
      <img src="/assets/images/logos/docs-logo-steel.svg" alt="Kong Docs Logo" id="kong-docs-logo">
    </a>
    
    <div class="separator mobile"></div>
    <div class="search-input-wrapper">
      <img src="/assets/images/landing-page/search.svg" alt="search" onclick="handleSearchClicked()">
      <input id="getkong-algolia-search-input" type="text" role="search" placeholder="Search the docs...">
    </div>

    <div class="search-results-wrapper"></div>
    
    <div class="separator"></div>
    <div class="navbar-items" role="navigation" aria-label="Main menu">
      <ul class="navbar-items" role="menubar">
        <li aria-haspopup="true" role="menuitem"
          class="navbar-item main-menu-item with-submenu active"
          onclick="toggleSubmenuVisible(this)">
          <a href="/" tabindex="0" id="docs-link">Docs</a>
          <span class="caret"></span>
          <ul class="navbar-item-submenu" role="menu" aria-hidden="true">
            <div class="submenu-section">
              <span class="navbar-item submenu-section-title">Kong Konnect Platform</span>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/konnect-platform/" class="navbar-item navbar-item-docs">Konnect Platform</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/konnect/" class="navbar-item navbar-item-docs">Konnect Cloud</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/enterprise/" class="navbar-item navbar-item-docs">Kong Gateway (Enterprise)</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/mesh/" class="navbar-item navbar-item-docs">Kong Mesh</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/hub/" class="navbar-item navbar-item-docs">Plugin Hub</a>
              </li>
            </div>
            <div class="submenu-section">
              <span class="navbar-item submenu-section-title">Open Source</span>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/gateway-oss/" class="navbar-item navbar-item-docs">Kong Gateway (OSS)</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/deck/" class="navbar-item navbar-item-docs">decK</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/kubernetes-ingress-controller/" class="navbar-item navbar-item-docs">Kubernetes Ingress
                  Controller</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="https://support.insomnia.rest/" target="_blank"
                  class="navbar-item navbar-item-docs">Insomnia</a>
              </li>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="https://kuma.io/docs/" target="_blank" class="navbar-item navbar-item-docs">Kuma</a>
              </li>
            </div>
            <div class="submenu-section">
              <span class="navbar-item submenu-section-title">Contribute to the docs</span>
              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <a href="/contributing/" class="navbar-item navbar-item-docs">Contribution guidelines</a>
              </li>
            </div>
          </ul>
        </li>
        <li role="menuitem" tabindex="0" id="support-link" class="main-menu-item">
          <a href="https://support.konghq.com/" class="navbar-item">Support</a>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://konghq.com/community/" class="navbar-item">Community</a>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://education.konghq.com/" class="navbar-item">Kong Academy</a>
        </li>
      </ul>
      <a href="https://konghq.com/get-started/?itm_source=website&amp;itm_medium=nav" class="navbar-button">
        Get Started
      </a>
    </div>
    <div id="navbar-menu-toggle-button" class="small-screen-button" aria-label="Toggle navigation"
      onclick="toggleButtonClicked()">
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
</header>


<style>
  @media (max-width: 768px) {
    .algolia-docsearch-suggestion--subcategory-column {
      display: none !important;
    }

    .algolia-autocomplete .ds-dropdown-menu {
      max-width: calc(100% + 40px);
      min-width: 300px;
    }

    .algolia-autocomplete.algolia-autocomplete-left .ds-dropdown-menu {
      left: -40px !important;
    }

    .algolia-autocomplete.algolia-autocomplete-left .ds-dropdown-menu:before {
      left: 88px;
    }
  }
</style>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>

<script type="text/javascript">
  docsearch({
    appId: 'T5JKD83LWT',
    apiKey: '1390283021f26e36117242934deb8d9d',
    indexName: 'prod_Full_Docs',
    inputSelector: '#getkong-algolia-search-input',
    algoliaOptions: {
      hitsPerPage: 8
    },
    // Override selected event to allow for local environment navigation
    handleSelected: function (input, event, suggestion) {
      input.setVal('')
      window.location.href = window.location.protocol + '//' + window.location.host + suggestion.url.split('docs.konghq.com')[1]
    }
    // ,debug: true // Set debug to true if you want to inspect the dropdown
  })
</script>



    

<!-- BEGIN PAGE OUTPUT -->
<div class="search-selector">Plugin Hub</div>

<div class="page page-extension-profile">
  
    


  <header class="page-header">
    <div class="container">
      
        <div class="page-header-icon">
          <img src="/assets/images/icons/hub/kong-inc_oauth2.png" alt="header icon"/>
        </div>
      

      <div class="page-header-title">
        

        <h1 id="main" tabindex="-1">OAuth 2.0 Authentication
          
            
          
        </h1>

        
      </div>
    </div>
  </header>


  

  <div class="container">

    
      <div class="versions-dropdown dropdown page-header-right">
        <button class="page-header-btn" id="version-dropdown" type="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
          Plugin Version 2.1.x
          <em>(latest)</em>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdown-menu-right" id="version-list" role="menu" aria-labelledby="version-dropdown">
          
            
            <li  class="active" >
              <a href="/hub/kong-inc/oauth2/">
                2.1.x <em>(latest)</em>
              </a>
            </li>
          
            
            <li >
              <a href="/hub/kong-inc/oauth2/1.0.x.html">
                1.0.x 
              </a>
            </li>
          
            
            <li >
              <a href="/hub/kong-inc/oauth2/0.1.x.html">
                0.1.x 
              </a>
            </li>
          
        </ul>
      </div>
    

    

    <aside class="page-navigation with-dropdown">
      <div class="github-links">
        <ul>
          <li>
            <a href="/hub">
            <i class="fa fa-chevron-left"></i>Back to Kong Plugin Hub</a>
          </li>
          <li>
            <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/docs.konghq.com/edit/main/app/_hub/kong-inc/oauth2/index.md" target="_blank">
            <img src="/assets/images/logos/logo-github.svg" alt="github-edit-page"/>Edit this page</a>
          </li>
          <li>
            <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/docs.konghq.com/issues">
            <img src="/assets/images/icons/documentation/icn-monitoring-black.svg" alt="report-issue" target="_blank"/>Report an issue</a>
          </li>
        </ul>
      </div>
      
        <nav>
          <ul>
  <li><a href="#configuration" class="active">Configuration Reference</a>
    <ul>
      <li><a href="#enable-the-plugin-on-a-service">Enable the plugin on a service</a></li>
      <li><a href="#enable-the-plugin-globally">Enable the plugin globally</a></li>
      <li><a href="#parameters">Parameters</a></li>
    </ul>
  </li>
  <li><a href="#usage">Usage</a>
    <ul>
      <li><a href="#endpoints">Endpoints</a></li>
      <li><a href="#create-a-consumer">Create a Consumer</a></li>
      <li><a href="#create-an-application">Create an Application</a></li>
    </ul>
  </li>
  <li><a href="#migrating-access-tokens">Migrating Access Tokens</a></li>
  <li><a href="#viewing-and-invalidating-access-tokens">Viewing and Invalidating Access Tokens</a></li>
  <li><a href="#upstream-headers">Upstream Headers</a></li>
  <li><a href="#oauth-20-flows">OAuth 2.0 Flows</a>
    <ul>
      <li><a href="#client-credentials">Client Credentials</a></li>
      <li><a href="#authorization-code">Authorization Code</a></li>
    </ul>
  </li>
  <li><a href="#resource-owner-password-credentials">Resource Owner Password Credentials</a></li>
  <li><a href="#refresh-token">Refresh Token</a></li>
  <li><a href="#grpc-requests">gRPC requests</a></li>
</ul>

        </nav>
      

      
      <table id="about-extn">
        <tr>
          <th colspan="2">About this Plugin</th>
        </tr>
        <tr class="publisher">
          <td>Made by</td>
          <td>
          
            
<svg width="78" height="15" xmlns="http://www.w3.org/2000/svg">
  <g fill="none" fill-rule="evenodd">
    <path d="M23.685 7.372l-1.217 1.265V12h-1.313V2.047h1.313v4.922l4.423-4.922h1.586L24.56 6.442 28.784 12h-1.572l-3.527-4.628zm5.714.861c0-.724.143-1.376.428-1.955a3.187 3.187 0 0 1 1.19-1.34c.507-.314 1.087-.471 1.739-.471 1.007 0 1.822.348 2.444 1.046.622.697.933 1.624.933 2.782v.089c0 .72-.138 1.366-.414 1.938a3.14 3.14 0 0 1-1.182 1.336c-.513.32-1.102.479-1.767.479-1.003 0-1.815-.349-2.437-1.046-.623-.697-.934-1.62-.934-2.769v-.089zm1.272.15c0 .821.19 1.48.57 1.976.381.497.89.745 1.529.745.642 0 1.153-.251 1.53-.755.379-.503.568-1.209.568-2.116 0-.81-.192-1.468-.577-1.972-.386-.503-.897-.755-1.535-.755-.624 0-1.128.248-1.51.745-.384.497-.575 1.208-.575 2.133zm8.244-3.78l.041.93c.565-.71 1.303-1.066 2.215-1.066 1.563 0 2.351.882 2.365 2.645V12h-1.265V7.105c-.004-.533-.126-.927-.365-1.182-.24-.255-.612-.383-1.118-.383-.41 0-.77.11-1.08.328-.31.219-.551.506-.725.861V12H37.72V4.604h1.196zm6.228 3.637c0-1.153.266-2.07.8-2.751.533-.682 1.239-1.022 2.119-1.022.902 0 1.606.319 2.112.957l.061-.82h1.156v7.218c0 .957-.284 1.712-.851 2.263-.568.551-1.33.827-2.287.827a3.804 3.804 0 0 1-1.566-.342c-.51-.228-.9-.54-1.168-.936l.656-.759c.542.67 1.205 1.005 1.99 1.005.614 0 1.094-.173 1.438-.52.344-.346.516-.834.516-1.463v-.635c-.506.583-1.196.875-2.071.875-.866 0-1.567-.349-2.102-1.046-.536-.697-.803-1.648-.803-2.85zm1.271.144c0 .834.171 1.489.513 1.965.342.476.82.714 1.435.714.798 0 1.383-.362 1.757-1.086V6.6c-.387-.707-.968-1.06-1.743-1.06-.615 0-1.096.24-1.442.718-.347.478-.52 1.187-.52 2.126zM58.37 12h-1.312V2.047h1.312V12zm3.398-7.396l.04.93c.566-.712 1.304-1.067 2.215-1.067 1.564 0 2.352.882 2.366 2.645V12h-1.265V7.105c-.005-.533-.126-.927-.366-1.182-.239-.255-.612-.383-1.117-.383-.41 0-.77.11-1.08.328-.31.219-.552.506-.725.861V12H60.57V4.604h1.197zm9.495 6.5c.45 0 .845-.136 1.182-.41.338-.273.524-.615.56-1.025h1.197a2.293 2.293 0 0 1-.437 1.21 2.881 2.881 0 0 1-1.077.916 3.107 3.107 0 0 1-1.425.342c-1.007 0-1.808-.336-2.403-1.009-.595-.672-.892-1.591-.892-2.758v-.212c0-.72.132-1.36.396-1.92a3.02 3.02 0 0 1 1.138-1.306c.495-.31 1.08-.465 1.754-.465.83 0 1.519.248 2.068.745.549.497.842 1.142.878 1.934h-1.196c-.037-.478-.218-.871-.544-1.179-.325-.307-.728-.461-1.206-.461-.643 0-1.14.231-1.494.694-.353.462-.53 1.131-.53 2.006v.24c0 .852.176 1.508.527 1.968.35.46.852.69 1.504.69zm4.388.233c0-.219.065-.401.195-.547.13-.146.325-.219.585-.219.26 0 .457.073.591.219a.776.776 0 0 1 .202.547c0 .21-.068.385-.202.526-.134.142-.332.212-.591.212-.26 0-.455-.07-.585-.212a.748.748 0 0 1-.195-.526z" fill="#4c6d80"/>
    <path fill="#4c6d80" d="M5.143 11.531l-.385.487.87 1.355-.09.627H9.23l.255-.627-1.484-1.842z"/>
    <path fill="#4c6d80" d="M7.162 3.284l-1.335 2.33 6.514 7.682-.186.704h2.988l.542-2.499-6.971-8.22z"/>
    <path fill="#4c6d80" d="M9.93 0L8.049 1.532l-.635 1.166H8.99l2.705 3.207 1.608-1.316v-.836l-.559-.781.413-.428z"/>
    <path fill="#4c6d80" d="M3.2 8.024h-.88L0 10.96V14h2.489l.438-.57 1.921-2.478h2.776l.855-1.304-3.01-3.562z"/>
  </g>
</svg>


          
          </td>
        </tr>
        <tr class="categories">
          <td>Categories</td>
          <td>
            <ul class="categories">
            
              
              <li><a href="/hub/#authentication">Authentication</a></li>
            
            </ul>
          </td>
        </tr>
        
        <tr>
          <td>DB-less compatible?</td>
          <td>
            <a href="/konnect-platform/compatibility/plugins">No</a>
          </td>
        </tr>
        
        
        <tr>
          <td>Konnect tier</td>
          <td>
            <span class="badge free"></span>
          </td>
        </tr>
        <tr>
          <td>Konnect Cloud</td>
          <td>
             Not available
          </td>
        </tr>
        
        
        
        
        
          <tr class="kong-editions">
            <th colspan="2">
                Version Compatibility
            </th>
          </tr>
          <tr class="kong-compatibility">
            <td colspan="2">
              <ul class="compat-list">
              
                
              
                
              
                
                  
                  <h6>Kong Gateway (Enterprise)</h6>
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  2.4.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  2.3.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  2.2.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  2.1.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  1.5.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  1.3-x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.36-x
                  </li>
                
              
                
              
                
              
                
              
                
              
                
              
              </ul><ul class="compat-list">
              
                
              
                
              
                
                  
                  <h6>Kong Gateway (OSS)</h6>
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  2.4.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  2.3.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  2.2.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  2.1.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  2.0.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  1.5.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  1.4.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  1.3.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  1.2.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  1.1.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  1.0.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.14.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.13.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.12.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.11.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.10.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.9.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.8.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.7.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.6.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.5.x
                  </li>
                
              
                
                  
                  <li>
                  
                    <i class="fa fa-check"></i>
                  0.4.x
                  </li>
                
              
                
              
                
              
              </ul>
            </td>
          </tr>
        
      </table>
      
    </aside>

    <div class="page-content-container">
      <div class="page-content">
        <div class="content show-anchor-links">
          
    
      
    
      
      

      <p>Add an OAuth 2.0 authentication layer with the <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.1">Authorization Code Grant</a>, <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.4">Client Credentials</a>,
<a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.2">Implicit Grant</a>, or <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.3">Resource Owner Password Credentials Grant</a> flow.</p>

<hr />

<div class="alert alert-warning">
  <strong>Note:</strong> As per the OAuth2 specs, this plugin requires the
  underlying service to be served over HTTPS. To avoid any
  confusion, we recommend that you configure the Route used to serve the
  underlying Service to only accept HTTPS traffic (using its `protocols`
  property).
</div>


      

      

      
        <h2 id="configuration">Configuration Reference</h2>
        
          <p>This plugin is compatible with requests with the following protocols:</p>
          <ul>
            
              <li><code>http</code></li>
            
              <li><code>https</code></li>
            
              <li><code>grpc</code></li>
            
              <li><code>grpcs</code></li>
            
          </ul>
        

        
          <p>This plugin is <strong>not compatible</strong> with DB-less mode.</p>
        
        

        
          <p>For its regular work, the plugin needs to both generate and delete tokens, and commit those changes to the database, which is not compatible with DB-less.</p>

<p>In addition to this, its Admin API endpoints offer several POST, PATCH, PUT, and DELETE methods for tokens and credentials. None of them would work on DB-less.</p>

        

        
          <!-- Generate Konnect and Kong Manager examples -->


<!-- Generate cURL examples -->


<!-- Generate declarative yaml examples -->


<!-- Generate kubernetes examples (different indentation from declarative) -->


<!-- Service config example -->



<!-- Route config example -->



<!-- Consumer config example -->



<!-- Global config example -->



<!-- Layout text -->

  
<h3 id="enable-the-plugin-on-a-service">Enable the plugin on a service</h3>

<div class="navtabs ">
  <div class="navtab-titles">
  
    <div data-navtab-id="navtab-154555ad-fcc1-4818-ad86-71b3cc19ee16-0" class="navtab-title">
      Admin API
    </div>
  
    <div data-navtab-id="navtab-154555ad-fcc1-4818-ad86-71b3cc19ee16-1" class="navtab-title">
      Manager
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="navtab-154555ad-fcc1-4818-ad86-71b3cc19ee16-0" class="navtab-content">
      
<p>For example, configure this plugin on a <a href="/gateway-oss/latest/admin-api/#service-object">service</a> by
making the following request:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST http://<span class="o">{</span>HOST<span class="o">}</span>:8001/services/<span class="o">{</span>SERVICE<span class="o">}</span>/plugins <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"name=oauth2"</span>  <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.scopes=email"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.scopes=phone"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.scopes=address"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.mandatory_scope=true"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.provision_key=&lt;autogenerated&gt;"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.token_expiration=7200"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.enable_authorization_code=true"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.enable_client_credentials=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.enable_implicit_grant=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.enable_password_grant=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.global_credentials=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.refresh_token_ttl=1209600"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.reuse_refresh_token=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.persistent_refresh_token=false"</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">SERVICE</code> is the <code class="language-plaintext highlighter-rouge">id</code> or <code class="language-plaintext highlighter-rouge">name</code> of the service that this plugin
configuration will target.</p>


    </div>
  
    <div data-navtab-content="navtab-154555ad-fcc1-4818-ad86-71b3cc19ee16-1" class="navtab-content">
      
<p>Configure this plugin on a service:</p>

<ol>
  <li>In Kong Manager, select the workspace.</li>
  <li>From the Dashboard, scroll down to <strong>Services</strong> and click <strong>View</strong> for the
service row.</li>
  <li>Scroll down to plugins and click <strong>Add Plugin</strong>.</li>
  <li>
    <p>Find and select the <strong>OAuth 2.0 Authentication</strong> plugin.</p>

    <div class="alert alert-ee blue">
 <strong>Note:</strong> If the plugin is greyed out, then it is not available
 for your product tier. See <a href="/enterprise/latest/deployment/licensing/">Kong Gateway tiers</a>.
 </div>
  </li>
  <li>If the option is available, select <strong>Scoped</strong>.</li>
  <li>Add the service name and ID to the <strong>Service</strong> field if it
is not already prefilled.</li>
  <li>
    <p>Enter the following <a href="#parameters">parameters</a>, updating the default or sample values as needed:</p>

    <ul>
      <li>Config.Mandatory Scope: select checkbox</li>
      <li>Config.Provision Key: <code class="language-plaintext highlighter-rouge">&lt;autogenerated&gt;</code></li>
      <li>Config.Token Expiration: <code class="language-plaintext highlighter-rouge">7200</code></li>
      <li>Config.Enable Authorization Code: select checkbox</li>
      <li>Config.Enable Client Credentials: clear checkbox</li>
      <li>Config.Enable Implicit Grant: clear checkbox</li>
      <li>Config.Enable Password Grant: clear checkbox</li>
      <li>Config.Global Credentials: clear checkbox</li>
      <li>Config.Refresh Token Ttl: <code class="language-plaintext highlighter-rouge">1209600</code></li>
      <li>Config.Reuse Refresh Token: <code class="language-plaintext highlighter-rouge">false</code></li>
      <li>Config.Persistent Refresh Token: <code class="language-plaintext highlighter-rouge">false</code></li>
    </ul>
  </li>
  <li>Click <strong>Create</strong>.</li>
</ol>

    </div>
  
  </div>
</div>







<h3 id="enable-the-plugin-globally">Enable the plugin globally</h3>

<p>A plugin which is not associated to any service, route, or consumer is
considered <em>global</em>, and will be run on every request. Read the
<a href="/gateway-oss/latest/admin-api/#add-plugin">Plugin Reference</a> and the <a href="/gateway-oss/latest/admin-api/#precedence">Plugin Precedence</a>
sections for more information.</p>

<div class="navtabs ">
  <div class="navtab-titles">
  
    <div data-navtab-id="navtab-57dfc707-3b86-4716-ba9b-0a62f05b5fa5-0" class="navtab-title">
      Admin API
    </div>
  
    <div data-navtab-id="navtab-57dfc707-3b86-4716-ba9b-0a62f05b5fa5-1" class="navtab-title">
      Kong Manager
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="navtab-57dfc707-3b86-4716-ba9b-0a62f05b5fa5-0" class="navtab-content">
      
<p>For example, configure this plugin globally with:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-X</span> POST http://<span class="o">{</span>HOST<span class="o">}</span>:8001/plugins/ <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"name=oauth2"</span>  <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.scopes=email"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.scopes=phone"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.scopes=address"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.mandatory_scope=true"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.provision_key=&lt;autogenerated&gt;"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.token_expiration=7200"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.enable_authorization_code=true"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.enable_client_credentials=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.enable_implicit_grant=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.enable_password_grant=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.global_credentials=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.refresh_token_ttl=1209600"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.reuse_refresh_token=false"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"config.persistent_refresh_token=false"</span>
</code></pre></div></div>


    </div>
  
    <div data-navtab-content="navtab-57dfc707-3b86-4716-ba9b-0a62f05b5fa5-1" class="navtab-content">
      
<p>Configure this plugin globally:</p>

<ol>
  <li>In Kong Manager, select the workspace.</li>
  <li>From the Dashboard, select <strong>Plugins</strong> in the left navigation.</li>
  <li>Click <strong>New Plugin</strong>.</li>
  <li>
    <p>Find and select the <strong>OAuth 2.0 Authentication</strong> plugin.</p>

    <div class="alert alert-ee blue">
 <strong>Note:</strong> If the plugin is greyed out, then it is not available
 for your product tier. See <a href="">Kong Gateway tiers</a>.
 </div>
  </li>
  <li>If the option is available, set the plugin scope to <strong>Global</strong>.</li>
  <li>
    <p>Enter the following <a href="#parameters">parameters</a>, updating the
default/sample values as needed:</p>

    <ul>
      <li>Config.Mandatory Scope: select checkbox</li>
      <li>Config.Provision Key: <code class="language-plaintext highlighter-rouge">&lt;autogenerated&gt;</code></li>
      <li>Config.Token Expiration: <code class="language-plaintext highlighter-rouge">7200</code></li>
      <li>Config.Enable Authorization Code: select checkbox</li>
      <li>Config.Enable Client Credentials: clear checkbox</li>
      <li>Config.Enable Implicit Grant: clear checkbox</li>
      <li>Config.Enable Password Grant: clear checkbox</li>
      <li>Config.Global Credentials: clear checkbox</li>
      <li>Config.Refresh Token Ttl: <code class="language-plaintext highlighter-rouge">1209600</code></li>
      <li>Config.Reuse Refresh Token: <code class="language-plaintext highlighter-rouge">false</code></li>
      <li>Config.Persistent Refresh Token: <code class="language-plaintext highlighter-rouge">false</code></li>
    </ul>
  </li>
  <li>Click <strong>Create</strong>.</li>
</ol>


    </div>
  
  </div>
</div>



        

        <h3 id="parameters">Parameters</h3>

        <p>Here's a list of all the parameters which can be used in this plugin's configuration: </p>

        
<table>
  <thead>
    <tr>
      <th style="width: 25%;">Form Parameter</th>
      <th style="width: 75%;">Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>name</code>
        <br /><br /><strong>Type: </strong>string</td>
      <td>The name of the plugin to use, in this case <code>oauth2</code>.</td>
    </tr>

    
      <tr>
        <td><code>service.id</code>
          <br /><br /><strong>Type: </strong>string</td>
        <td>The ID of the Service the plugin targets.</td>
      </tr>
    
    
    
      <tr>
        <td><code>enabled</code>
          <br /><br /><strong>Type: </strong>boolean
          <br /><br /><strong>Default value: </strong><code>true</code></td>
        <td>Whether this plugin will be applied.</td>
      </tr>
    
    
      
      <tr>
        <td><code>config.scopes</code>
          
          
          <br /><em>semi-optional</em>
          <br /><br /><strong>Type: </strong>array of string elements

          
        </td>
        <td>
          <br /><p>Describes an array of scope names that will be available to the end user. If <code class="language-plaintext highlighter-rouge">mandatory_scope</code> is
set to <code class="language-plaintext highlighter-rouge">true</code>, then <code class="language-plaintext highlighter-rouge">scopes</code> are required.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.mandatory_scope</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>An optional boolean value telling the plugin to require at least one <code class="language-plaintext highlighter-rouge">scope</code> to be authorized by the end user.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.provision_key</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>string

          <br /><br /><strong>Default value: </strong><code>true
</code>
        </td>
        <td>
          <br /><p>The unique key the plugin has generated when it has been added to the Service.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.token_expiration</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>number

          <br /><br /><strong>Default value: </strong><code>7200
</code>
        </td>
        <td>
          <br /><p>An optional integer value telling the plugin how many seconds a token should last, after which the client will
need to refresh the token. Set to <code class="language-plaintext highlighter-rouge">0</code> to disable the expiration.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.enable_authorization_code</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>An optional boolean value to enable the three-legged Authorization Code flow (<a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.1">RFC 6742 Section 4.1</a>).</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.enable_client_credentials</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>An optional boolean value to enable the Client Credentials Grant flow (<a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.4">RFC 6742 Section 4.4</a>).</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.enable_implicit_grant</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>An optional boolean value to enable the Implicit Grant flow which allows to provision a token as a result of the authorization process (<a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.2">RFC 6742 Section 4.2</a>).</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.enable_password_grant</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>An optional boolean value to enable the Resource Owner Password Credentials Grant flow (<a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.3">RFC 6742 Section 4.3</a>).</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.auth_header_name</code>
          
          <br /><em>optional</em>
          
          <br /><br /><strong>Type: </strong>string

          <br /><br /><strong>Default value: </strong><code>authorization
</code>
        </td>
        <td>
          <br /><p>The name of the header that is supposed to carry the access token. Default: <code class="language-plaintext highlighter-rouge">authorization</code>.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.hide_credentials</code>
          
          <br /><em>optional</em>
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>An optional boolean value telling the plugin to show or hide the credential from the upstream service.
If <code class="language-plaintext highlighter-rouge">true</code>, the plugin will strip the credential from the request (the header containing the client credentials)
before proxying it.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.accept_http_if_already_terminated</code>
          
          <br /><em>optional</em>
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>Accepts HTTPs requests that have already been terminated by a proxy or load balancer and the
<code class="language-plaintext highlighter-rouge">x-forwarded-proto: https</code> header has been added to the request. Only enable this option
if the Kong server cannot be publicly accessed and the only entry point is such proxy or load balancer.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.anonymous</code>
          
          <br /><em>optional</em>
          
          <br /><br /><strong>Type: </strong>string

          
        </td>
        <td>
          <br /><p>An optional string (consumer uuid) value to use as an anonymous consumer if authentication fails. If empty (default), the request will fail with an authentication failure <code class="language-plaintext highlighter-rouge">4xx</code>. Please note that this value must refer to the Consumer <code class="language-plaintext highlighter-rouge">id</code> attribute which is internal to Kong, and <strong>not</strong> its <code class="language-plaintext highlighter-rouge">custom_id</code>.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.global_credentials</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>An optional boolean value that allows using the same OAuth credentials generated by the plugin with
any other Service whose OAuth 2.0 plugin configuration also has <code class="language-plaintext highlighter-rouge">config.global_credentials=true</code>.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.refresh_token_ttl</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>number

          <br /><br /><strong>Default value: </strong><code>1209600
</code>
        </td>
        <td>
          <br /><p>An optional integer value telling the plugin how many seconds a token/refresh token pair is valid for,
and can be used to generate a new access token. Default value is 2 weeks. Set to <code class="language-plaintext highlighter-rouge">0</code> to keep the token/refresh
token pair valid indefinitely.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.reuse_refresh_token</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>An optional boolean value that indicates whether an OAuth refresh token is
reused when refreshing an access token.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.persistent_refresh_token</code>
          <br /><em>required</em>
          
          
          <br /><br /><strong>Type: </strong>boolean

          <br /><br /><strong>Default value: </strong><code>false
</code>
        </td>
        <td>
          <br /><p>An optional boolean value that indicates whether an OAuth refresh token is
persisted when refreshing an access token.</p>
</td>
      </tr>
      
    
      
      <tr>
        <td><code>config.pkce</code>
          
          <br /><em>optional</em>
          
          <br /><br /><strong>Type: </strong>string

          <br /><br /><strong>Default value: </strong><code>lax
</code>
        </td>
        <td>
          <br /><p>Specifies a mode of how the Proof Key for Code Exchange (PKCE) should be
handled by the plugin. The possible modes are <code class="language-plaintext highlighter-rouge">none</code>, <code class="language-plaintext highlighter-rouge">lax</code>, and <code class="language-plaintext highlighter-rouge">strict</code>.
The <code class="language-plaintext highlighter-rouge">strict</code> mode enforces PKCE on both authorization and token endpoints for
all the clients. The <code class="language-plaintext highlighter-rouge">lax</code> mode enforces PKCE for public clients, but it does
not enforce it for confidential clients. The <code class="language-plaintext highlighter-rouge">none</code> mode does not enforce PKCE
on any client. In any case, if a client asks for PKCE on authorization
endpoint, the PKCE is also enforced on token endpoint.</p>
</td>
      </tr>
      
    
  </tbody>
</table>


      

      
<p>Once applied, any user with a valid credential can access the Service.
To restrict usage to only some of the authenticated users, also add the
<a href="/plugins/acl/">ACL</a> plugin (not covered here) and create allowed or
denied groups of users.</p>


      <h2 id="usage">Usage</h2>

<p>In order to use the plugin, you first need to create a consumer to associate one or more credentials to. The Consumer represents a developer using the upstream service.</p>

<div class="alert alert-warning">
    <strong>Note</strong>: This plugin requires a database in order to work effectively. It *does not* work on DB-Less mode.
</div>

<h3 id="endpoints">Endpoints</h3>

<p>By default the OAuth 2.0 plugin listens on the following endpoints when a client consumes the underlying Service via the <a rel="nofollow noopener noreferrer" href="https://docs.konghq.com/latest/configuration/#proxy_listen">proxy port</a>:</p>

<table>
  <thead>
    <tr>
      <th>Endpoint</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/oauth2/authorize</code></td>
      <td>The endpoint to the Authorization Server that provisions authorization codes for the <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.1">Authorization Code</a> flow, or the access token when the <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.2">Implicit Grant</a> flow is enabled. Only <code class="language-plaintext highlighter-rouge">POST</code> is supported.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/oauth2/token</code></td>
      <td>The endpoint to the Authorization Server that provision access tokens. This is also the only endpoint to use for the <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.4">Client Credentials</a> and <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.3">Resource Owner Password Credentials Grant</a> flows. Only <code class="language-plaintext highlighter-rouge">POST</code> is supported.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/oauth2_tokens</code></td>
      <td>The endpoint to the Authorization Server that allows creating new tokens. Useful on migrations (see below).</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">/oauth2_tokens/:token_id</code></td>
      <td>The endpoint to the Authorization Server that allows reading, modifying and deleting access tokens.</td>
    </tr>
  </tbody>
</table>

<p>The clients trying to authorize and request access tokens must use these endpoints. Remember that the endpoints above must be combined with the right URI path or headers that you normally use to match a configured Route through Kong.</p>

<h3 id="create-a-consumer">Create a Consumer</h3>

<p>You need to associate a credential to an existing <a href="/gateway-oss/latest/admin-api/#consumer-object">Consumer</a> object. To create a Consumer, you can execute the following request:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/consumers/ <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"username=user123"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"custom_id=SOME_CUSTOM_ID"</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>parameter</th>
      <th>default</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">username</code><br /><em>semi-optional</em></td>
      <td></td>
      <td>The username of the consumer. Either this field or <code class="language-plaintext highlighter-rouge">custom_id</code> must be specified.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">custom_id</code><br /><em>semi-optional</em></td>
      <td></td>
      <td>A custom identifier used to map the consumer to another database. Either this field or <code class="language-plaintext highlighter-rouge">username</code> must be specified.</td>
    </tr>
  </tbody>
</table>

<p>A <a href="/gateway-oss/latest/admin-api/#consumer-object">Consumer</a> can have many credentials.</p>

<h3 id="create-an-application">Create an Application</h3>

<p>Then you can finally provision new OAuth 2.0 credentials (also called OAuth applications) by making the following HTTP request:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/consumers/<span class="o">{</span>consumer_id<span class="o">}</span>/oauth2 <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"name=Test%20Application"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"client_id=SOME-CLIENT-ID"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"client_secret=SOME-CLIENT-SECRET"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"redirect_uris=http://some-domain/endpoint/"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"hash_secret=true"</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">consumer_id</code>: The <a href="/gateway-oss/latest/admin-api/#consumer-object">Consumer</a> entity to associate the credentials to</p>

<table>
  <thead>
    <tr>
      <th>form parameter</th>
      <th>default</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">name</code></td>
      <td></td>
      <td>The name to associate to the credential. In OAuth 2.0 this would be the application name.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_id</code><br /><em>optional</em></td>
      <td></td>
      <td>You can optionally set your own unique <code class="language-plaintext highlighter-rouge">client_id</code>. If missing, the plugin will generate one.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_secret</code><br /><em>optional</em></td>
      <td></td>
      <td>You can optionally set your own unique <code class="language-plaintext highlighter-rouge">client_secret</code>. If missing, the plugin will generate one.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">redirect_uris</code></td>
      <td></td>
      <td>An array with one or more URLs in your app where users will be sent after authorization (<a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-3.1.2">RFC 6742 Section 3.1.2</a>)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">hash_secret</code></td>
      <td><code class="language-plaintext highlighter-rouge">false</code></td>
      <td>A boolean flag that indicates whether the <code class="language-plaintext highlighter-rouge">client_secret</code> field will be stored in hashed form. If enabled on existing plugin instances, client secrets are hashed on the fly upon first usage.</td>
    </tr>
  </tbody>
</table>

<h2 id="migrating-access-tokens">Migrating Access Tokens</h2>

<p>If you are migrating your existing OAuth 2.0 applications and access tokens over to Kong, then you can:</p>

<ul>
  <li>Migrate consumers and applications by creating OAuth 2.0 applications as explained above.</li>
  <li>Migrate access tokens using the <code class="language-plaintext highlighter-rouge">/oauth2_tokens</code> endpoints in the Kongs Admin API. For example:</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-X</span> POST http://kong:8001/oauth2_tokens <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'credential.id=KONG-APPLICATION-ID'</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"token_type=bearer"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"access_token=SOME-TOKEN"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"refresh_token=SOME-TOKEN"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"expires_in=3600"</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>form parameter</th>
      <th>default</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">credential</code></td>
      <td></td>
      <td>Contains the ID of the OAuth 2.0 application created on Kong.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">token_type</code><br /><em>optional</em></td>
      <td><code class="language-plaintext highlighter-rouge">bearer</code></td>
      <td>The <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-7.1">token type</a>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">access_token</code><br /><em>optional</em></td>
      <td></td>
      <td>You can optionally set your own access token value, otherwise a random string will be generated.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">refresh_token</code><br /><em>optional</em></td>
      <td></td>
      <td>You can optionally set your own unique refresh token value, otherwise a random string will be generated.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">expires_in</code></td>
      <td></td>
      <td>The expiration time (in seconds) of the access token.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">scope</code><br /><em>optional</em></td>
      <td></td>
      <td>The authorized scope associated with the token.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">authenticated_userid</code><br /><em>optional</em></td>
      <td></td>
      <td>The custom ID of the user who authorized the application.</td>
    </tr>
  </tbody>
</table>

<h2 id="viewing-and-invalidating-access-tokens">Viewing and Invalidating Access Tokens</h2>

<p>Active tokens can be listed and modified using the Admin API. A GET on the <code class="language-plaintext highlighter-rouge">/oauth2_tokens</code> endpoint returns the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-sX</span> GET http://kong:8001/oauth2_tokens/
<span class="o">{</span>
  <span class="s2">"total"</span>: 2,
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"expires_in"</span>: 7200,
      <span class="s2">"created_at"</span>: 1523386491000,
      <span class="s2">"access_token"</span>: <span class="s2">"FOEtUHwg0das9PhsasVmgMGbZn7nWSgK"</span>,
      <span class="s2">"credential_id"</span>: <span class="s2">"2c74324f-fa2d-434b-b6de-bd138652158f"</span>,
      <span class="s2">"scope"</span>: <span class="s2">"email"</span>,
      <span class="s2">"id"</span>: <span class="s2">"610740e5-700a-45f0-889a-5c7f0422c48d"</span>,
      <span class="s2">"api_id"</span>: <span class="s2">"898dfc5f-20f9-4315-a028-2ecb0193f834"</span>,
      <span class="s2">"token_type"</span>: <span class="s2">"bearer"</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">"expires_in"</span>: 7200,
      <span class="s2">"created_at"</span>: 1523386680000,
      <span class="s2">"access_token"</span>: <span class="s2">"58eat7UHEiPOmjNb16uQAxt4vu3fbu95"</span>,
      <span class="s2">"credential_id"</span>: <span class="s2">"2c74324f-fa2d-434b-b6de-bd138652158f"</span>,
      <span class="s2">"scope"</span>: <span class="s2">"email"</span>,
      <span class="s2">"id"</span>: <span class="s2">"edff2fc7-1634-4fb5-b714-de9435531e10"</span>,
      <span class="s2">"api_id"</span>: <span class="s2">"898dfc5f-20f9-4315-a028-2ecb0193f834"</span>,
      <span class="s2">"token_type"</span>: <span class="s2">"bearer"</span>
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">credential_id</code> is the ID of the OAuth application at <code class="language-plaintext highlighter-rouge">kong:8001/consumers/{consumer_id}/oauth2</code> and <code class="language-plaintext highlighter-rouge">api_id</code> or <code class="language-plaintext highlighter-rouge">service_id</code> is the API or service that the token is valid for.</p>

<p>Note that <code class="language-plaintext highlighter-rouge">expires_in</code> is static and does not decrement based on elapsed time: you must add it to <code class="language-plaintext highlighter-rouge">created_at</code> to calculate when the token will expire.</p>

<p><code class="language-plaintext highlighter-rouge">DELETE http://kong:8001/oauth2_tokens/&lt;token ID&gt;</code> allows you to immediately invalidate a token if needed.</p>

<h2 id="upstream-headers">Upstream Headers</h2>

<p>When a client has been authenticated and authorized, the plugin will append some headers to the request before proxying it to the upstream service, so that you can identify the consumer and the end-user in your code:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">X-Consumer-ID</code>, the ID of the Consumer on Kong</li>
  <li><code class="language-plaintext highlighter-rouge">X-Consumer-Custom-ID</code>, the <code class="language-plaintext highlighter-rouge">custom_id</code> of the Consumer (if set)</li>
  <li><code class="language-plaintext highlighter-rouge">X-Consumer-Username</code>, the <code class="language-plaintext highlighter-rouge">username</code> of the Consumer (if set)</li>
  <li><code class="language-plaintext highlighter-rouge">X-Credential-Identifier</code>, the identifier of the credential (if set)</li>
  <li><code class="language-plaintext highlighter-rouge">X-Authenticated-Scope</code>, the comma-separated list of scopes that the end user has authenticated, if available (only if the consumer is not the anonymous consumer)</li>
  <li><code class="language-plaintext highlighter-rouge">X-Authenticated-Userid</code>, the logged-in user ID who has granted permission to the client (only if the consumer is not the anonymous consumer)</li>
  <li><code class="language-plaintext highlighter-rouge">X-Anonymous-Consumer</code>, will be set to <code class="language-plaintext highlighter-rouge">true</code> when authentication failed, and the anonymous consumer was set instead.</li>
</ul>

<p>You can use this information on your side to implement additional logic. You can use the <code class="language-plaintext highlighter-rouge">X-Consumer-ID</code> value to query the Kong Admin API and retrieve more information about the Consumer.</p>

<hr />

<h2 id="oauth-20-flows">OAuth 2.0 Flows</h2>

<h3 id="client-credentials">Client Credentials</h3>

<p>The <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.4">Client Credentials</a> flow will work out of the box, without building any authorization page. The clients will need to use the <code class="language-plaintext highlighter-rouge">/oauth2/token</code> endpoint to request an access token.</p>

<h3 id="authorization-code">Authorization Code</h3>

<p>After provisioning Consumers and associating OAuth 2.0 credentials to them, it is important to understand how the OAuth 2.0 authorization flow works. As opposed to most of the Kong plugins, the OAuth 2.0 plugin requires some little additional work on your side to make everything work well:</p>

<ul>
  <li>You <strong>must</strong> implement an authorization page on your web application, that will talk with the plugin server-side.</li>
  <li><em>Optionally</em> you need to explain on your website/documentation how to consume your OAuth 2.0 protected services, so that developers accessing your service know how to build their client implementations</li>
</ul>

<h4 id="the-flow-explained">The flow explained</h4>

<p>Building the authorization page is going to be the primary task that the plugin itself cannot do out of the box, because it requires to check that the user is properly logged in, and this operation is strongly tied with your authentication implementation.</p>

<p>The authorization page is made of two parts:</p>

<ul>
  <li>The frontend page that the user will see, and that will allow him to authorize the client application to access his data</li>
  <li>The backend that will process the HTML form displayed in the frontend, that will talk with the OAuth 2.0 plugin on Kong, and that will ultimately redirect the user to a third party URL.</li>
</ul>

<div class="alert alert-info">
    <a rel="nofollow noopener noreferrer" href="https://github.com/Kong/kong-oauth2-hello-world">You can see a sample implementation in node.js + express.js on GitHub</a>
</div>

<p>A diagram representing this flow:</p>

<div class="alert alert-info">
  <a title="OAuth 2.0 Flow" href="/assets/images/docs/oauth2/oauth2-flow.png" target="_blank"><img src="/assets/images/docs/oauth2/oauth2-flow.png" /></a>
</div>

<ol>
  <li>The client application will redirect the end user to the authorization page on your web application, passing <code class="language-plaintext highlighter-rouge">client_id</code>, <code class="language-plaintext highlighter-rouge">response_type</code> and <code class="language-plaintext highlighter-rouge">scope</code> (if required) as querystring parameters. This is a sample authorization page:
    <div class="alert alert-info">
   <center><img title="OAuth 2.0 Prompt" src="/assets/images/docs/oauth2/oauth2-prompt.png" /></center>
 </div>
  </li>
  <li>
    <p>Before showing the actual authorization page, the web application will make sure that the user is logged in.</p>
  </li>
  <li>
    <p>The client application will send the <code class="language-plaintext highlighter-rouge">client_id</code> in the querystring, from which the web application can retrieve both the OAuth 2.0 application name, and developer name, by making the following request to Kong:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>curl kong:8001/oauth2?client_id<span class="o">=</span>XXX
</code></pre></div>    </div>
  </li>
  <li>
    <p>If the end user authorized the application, the form will submit the data to your backend with a <code class="language-plaintext highlighter-rouge">POST</code> request, sending the <code class="language-plaintext highlighter-rouge">client_id</code>, <code class="language-plaintext highlighter-rouge">response_type</code> and <code class="language-plaintext highlighter-rouge">scope</code> parameters that were placed in <code class="language-plaintext highlighter-rouge">&lt;input type="hidden" .. /&gt;</code> fields.</p>
  </li>
  <li>
    <p>The backend must add the <code class="language-plaintext highlighter-rouge">provision_key</code> and <code class="language-plaintext highlighter-rouge">authenticated_userid</code> parameters to the <code class="language-plaintext highlighter-rouge">client_id</code>, <code class="language-plaintext highlighter-rouge">response_type</code> and <code class="language-plaintext highlighter-rouge">scope</code> parameters and it will make a <code class="language-plaintext highlighter-rouge">POST</code> request to Kong at your Service address, on the <code class="language-plaintext highlighter-rouge">/oauth2/authorize</code> endpoint. If an <code class="language-plaintext highlighter-rouge">Authorization</code> header has been sent by the client, that must be added too. The equivalent of:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>curl https://your.service.com/oauth2/authorize <span class="se">\</span>
     <span class="nt">--header</span> <span class="s2">"Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"client_id=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"response_type=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"scope=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"provision_key=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"authenticated_userid=XXX"</span>
</code></pre></div>    </div>

    <p>The <code class="language-plaintext highlighter-rouge">provision_key</code> is the key the plugin has generated when it has been added to the Service while <code class="language-plaintext highlighter-rouge">authenticated_userid</code> is the ID of the logged-in end user who has granted the permission.</p>
  </li>
  <li>
    <p>Kong will respond with a JSON response:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nl">"redirect_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://some/url"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>

    <p>With either a <code class="language-plaintext highlighter-rouge">200 OK</code> or <code class="language-plaintext highlighter-rouge">400 Bad Request</code> response code depending if the request was successful or not.</p>
  </li>
  <li>
    <p>In <strong>both</strong> cases, ignore the response status code and just redirect the user to whatever URI is being returned in the <code class="language-plaintext highlighter-rouge">redirect_uri</code> property.</p>
  </li>
  <li>
    <p>The client application will take it from here, and will continue the flow with Kong with no other interaction with your web application. Like exchanging the authorization code for an access token if its an Authorization Code Grant flow.</p>
  </li>
  <li>
    <p>Once the Access Token has been retrieved, the client application will make requests on behalf of the user to your upstream service.</p>
  </li>
  <li>Access Tokens can expire, and when that happens the client application needs to renew the Access Token with Kong and retrieve a new one.</li>
</ol>

<p>In this flow, the steps that you need to implement are:</p>

<ul>
  <li>The login page, you probably already have it (step 2)</li>
  <li>The Authorization page, with its backend that will simply collect the values, make a <code class="language-plaintext highlighter-rouge">POST</code> request to Kong and redirect the user to whatever URL Kong has returned (steps 3 to 7).</li>
</ul>

<hr />

<h2 id="resource-owner-password-credentials">Resource Owner Password Credentials</h2>

<p>The <a rel="nofollow noopener noreferrer" href="https://tools.ietf.org/html/rfc6749#section-4.3">Resource Owner Password Credentials Grant</a> is a much simpler version of the Authorization Code flow, but it still requires to build an authorization backend (without the frontend) in order to make it work properly.</p>

<p><img src="/assets/images/docs/oauth2/oauth2-flow2.png" alt="OAuth 2.0 Flow" /></p>

<ol>
  <li>
    <p>On the first request, the client application make a request including some OAuth2 parameters, including <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code> parameters, to your web-application.</p>
  </li>
  <li>
    <p>The backend of your web-application will authenticate the <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code> sent by the client, and if successful will add the <code class="language-plaintext highlighter-rouge">provision_key</code>, <code class="language-plaintext highlighter-rouge">authenticated_userid</code> and <code class="language-plaintext highlighter-rouge">grant_type</code> parameters to the parameters originally sent by the client, and it will make a <code class="language-plaintext highlighter-rouge">POST</code> request to Kong at, on the <code class="language-plaintext highlighter-rouge">/oauth2/token</code> endpoint of the configured plugin. If an <code class="language-plaintext highlighter-rouge">Authorization</code> header has been sent by the client, that must be added too. The equivalent of:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>curl https://your.service.com/oauth2/token <span class="se">\</span>
     <span class="nt">--header</span> <span class="s2">"Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"client_id=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"client_secret=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"grant_type=password"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"scope=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"provision_key=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"authenticated_userid=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"username=XXX"</span> <span class="se">\</span>
     <span class="nt">--data</span> <span class="s2">"password=XXX"</span>
</code></pre></div>    </div>

    <p>The <code class="language-plaintext highlighter-rouge">provision_key</code> is the key the plugin has generated when it has been added to the Service, while <code class="language-plaintext highlighter-rouge">authenticated_userid</code> is the ID of the end user whose <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code> belong to.</p>
  </li>
  <li>
    <p>Kong will respond with a JSON response</p>
  </li>
  <li>
    <p>The JSON response sent by Kong must be sent back to the original client as it is. If the operation is successful, this response will include an access token, otherwise it will include an error.</p>
  </li>
</ol>

<p>In this flow, the steps that you need to implement are:</p>

<ul>
  <li>The backend endpoint that will process the original request and will authenticate the <code class="language-plaintext highlighter-rouge">username</code> and <code class="language-plaintext highlighter-rouge">password</code> values sent by the client, and if the authentication is successful, make the request to Kong and return back to the client whatever response Kong has sent back.</li>
</ul>

<hr />

<h2 id="refresh-token">Refresh Token</h2>

<p>When your access token expires, you can generate a new access token using the refresh token you received in conjunction to your expired access token.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-X</span> POST https://your.service.com/oauth2/token <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"grant_type=refresh_token"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"client_id=XXX"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"client_secret=XXX"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s2">"refresh_token=XXX"</span>
</code></pre></div></div>

<hr />

<h2 id="grpc-requests">gRPC requests</h2>

<p>The same access tokens can be used by gRPC applications:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>grpcurl <span class="nt">-H</span> <span class="s1">'authorization: bearer XXX'</span> ...
</code></pre></div></div>

<p>Note that the rest of the credentials flow uses HTTPS and not gRPC protocol.  Depending on your application, you might have to configure the <code class="language-plaintext highlighter-rouge">oauth2</code> plugin on two separate routes: one under <code class="language-plaintext highlighter-rouge">protocols: ["https"]</code> and another under <code class="language-plaintext highlighter-rouge">protocols: ["grpcs"]</code>.</p>



      

      
    
        </div>
      </div>
    </div>
  </div>
  <div id="scroll-to-top-button">
    <i class="fas fa-chevron-up"></i>
  </div>
  
  <div class="feedback-widget-container">
  <input id="feedback-widget-checkbox" type="checkbox">
  <label for="feedback-widget-checkbox">
    <img src="/assets/images/icons/feedback-widget.svg" alt="Feedback widget"/>
  </label>
  <div class="feedback-container">
    <div class="feedback-thankyou">
      Thank you for your feedback.
    </div>
    <div class="feedback-comment">
      <textarea id="feedback-comment-text" rows="3" placeholder="Please let us know what we can improve on this page..."></textarea>
      <div class="feedback-comment-buttons">
        <button id="feedback-comment-button-back">Back</button>
        <button id="feedback-comment-button-submit" class="button-primary">Submit</button>
      </div>
    </div>
    <div class="feedback-options">
      <div class="feedback-options-title">Was this page useful?</div>
      <div class="feedback-options-buttons">
        <i data-feedback-result="yes" class="feedback-options-button far fa-thumbs-up"></i>
        <i data-feedback-result="no" class="feedback-options-button far fa-thumbs-down"></i>
      </div>
    </div>
  </div>
</div>

  
</div>

<div id="image-modal" data-image-expand-disabled="">
  <div class="image-modal-backdrop"></div>
  <div class="image-container">
    <img src="" alt="">
    <i class="fa fa-times"></i>
  </div>
</div>


<!-- <script>
/* eslint-disable */
  window.intercomSettings = {
    app_id: "gwoi3d8y"
  };
</script>

<script>
/* eslint-disable */
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/gwoi3d8y';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()
</script>
 -->


    <footer class="marketing-footer--light-gray">
  <section>
    <ul class="newsletter">
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/KogoBlue.svg" alt="Kong" />
        </div>
        <h5>THE CLOUD CONNECTIVITY COMPANY</h5>
        <p>
          Kong powers reliable digital connections across APIs, hybrid and
          multi-cloud environments.
        </p>
        <div class="footer-form-container">
          <form id="subscribe-form" method="POST" action="/assets/javascripts/subscribe.js">
            <div>
              <input required id="subscribe-input" type="email" name="email" id="email" placeholder="Email" aria-required="true" aria-invalid="false">
              <input id="footer-form-button" type="submit" form="subscribe-form" value="Subscribe">
            </div>
          </form>

          <div id="form-response"></div>
        </div>
        <nav>
          <ul>
            <li>
              <a
                href="http://konghq.com/about-kong-inc/?itm_source=website&itm_medium=footer-nav"
                >Company</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/customers/?itm_source=website&itm_medium=footer-nav"
                >Customers</a
              >
            </li>

            <li>
              <a
                href="http://konghq.com/events/?itm_source=website&itm_medium=footer-nav"
                >Events</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/investors/?itm_source=website&itm_medium=footer-nav"
                >Investors</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/careers/?itm_source=website&itm_medium=footer-nav"
                >Careers <span>Hiring!</span></a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/partners/?itm_source=website&itm_medium=footer-nav"
                >Partners</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/press-room/?itm_source=website&itm_medium=footer-nav"
                >Press</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/contact/?itm_source=website&itm_medium=footer-nav"
                >Contact</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Products</h5>
          <ul>
            <li>
              <a
                href="http://konghq.com/kong-konnect/?itm_source=website&itm_medium=footer-nav"
                >Kong Konnect</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/get-started/?itm_source=website&itm_medium=footer-nav"
                >Get Started</a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/subscriptions/?itm_source=website&itm_medium=footer-nav"
                >Subscriptions</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Resources</h5>
          <ul>
            <li>
              <a
                href="https://konghq.com/resources/?content=ebooks&itm_source=website&itm_medium=footer-nav"
                target="blank"
                >eBooks</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/resources/?content=webinarss&itm_source=website&itm_medium=footer-nav"
                >Webinars</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/resources/?content=whitepaper,datasheet,case-studies&itm_source=website&itm_medium=footer-nav"
                >Briefs</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/blog/?itm_source=website&itm_medium=footer-nav"
                >Blog</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/learning-center/api-gateway/?itm_source=website&itm_medium=footer-nav"
                >API Gateway</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/learning-center/microservices/?itm_source=website&itm_medium=footer-nav"
                >Microservices</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Open Source</h5>
          <ul>
            <li>
              <a
                href="https://konghq.com/install/#kong-community"
                >Install Kong Gateway </a
              >
            </li>
            <li>
              <a
                href="http://konghq.com/community/?itm_source=website&itm_medium=footer-nav"
                >Kong Community</a
              >
            </li>
            <li>
              <a
                href="https://github.com/Kong/kubernetes-ingress-controller/?itm_source=website&itm_medium=footer-nav"
                >Kubernetes Ingress</a
              >
            </li>
            <li>
              <a
                href="https://kuma.io/?itm_source=website&itm_medium=footer-nav"
                >Kuma</a
              >
            </li>
            <li>
              <a
                href="https://insomnia.rest/?itm_source=website&itm_medium=footer-nav"
                >Insomnia</a
              >
            </li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h5>Solutions</h5>
          <ul>
            <li>
              <a
                href="https://konghq.com/solutions/use-cases/decentralize-applications-and-services/?itm_source=website&itm_medium=footer-nav"
                >Decentralize</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/use-cases/secure-and-govern-apis-and-services/?itm_source=website&itm_medium=footer-nav"
                >Secure & Govern</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/use-cases/create-a-developer-platform/?itm_source=website&itm_medium=footer-nav"
                >Create a Dev Platform</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/gateway/?itm_source=website&itm_medium=footer-nav"
                >API Gateway</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/solutions/kubernetes-ingress/?itm_source=website&itm_medium=footer-nav"
                >Kubernetes</a
              >
            </li>
            <li>
              <a
                href="https://konghq.com/products/kong-enterprise/kong-mesh/?itm_source=website&itm_medium=footer-nav"
                >Service Mesh</a
              >
            </li>
          </ul>
        </nav>
      </li>
    </ul>
  </section>

  <section class="legal">
    <div class="container d-flex">
      <div class="social">
        <div class="social-link">
          <a href="https://www.facebook.com/konghq/" title="Facebook"
            ><i
              aria-label="Facebook"
              class="fa fa-facebook-official"
              aria-hidden="true"
            ></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://twitter.com/thekonginc" title="Twitter"
            ><i
              aria-label="Twitter"
              class="fa fa-twitter"
              aria-hidden="true"
            ></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://www.meetup.com/topics/kong/all/" title="Meetup"
            ><i aria-label="Meetup" class="fa fa-meetup" aria-hidden="true"></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://linkedin.com/company/278819" title="LinkedIn"
            ><i
              aria-label="GitHub"
              class="fa fa-linkedin"
              aria-hidden="true"
            ></i
          ></a>
        </div>
        <div class="social-link">
          <a href="https://github.com/kong/kong" target="blank" class="btn-gh">
            <i class="fa fa-github" aria-hidden="true" aria-label="GitHub"></i>
            Star
          </a>
        </div>
      </div>
      <ul>
        <li>
          <span class="mashape-footer-content">
            <a href="http://konghq.com/terms/">Terms</a><b></b
            ><a href="http://konghq.com/privacy/">Privacy</a></span
          >
        </li>
      </ul>
      <div>
        <span>&copy; Kong Inc. 2021 &nbsp;</span>
      </div>
    </div>
  </section>

  <script type="text/javascript">
    function onSubmit(response) {
      document.getElementById("subscription_form").submit();
      document.getElementById("follow_up_subscription_form").submit();
      if (response.length == 0) {
        alert("reCaptcha verification failed");
      }
    }
  </script>
</footer>
 <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var className =
        ".show-anchor-links h1, .show-anchor-links h2, .show-anchor-links h3, " +
        ".show-anchor-links h4, .show-anchor-links h5, .show-anchor-links h6";
      var headers = document.querySelectorAll(className);

      for (var i = 0; i < headers.length; i++) {
        var header = headers[i];
        if (typeof header.id !== "undefined" && header.id !== "") {
          header.prepend(anchorForId(header.id));
        }
      }
    }
  };
</script>


    <script src="/assets/app.js?v=1635454550"></script>

    <div id="fb-root"></div>
    <script
      id="github-bjs"
      src="https://buttons.github.io/buttons.js"
      async
      defer
    ></script>
    <script
      id="twitter-wjs"
      type="text/javascript"
      src="https://platform.twitter.com/widgets.js"
      async
      defer
    ></script>
    <script
      id="facebook-jssdk"
      type="text/javascript"
      src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=842731852424506"
      async
      defer
    ></script>

    <script type="text/javascript">
      piAId = '393112';
      piCId = '48375';

      (function() {
        function async_load() {
          var s = document.createElement('script');
          s.type = 'text/javascript';
          s.src =
            ('https:' == document.location.protocol
              ? 'https://pi'
              : 'http://cdn') + '.pardot.com/pd.js';
          var c = document.getElementsByTagName('script')[0];
          c.parentNode.insertBefore(s, c);
        }
        if (window.attachEvent) {
          window.attachEvent('onload', async_load);
        } else {
          window.addEventListener('load', async_load, false);
        }
      })();
    </script>

    <script type="text/javascript">
      var _vwo_code = (function() {
        var account_id = 125292,
          settings_tolerance = 2000,
          library_tolerance = 2500,
          use_existing_jquery = true,
          // DO NOT EDIT BELOW THIS LINE
          f = false,
          d = document;
        return {
          use_existing_jquery: function() {
            return use_existing_jquery;
          },
          library_tolerance: function() {
            return library_tolerance;
          },
          finish: function() {
            if (!f) {
              f = true;
              var a = d.getElementById('_vis_opt_path_hides');
              if (a) a.parentNode.removeChild(a);
            }
          },
          finished: function() {
            return f;
          },
          load: function(a) {
            var b = d.createElement('script');
            b.src = a;
            b.type = 'text/javascript';
            b.innerText;
            b.onerror = function() {
              _vwo_code.finish();
            };
            d.getElementsByTagName('head')[0].appendChild(b);
          },
          init: function() {
            settings_timer = setTimeout(
              '_vwo_code.finish()',
              settings_tolerance
            );
            this.load(
              '//dev.visualwebsiteoptimizer.com/j.php?a=' +
                account_id +
                '&u=' +
                encodeURIComponent(d.URL) +
                '&r=' +
                Math.random()
            );
            var a = d.createElement('style'),
              b = '',
              h = d.getElementsByTagName('head')[0];
            a.setAttribute('id', '_vis_opt_path_hides');
            a.setAttribute('type', 'text/css');
            if (a.styleSheet) a.styleSheet.cssText = b;
            else a.appendChild(d.createTextNode(b));
            h.appendChild(a);
            return settings_timer;
          }
        };
      })();
      _vwo_settings_timer = _vwo_code.init();
    </script>

    <script type="text/javascript">
      !(function() {
        var analytics = (window.analytics = window.analytics || []);
        if (!analytics.initialize)
          if (analytics.invoked)
            window.console &&
              console.error &&
              console.error('Segment snippet included twice.');
          else {
            analytics.invoked = !0;
            analytics.methods = [
              'trackSubmit',
              'trackClick',
              'trackLink',
              'trackForm',
              'pageview',
              'identify',
              'group',
              'track',
              'ready',
              'alias',
              'page',
              'once',
              'off',
              'on'
            ];
            analytics.factory = function(t) {
              return function() {
                var e = Array.prototype.slice.call(arguments);
                e.unshift(t);
                analytics.push(e);
                return analytics;
              };
            };
            for (var t = 0; t < analytics.methods.length; t++) {
              var e = analytics.methods[t];
              analytics[e] = analytics.factory(e);
            }
            analytics.load = function(t) {
              var e = document.createElement('script');
              e.type = 'text/javascript';
              e.async = !0;
              e.src =
                ('https:' === document.location.protocol
                  ? 'https://'
                  : 'http://') +
                'cdn.segment.com/analytics.js/v1/' +
                t +
                '/analytics.min.js';
              var n = document.getElementsByTagName('script')[0];
              n.parentNode.insertBefore(e, n);
            };
            analytics.SNIPPET_VERSION = '3.0.1';
            analytics.load('WDj0nSS7hpyxwL3evgbOzK755s0NUye6');
            analytics.page();
          }
      })();
    </script>

    <script>
      // Collapse Toggler
      $('button[data-toggle="kong-expand"]').on('click', function(e) {
        e.stopPropagation();
        var $this = $(this);
        $('#oss_subnav.expand').toggleClass('slideup');
        $($this.data('target')).toggleClass('kong-navbar-collapse--expand');
        $('nav.navbar.full-width').toggleClass('kong-navbar-collapse--expand');
        $this.toggleClass('active').attr('aria-expanded', true);
        $('.kong-navbar-collapse_section').removeClass('shift');
        $('.subnav, .trigger, .remove').removeClass('active');
        setTimeout(function() {
          $('#menu-primary-nav li').removeClass('active');
          $('.active-tab').removeClass('active-tab');
        }, 100);
      });

      var $window = $(window);

      function checkWidth() {
        var windowsize = $window.width();
        if (windowsize > 1080) {
          $('.navbar').removeClass('mobile-triggers');
          $('#menu-primary-nav li').removeClass('active');
          $('.active-tab').removeClass('active-tab');
        } else {
          $('.navbar').addClass('mobile-triggers');
        }
      }
      // Execute on load
      checkWidth();
      // Bind event listener
      $(window).on("resize", checkWidth)

      $('#menu-primary-nav .nav1 > a').on("click", function() {
        if ($('nav.navbar').hasClass('mobile-triggers')) {
          event.preventDefault();
          $('.nav3').removeClass('active');
          var position = $(this)
            .parent()
            .position();
          $(this)
            .parent()
            .toggleClass('active');
          $('body')
            .get(0)
            .style.setProperty(
              '--navPosition',
              (position.top - 75) * -1 + 'px'
            );
          $(this)
            .parent()
            .parent()
            .toggleClass('active-tab');
        }
      });

      $('#menu-primary-nav .nav3 > a').on("click", function() {
        if ($('nav.navbar').hasClass('mobile-triggers')) {
          event.preventDefault();
          $(this)
            .parent()
            .toggleClass('active');
        }
      });
    </script>
  </body>

  
</html>
