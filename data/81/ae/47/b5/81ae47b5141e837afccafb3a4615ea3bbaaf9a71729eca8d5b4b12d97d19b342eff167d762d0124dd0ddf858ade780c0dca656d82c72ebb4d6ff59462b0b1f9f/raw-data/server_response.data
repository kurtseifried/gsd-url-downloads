<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#864291 - samba: CVE-2017-9461: infinite loop on bad-symlink resolution - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=864291&quot;&gt;864291&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:864291@bugs.debian.org">#864291</a><br>
samba: CVE-2017-9461: infinite loop on bad-symlink resolution</h1>
<div class="versiongraph"><a href="version.cgi?absolute=0;fixed=samba%2F2%3A4.5.6%2Bdfsg-1;collapse=1;info=1;package=samba;found=samba%2F2%3A4.2.14%2Bdfsg-0%2Bdeb8u6;found=samba%2F2%3A4.2.1%2Bdfsg-1"><img alt="version graph" src="version.cgi?found=samba%2F2%3A4.2.14%2Bdfsg-0%2Bdeb8u6;found=samba%2F2%3A4.2.1%2Bdfsg-1;package=samba;fixed=samba%2F2%3A4.5.6%2Bdfsg-1;collapse=1;width=2;height=2;absolute=0"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=samba">samba</a>;
Maintainer for <a href="pkgreport.cgi?package=samba">samba</a> is <a href="pkgreport.cgi?maint=pkg-samba-maint%40lists.alioth.debian.org">Debian Samba Maintainers &lt;pkg-samba-maint@lists.alioth.debian.org&gt;</a>; Source for <a href="pkgreport.cgi?package=samba">samba</a> is <a href="pkgreport.cgi?src=samba">src:samba</a> (<a href="https://tracker.debian.org/pkg/samba">PTS</a>, <a href="https://buildd.debian.org/samba">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=samba">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=auj%40aber.ac.uk">Alun Jones &lt;auj@aber.ac.uk&gt;</a></p>
  <p>Date: Tue,  6 Jun 2017 13:51:01 UTC</p>

<p>Severity: important</p>
<p>Tags: confirmed, fixed-upstream, security, upstream</p>

<p>Found in versions samba/2:4.2.14+dfsg-0+deb8u6, samba/2:4.2.1+dfsg-1</p>
<p>Fixed in version samba/2:4.5.6+dfsg-1</p>



<p>Forwarded to <a href="https://bugzilla.samba.org/show_bug.cgi?id=12572">https://bugzilla.samba.org/show_bug.cgi?id=12572</a></p>
</div>

<p><a href="mailto:864291@bugs.debian.org">Reply</a> or <a href="mailto:864291-subscribe@bugs.debian.org">subscribe</a> to this bug.</p>
<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=864291;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Samba Maintainers &lt;pkg-samba-maint@lists.alioth.debian.org&gt; -->
<!-- time:1496757064 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Samba Maintainers &lt;pkg-samba-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#864291</code>; Package <code>samba</code>.
 (Tue, 06 Jun 2017 13:51:04 GMT) (<a href="bugreport.cgi?bug=864291;msg=2">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: Alun Jones &lt;auj@aber.ac.uk&gt; -->
<!-- time:1496757064 -->
<strong>Acknowledgement sent</strong>
to <code>Alun Jones &lt;auj@aber.ac.uk&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>Debian Samba Maintainers &lt;pkg-samba-maint@lists.alioth.debian.org&gt;</code>.
 (Tue, 06 Jun 2017 13:51:04 GMT) (<a href="bugreport.cgi?bug=864291;msg=4">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=864291;msg=5">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=5">mbox</a>, <a href="mailto:864291@bugs.debian.org?subject=Re%3A%20samba%3A%20Trivial%20DOS%20against%20servers%20running%204.2.14%2Bdfsg-0%2Bdeb8u5%20with%20Unix%0A%20Extensions%20enabled&amp;References=%3C20170606133152.36609.98516.reportbug%40possum.imaps%3E&amp;body=On%20Tue%2C%2006%20Jun%202017%2014%3A31%3A52%20%2B0100%20Alun%20Jones%20%3Cauj%40aber.ac.uk%3E%20wrote%3A%0A%3E%20Package%3A%20samba%0A%3E%20Version%3A%202%3A4.2.14%2Bdfsg-0%2Bdeb8u6%0A%3E%20Severity%3A%20important%0A%3E%20Tags%3A%20upstream%0A%3E%20%0A%3E%20Dear%20Maintainer%2C%0A%3E%20%0A%3E%20On%20the%20current%20stable%20version%20of%20Samba%2C%20it%20is%20trivially%20easy%20to%20cause%20instances%0A%3E%20of%20the%20Samba%20daemon%2C%20smbd%2C%20to%20eat%20CPU%20and%20leak%20memory.%20By%20launching%0A%3E%20multiple%20connections%2C%20this%20can%20be%20used%20to%20cause%20a%20DOS%20of%20the%20machine%20running%0A%3E%20the%20Samba%20service.%0A%3E%20%0A%3E%20The%20fault%20relates%20to%20the%20handling%20of%20dangling%20symbolic%20links%20and%20can%0A%3E%20be%20triggered%20as%20follows%3A%0A%3E%20%0A%3E%201.%20Create%20a%20broken%20symbolic%20link%20with%20Unix%20extensions%20enabled%3A%0A%3E%20%0A%3E%20%20%20%20%20%20%20smbclient%20%2F%2Fserver%2Fshare%20-c%20%22posix%3B%20symlink%20nothing%20broken%22%0A%3E%20%0A%3E%202.%20Try%20to%20write%20to%20the%20broken%20symbolic%20link%20with%20Unix%20extensions%20disabled%3A%0A%3E%20%0A%3E%20%20%20%20%20%20%20smbclient%20%2F%2Fserver%2Fshare%20-c%20%22put%20%2Fetc%2Fissue%20broken%22%0A%3E%20%0A%3E%20Step%202%20results%20in%20an%20instance%20of%20smbd%20running%20a%20busy%20loop%20and%20leaking%20%0A%3E%20memory%20%2Aeven%20after%20the%20client%20has%20disconnected%2A.%20By%20running%20step%202%20%0A%3E%20multiple%20times%2C%20CPU%20and%20memory%20resources%20on%20the%20machine%20can%20be%20exhausted.%0A%3E%20%0A%3E%20The%20issue%20was%20fixed%20in%20the%20upstream%20version%20of%20Samba%20in%20February%20this%20year%0A%3E%20%28the%20fix%20is%20in%204.5.6%29%3A%0A%3E%20%0A%3E%20https%3A%2F%2Fgithub.com%2Fsamba-team%2Fsamba%2Fcommit%2F10c3e3923022485c720f322ca4f0aca5d7501310%0A%3E%20%0A%3E%20Given%20the%20severity%20of%20the%20issue%20and%20the%20trivial%20ease%20with%20which%20it%20can%20be%0A%3E%20triggered%2C%20is%20there%20any%20chance%20of%20this%20fix%20being%20backported%20to%20the%20version%20of%0A%3E%20Samba%20currently%20supported%20by%20Jessie%3F%0A%3E%20%0A%3E%20Thanks%2C%0A%3E%20Alun.%0A%3E%20%0A%3E%20--%20System%20Information%3A%0A%3E%20Debian%20Release%3A%208.8%0A%3E%20%20%20APT%20prefers%20stable-updates%0A%3E%20%20%20APT%20policy%3A%20%28500%2C%20%27stable-updates%27%29%2C%20%28500%2C%20%27stable%27%29%0A%3E%20Architecture%3A%20amd64%20%28x86_64%29%0A%3E%20%0A%3E%20Kernel%3A%20Linux%203.16.0-4-amd64%20%28SMP%20w%2F24%20CPU%20cores%29%0A%3E%20Locale%3A%20LANG%3Den_GB.UTF-8%2C%20LC_CTYPE%3Den_GB.UTF-8%20%28charmap%3DUTF-8%29%0A%3E%20Shell%3A%20%2Fbin%2Fsh%20linked%20to%20%2Fbin%2Fdash%0A%3E%20Init%3A%20systemd%20%28via%20%2Frun%2Fsystemd%2Fsystem%29%0A%3E%20%0A%3E%20Versions%20of%20packages%20samba%20depends%20on%3A%0A%3E%20ii%20%20adduser%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%203.113%2Bnmu3%0A%3E%20ii%20%20dpkg%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201.17.27%0A%3E%20ii%20%20libbsd0%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200.7.0-2%0A%3E%20ii%20%20libc6%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202.19-18%2Bdeb8u9%0A%3E%20ii%20%20libhdb9-heimdal%20%5Bheimdal-hdb-api-8%5D%20%201.6~rc2%2Bdfsg-9%0A%3E%20ii%20%20libldb1%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202%3A1.1.20-0%2Bdeb8u1%0A%3E%20ii%20%20libpam-modules%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201.1.8-3.1%2Bdeb8u2%0A%3E%20ii%20%20libpam-runtime%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201.1.8-3.1%2Bdeb8u2%0A%3E%20ii%20%20libpopt0%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201.16-10%0A&amp;In-Reply-To=%3C20170606133152.36609.98516.reportbug%40possum.imaps%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=auj%40aber.ac.uk" alt="">
<div class="header"><span class="headerfield">From:</span> Alun Jones &lt;auj@aber.ac.uk&gt;</div>
<div class="header"><span class="headerfield">To:</span> Debian Bug Tracking System &lt;submit@bugs.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> samba: Trivial DOS against servers running 4.2.14+dfsg-0+deb8u5 with Unix
 Extensions enabled</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 06 Jun 2017 14:31:52 +0100</div>
</div>
<pre class="message">Package: samba
Version: 2:4.2.14+dfsg-0+deb8u6
Severity: important
Tags: upstream

Dear Maintainer,

On the current stable version of Samba, it is trivially easy to cause instances
of the Samba daemon, smbd, to eat CPU and leak memory. By launching
multiple connections, this can be used to cause a DOS of the machine running
the Samba service.

The fault relates to the handling of dangling symbolic links and can
be triggered as follows:

1. Create a broken symbolic link with Unix extensions enabled:

      smbclient //server/share -c &quot;posix; symlink nothing broken&quot;

2. Try to write to the broken symbolic link with Unix extensions disabled:

      smbclient //server/share -c &quot;put /etc/issue broken&quot;

Step 2 results in an instance of smbd running a busy loop and leaking 
memory *even after the client has disconnected*. By running step 2 
multiple times, CPU and memory resources on the machine can be exhausted.

The issue was fixed in the upstream version of Samba in February this year
(the fix is in 4.5.6):

<a href="https://github.com/samba-team/samba/commit/10c3e3923022485c720f322ca4f0aca5d7501310">https://github.com/samba-team/samba/commit/10c3e3923022485c720f322ca4f0aca5d7501310</a>

Given the severity of the issue and the trivial ease with which it can be
triggered, is there any chance of this fix being backported to the version of
Samba currently supported by Jessie?

Thanks,
Alun.

-- System Information:
Debian Release: 8.8
  APT prefers stable-updates
  APT policy: (500, &#39;stable-updates&#39;), (500, &#39;stable&#39;)
Architecture: amd64 (x86_64)

Kernel: Linux 3.16.0-4-amd64 (SMP w/24 CPU cores)
Locale: LANG=en_GB.UTF-8, LC_CTYPE=en_GB.UTF-8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/dash
Init: systemd (via /run/systemd/system)

Versions of packages samba depends on:
ii  adduser                              3.113+nmu3
ii  dpkg                                 1.17.27
ii  libbsd0                              0.7.0-2
ii  libc6                                2.19-18+deb8u9
ii  libhdb9-heimdal [heimdal-hdb-api-8]  1.6~rc2+dfsg-9
ii  libldb1                              2:1.1.20-0+deb8u1
ii  libpam-modules                       1.1.8-3.1+deb8u2
ii  libpam-runtime                       1.1.8-3.1+deb8u2
ii  libpopt0                             1.16-10
ii  libpython2.7                         2.7.9-2+deb8u1
ii  libtalloc2                           2.1.2-0+deb8u1
ii  libtdb1                              1.3.6-0+deb8u1
ii  libtevent0                           0.9.28-0+deb8u1
ii  lsb-base                             4.1+Debian13+nmu1
ii  multiarch-support                    2.19-18+deb8u9
ii  procps                               2:3.3.9-9
ii  python                               2.7.9-1
ii  python-dnspython                     1.12.0-1
ii  python-ntdb                          1.0-5
ii  python-samba                         2:4.2.14+dfsg-0+deb8u6
pn  python2.7:any                        &lt;none&gt;
ii  samba-common                         2:4.2.14+dfsg-0+deb8u6
ii  samba-common-bin                     2:4.2.14+dfsg-0+deb8u6
ii  samba-dsdb-modules                   2:4.2.14+dfsg-0+deb8u6
ii  samba-libs                           2:4.2.14+dfsg-0+deb8u6
ii  tdb-tools                            1.3.6-0+deb8u1
ii  update-inetd                         4.43

Versions of packages samba recommends:
ii  attr               1:2.4.47-2
ii  logrotate          3.8.7-1+b1
ii  samba-vfs-modules  2:4.2.14+dfsg-0+deb8u6

Versions of packages samba suggests:
pn  bind9          &lt;none&gt;
pn  bind9utils     &lt;none&gt;
pn  ctdb           &lt;none&gt;
pn  ldb-tools      &lt;none&gt;
ii  ntp            1:4.2.6.p5+dfsg-7+deb8u2
pn  smbldap-tools  &lt;none&gt;
pn  winbind        &lt;none&gt;

-- debconf information:
  samba/run_mode: daemons
  samba-common/title:


</pre>

<div class="msgreceived"><hr><p>
<a name="6"></a>
<!-- command:tag -->
<!-- requester: Paul Wise &lt;pabs@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496757423 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;upstream security&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;upstream&#39;
            };
-->
<strong>Added tag(s) security.</strong>
Request was from <code>Paul Wise &lt;pabs@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 06 Jun 2017 13:57:03 GMT) (<a href="bugreport.cgi?bug=864291;msg=7">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="8"></a>
<!-- command:tag -->
<!-- requester: Jelmer Vernooij &lt;jelmer@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496761383 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;upstream confirmed security&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;upstream security&#39;
            };
-->
<strong>Added tag(s) confirmed.</strong>
Request was from <code>Jelmer Vernooij &lt;jelmer@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 06 Jun 2017 15:03:03 GMT) (<a href="bugreport.cgi?bug=864291;msg=9">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="10"></a>
<!-- command:fixed -->
<!-- requester: Jelmer Vernooij &lt;jelmer@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496761385 -->
<!-- new_data:
$new_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;2:4.5.6-1&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;fixed_versions&#39; =&gt; []
            };
-->
<strong>Marked as fixed in versions 2:4.5.6-1.</strong>
Request was from <code>Jelmer Vernooij &lt;jelmer@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 06 Jun 2017 15:03:05 GMT) (<a href="bugreport.cgi?bug=864291;msg=11">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=11">mbox</a>, <a href="#10">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="12"></a>
<!-- command:forwarded -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496770023 -->
<!-- new_data:
$new_data = {
              &#39;forwarded&#39; =&gt; &#39;<a href="https://bugzilla.samba.org/show_bug.cgi?id=12572">https://bugzilla.samba.org/show_bug.cgi?id=12572</a>&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;forwarded&#39; =&gt; &#39;&#39;
            };
-->
<strong>Set Bug forwarded-to-address to &#39;<a href="https://bugzilla.samba.org/show_bug.cgi?id=12572">https://bugzilla.samba.org/show_bug.cgi?id=12572</a>&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 06 Jun 2017 17:27:03 GMT) (<a href="bugreport.cgi?bug=864291;msg=13">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=13">mbox</a>, <a href="#12">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="14"></a>
<!-- command:tag -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496770025 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;security confirmed upstream fixed-upstream&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;upstream confirmed security&#39;
            };
-->
<strong>Added tag(s) fixed-upstream.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 06 Jun 2017 17:27:05 GMT) (<a href="bugreport.cgi?bug=864291;msg=15">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=15">mbox</a>, <a href="#14">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="16"></a>
<!-- command:fixed -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496770742 -->
<!-- new_data:
$new_data = {
              &#39;fixed_versions&#39; =&gt; []
            };
-->
<!-- old_data:
$old_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;2:4.5.6-1&#39;
                                  ]
            };
-->
<strong>No longer marked as fixed in versions 2:4.5.6-1.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 06 Jun 2017 17:39:02 GMT) (<a href="bugreport.cgi?bug=864291;msg=17">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=17">mbox</a>, <a href="#16">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="18"></a>
<!-- command:fixed -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496770743 -->
<!-- new_data:
$new_data = {
              &#39;fixed_versions&#39; =&gt; [
                                    &#39;samba/2:4.5.6+dfsg-1&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;fixed_versions&#39; =&gt; []
            };
-->
<strong>Marked as fixed in versions samba/2:4.5.6+dfsg-1.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 06 Jun 2017 17:39:03 GMT) (<a href="bugreport.cgi?bug=864291;msg=19">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=19">mbox</a>, <a href="#18">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="20"></a>
<!-- command:found -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496770744 -->
<!-- new_data:
$new_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;samba/2:4.2.14+dfsg-0+deb8u6&#39;,
                                    &#39;samba/2:4.2.1+dfsg-1&#39;
                                  ]
            };
-->
<!-- old_data:
$old_data = {
              &#39;found_versions&#39; =&gt; [
                                    &#39;samba/2:4.2.14+dfsg-0+deb8u6&#39;
                                  ]
            };
-->
<strong>Marked as found in versions samba/2:4.2.1+dfsg-1.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 06 Jun 2017 17:39:04 GMT) (<a href="bugreport.cgi?bug=864291;msg=21">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=21">mbox</a>, <a href="#20">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="22"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496774344 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;samba: DOS with Unix Extensions enabled: fd_open_atomic() can loop indefinitely when trying to open an invalid symlink with O_CREAT&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;samba: Trivial DOS against servers running 4.2.14+dfsg-0+deb8u5 with Unix Extensions enabled&#39;
            };
-->
<strong>Changed Bug title to &#39;samba: DOS with Unix Extensions enabled: fd_open_atomic() can loop indefinitely when trying to open an invalid symlink with O_CREAT&#39; from &#39;samba: Trivial DOS against servers running 4.2.14+dfsg-0+deb8u5 with Unix Extensions enabled&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Tue, 06 Jun 2017 18:39:04 GMT) (<a href="bugreport.cgi?bug=864291;msg=23">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=23">mbox</a>, <a href="#22">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="24"></a>
<!-- command:title -->
<!-- requester: Salvatore Bonaccorso &lt;carnil@debian.org&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1496809262 -->
<!-- new_data:
$new_data = {
              &#39;subject&#39; =&gt; &#39;samba: CVE-2017-9461: infinite loop on bad-symlink resolution&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;subject&#39; =&gt; &#39;samba: DOS with Unix Extensions enabled: fd_open_atomic() can loop indefinitely when trying to open an invalid symlink with O_CREAT&#39;
            };
-->
<strong>Changed Bug title to &#39;samba: CVE-2017-9461: infinite loop on bad-symlink resolution&#39; from &#39;samba: DOS with Unix Extensions enabled: fd_open_atomic() can loop indefinitely when trying to open an invalid symlink with O_CREAT&#39;.</strong>
Request was from <code>Salvatore Bonaccorso &lt;carnil@debian.org&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Wed, 07 Jun 2017 04:21:02 GMT) (<a href="bugreport.cgi?bug=864291;msg=25">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=25">mbox</a>, <a href="#24">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="26"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Debian Samba Maintainers &lt;pkg-samba-maint@lists.alioth.debian.org&gt; -->
<!-- time:1498660205 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Debian Samba Maintainers &lt;pkg-samba-maint@lists.alioth.debian.org&gt;</code>:<br>
<code>Bug#864291</code>; Package <code>samba</code>.
 (Wed, 28 Jun 2017 14:30:05 GMT) (<a href="bugreport.cgi?bug=864291;msg=27">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=27">mbox</a>, <a href="#26">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="28"></a>
<!-- request_addr: Hugo Lefeuvre &lt;hle@debian.org&gt; -->
<!-- time:1498660205 -->
<strong>Acknowledgement sent</strong>
to <code>Hugo Lefeuvre &lt;hle@debian.org&gt;</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Debian Samba Maintainers &lt;pkg-samba-maint@lists.alioth.debian.org&gt;</code>.
 (Wed, 28 Jun 2017 14:30:05 GMT) (<a href="bugreport.cgi?bug=864291;msg=29">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=29">mbox</a>, <a href="#28">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="30"></a><a name="msg30"></a><a href="#30">Message #30</a> received at 864291@bugs.debian.org (<a href="bugreport.cgi?bug=864291;msg=30">full text</a>, <a href="bugreport.cgi?bug=864291;mbox=yes;msg=30">mbox</a>, <a href="mailto:864291@bugs.debian.org?body=On%20Wed%2C%2028%20Jun%202017%2016%3A28%3A20%20%2B0200%20Hugo%20Lefeuvre%20%3Chle%40debian.org%3E%20wrote%3A%0A%3E%20Hi%2C%0A%3E%20%0A%3E%20I%20couldn%27t%20reproduce%20this%20bug%20in%20the%20wheezy%20version%20and%20I%20think%20it%0A%3E%20isn%27t%20affected.%0A%3E%20%0A%3E%20I%20get%20the%20following%20error%20message%3A%0A%3E%20%0A%3E%20%20%20%20%20%24%20smbclient%20%2F%2Fserver%2Fshare%20-c%20%22posix%3B%20symlink%20nothing%20broken%22%0A%3E%20%20%20%20%20%28...%29%0A%3E%20%20%20%20%20%24%20smbclient%20%2F%2Flocalhost%2Fshareddir%20-c%20%22put%20%2Fetc%2Fissue%20broken%22%0A%3E%20%20%20%20%20Domain%3D%5BWORKGROUP%5D%20OS%3D%5BUnix%5D%20Server%3D%5BSamba%203.6.6%5D%0A%3E%20%20%20%20%20NT_STATUS_OBJECT_NAME_NOT_FOUND%20opening%20remote%20file%20%5Cbroken%0A%3E%20%0A%3E%20In%20the%20wheezy%20version%2C%20the%20fd_open_atomic%20function%20doesn%27t%20exist%20and%0A%3E%20the%20existing%20fd_open%20function%20doesn%27t%20use%20loops.%0A%3E%20%0A%3E%20Regards%2C%0A%3E%20%20Hugo%0A%3E%20%0A%3E%20--%20%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20Hugo%20Lefeuvre%20%28hle%29%20%20%20%20%7C%20%20%20%20www.owl.eu.com%0A%3E%204096%2F%20ACB7%20B67F%20197F%209B32%201533%20431C%20AC90%20AC3E%20C524%20065E%0A&amp;In-Reply-To=%3C20170628142820.vnz22gi3f2nlduom%40hle-laptop.local%3E&amp;subject=Re%3A%20samba%3A%20CVE-2017-9461%3A%20infinite%20loop%20on%20bad-symlink%20resolution&amp;References=%3C20170628142820.vnz22gi3f2nlduom%40hle-laptop.local%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=hle%40debian.org" alt="">
<div class="header"><span class="headerfield">From:</span> Hugo Lefeuvre &lt;hle@debian.org&gt;</div>
<div class="header"><span class="headerfield">To:</span> 864291@bugs.debian.org</div>
<div class="header"><span class="headerfield">Cc:</span> debian-lts@lists.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: samba: CVE-2017-9461: infinite loop on bad-symlink resolution</div>
<div class="header"><span class="headerfield">Date:</span> Wed, 28 Jun 2017 16:28:20 +0200</div>
</div>
<pre class="mime">[<a href="bugreport.cgi?att=0;bug=864291;msg=30">Message part 1</a> (text/plain, inline)]</pre>
<pre class="message">Hi,

I couldn&#39;t reproduce this bug in the wheezy version and I think it
isn&#39;t affected.

I get the following error message:

    $ smbclient //server/share -c &quot;posix; symlink nothing broken&quot;
    (...)
    $ smbclient //localhost/shareddir -c &quot;put /etc/issue broken&quot;
    Domain=[WORKGROUP] OS=[Unix] Server=[Samba 3.6.6]
    NT_STATUS_OBJECT_NAME_NOT_FOUND opening remote file \broken

In the wheezy version, the fd_open_atomic function doesn&#39;t exist and
the existing fd_open function doesn&#39;t use loops.

Regards,
 Hugo

-- 
             Hugo Lefeuvre (hle)    |    www.owl.eu.com
4096/ ACB7 B67F 197F 9B32 1533 431C AC90 AC3E C524 065E
</pre>
<pre class="mime">[<a href="bugreport.cgi?att=1;bug=864291;filename=signature.asc;msg=30">signature.asc</a> (application/pgp-signature, inline)]</pre>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=864291">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:15:17 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->bembo<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright Â© 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
