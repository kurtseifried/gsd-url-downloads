<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Roundup is a python-based, MIT licensed issue-tracking system with command-line, web and e-mail interfaces">
    <meta name="viewport" content="width=device-width">
    <title>
  
    Issue 4155: CVE-2014-6633: safe_eval is, in fact, not safe - Tryton issue tracker
  
</title>
    <link rel="stylesheet" type="text/css" href="@@file/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="@@file/style.css">
  

  </head>
  <body>
    
      <div class="navbar sticky-top navbar-light bg-light">
  <a href="https://bugs.tryton.org/" class='navbar-brand'>
    <i class='icon-home'></i> Tryton issue tracker
  </a>
  <button class="navbar-toggler collapsed d-md-none" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
  </button>
  <form name="searchform" method="get" action="issue" class='form-inline my-2 my-lg-0 navbar-search'>
    <input type="hidden" name="@columns" value="id,activity,title,component,nosy,status"/>
    <input type="hidden" name="@sort" value="-activity">
    <input type="hidden" name="@group" value="priority">
    <input type="hidden" name="@filter" value="status">
    <input class="form-control form-control-sm mr-sm-2 search-query" id="search-text" type="search" name="@search_text">
    <input class="btn btn-sm btn-outline-success mr-2 my-2 my-sm-0" type="submit" value="Search" name="submit">
    <div class="form-check mr-2 w-auto">
        <input class="form-check-input" type="radio" name="status" id="status_notresolved" value="-1,1,2,3,4,5,6,7" checked/>
        <label class="form-check-label" for="status_notresolved">Open</label>
    </div>
    <div class="form-check w-auto">
        <input class="form-check-input" type="radio" name="status" id="status_all" value=""/>
        <label class="form-check-label" for="status_all">All</label>
    </div>
  </form>
</div>
    

    
      <div class='container-fluid'>
        <div class='row'>
          <div class='col-md-3 col-lg-2 d-md-block navigation collapse' id="navigation">
            <div class="navigation-sticky">
            
              


  <ul class='nav flex-column'>
    <li class='nav-header'>
      <i class='icon-fire'></i>Issues
    </li>
    

    <li class="nav-item">
      <a href="issue?@sort=-activity&amp;@group=priority&amp;@filter=status%2Cassignedto&amp;@columns=id%2Cactivity%2Ctitle%2Ccomponent%2Cnosy%2Cstatus&amp;@search_text=&amp;status=-1%2C1%2C2%2C3%2C4%2C5%2C6%2C7&amp;assignedto=-1&amp;@dispname=Show%20Unassigned&amp;@pagesize=50&amp;@startwith=0">Show Unassigned</a>
    </li>
    <li class="nav-item">
      <a href="https://bugs.tryton.org/?@dispname=Show%20All">Show All</a>
    </li>
    <li>
      <a href="issue?@template=search">Search</a>
    </li>
    <li>
      <form method="POST" class='form-inline' action="https://bugs.tryton.org/">
        <div class="form-group">
          <input type="hidden" name="@type" value="issue">
          <input type="hidden" name="@action" value="show">
          <input class="form-control form-control-sm d-inline-block w-25" type="text" name="@number">
          <input class="btn btn-sm btn-outline-secondary" type="submit" value="Show issue">
        </div>
      </form>
    </li>
    <li class="nav-item">
        <a href="@@file/graph/issue.html">Statistics</a>
    </li>
    </li>
  </ul>
  <hr>


<ul class='nav flex-column'>
  
  
  
</ul>





  <form method="POST" action='https://bugs.tryton.org/'>
    <ul class='nav flex-column'>
      <li class='nav-header'>
        <i class='icon-user'></i>Login
      </li>
      <li class="nav-item">
        <input class="form-control form-control-sm" type='text' name="__login_name" placeholder='username'>
      </li>
      <li class="nav-item">
        <input class="form-control form-control-sm" type="password" name="__login_password" placeholder='password'>
      </li>
      <li class="nav-item">
        <label class="form-control form-control-sm" class='checkbox'>
          <input type="checkbox" name="remember"> Remember me?
        </label>
      </li>
      <li class="nav-item">
        <input class="btn btn-sm btn-secondary" type="submit" value="Login">
      </li>
      <li class='vspace-one'>
        
          <a href="user?@template=register">Register</a>
        
      </li>
      <li class="nav-item">
        <a href="user?@template=forgotten">Lost&nbsp;your&nbsp;login?</a>
      </li>
    </ul>
    <input type="hidden" name="@action" value="Login">
    <input type="hidden" name="__came_from" value="https://bugs.tryton.org/issue4155">
  </form>
  <hr>


<ul class='nav flex-column'>
  <li class='nav-header'>
    <i class='icon-bookmark'></i>Help
  </li>
  <li>
    <a href="http://www.roundup-tracker.org">Roundup docs</a>
  </li>
</ul>
            
            </div>
          </div>

          <div class='col-md-9 col-lg-10 ml-sm-auto'>
            <div class='pb-2 mb-2 border-bottom'>
              <h3>
  
    Issue 4155
  
</h3>
              
              
            </div>

            
  

  
    
      <dl class="row row-cols-1 row-cols-lg-2 no-gutters">
  
  <div class="col col-lg-12 row">
    <dt class="col col-4 col-md-3 col-lg-2">Title</dt>
    <dd class="col col-8 col-md-9 col-lg-10">CVE-2014-6633: safe_eval is, in fact, not safe</dd>
  </div>

  
  <div class="col row mr-1">
    <dt class="col col-4 col-md-3 col-lg-4">Priority</dt>
    <dd class="col col-8 col-md-9 col-lg-8">bug</dd>
  </div>

  
  <div class="col row mr-1">
    <dt class="col col-4 col-md-3 col-lg-4">Status</dt>
    <dd class="col col-8 col-md-9 col-lg-8">resolved</dd>
  </div>

  
  
  
  <div class="col col-lg-12 row">
    <dt class="col col-4 col-md-3 col-lg-2">Nosy list</dt>
    <dd class="col col-8 col-md-9 col-lg-10">ajacoutot, bch, ced, daniel, duesenfranz, nicoe, sharkcz, yangoon</dd>
  </div>

  
  
  <div class="col row mr-1">
    <dt class="col col-4 col-md-3 col-lg-4">Assigned to</dt>
    <dd class="col col-8 col-md-9 col-lg-8">ced</dd>
  </div>

  
  <div class="col col-lg-12 row">
    <dt class="col col-4 col-md-3 col-lg-2">Keywords</dt>
    <dd class="col col-8 col-md-9 col-lg-10">review</dd>
  </div>

</dl>
    
  

  
    <p>
      Created on <b>2014-09-06.14:53:37</b>
      by <b>duesenfranz</b>,
      last changed <b>86 months ago</b>
      by <b>ced</b>.
    </p>
  

  
    <h4>Files</h4>
<table class='table table-striped table-condensed table-responsive-md'>
  <thead>
    <tr>
      <th>File name</th>
      <th>Uploaded</th>
      <th>Type</th>
      <th>Details</th>
      
    </tr>
  </thead>
  
    <tr>
      <td>
        <a class="btn btn-sm btn-outline-primary" href='file2166/disallow_underscore.patch'>disallow_underscore.patch</a>
      </td>
      <td>duesenfranz, 2014-09-07.00:39:20</td>
      <td>text/plain</td>
      <td>
        <a class="btn btn-sm btn-success" href='file2166'>
		  
		  view
		  
		</a>
      </td>
      
    </tr>
  
    <tr>
      <td>
        <a class="btn btn-sm btn-outline-primary" href='file2165/run_anythin_without_noise.py'>run_anythin_without_noise.py</a>
      </td>
      <td>duesenfranz, 2014-09-06.18:19:27</td>
      <td>text/plain</td>
      <td>
        <a class="btn btn-sm btn-success" href='file2165'>
		  
		  view
		  
		</a>
      </td>
      
    </tr>
  
    <tr>
      <td>
        <a class="btn btn-sm btn-outline-primary" href='file2164/run_anything.py'>run_anything.py</a>
      </td>
      <td>duesenfranz, 2014-09-06.18:12:21</td>
      <td>text/plain</td>
      <td>
        <a class="btn btn-sm btn-success" href='file2164'>
		  
		  view
		  
		</a>
      </td>
      
    </tr>
  
    <tr>
      <td>
        <a class="btn btn-sm btn-outline-primary" href='file2163/crash_trytond.py'>crash_trytond.py</a>
      </td>
      <td>duesenfranz, 2014-09-06.14:53:35</td>
      <td>text/plain</td>
      <td>
        <a class="btn btn-sm btn-success" href='file2163'>
		  
		  view
		  
		</a>
      </td>
      
    </tr>
  
</table>
  

  
    <h4>Messages</h4>
    
      
      <div class="anchor"  id="msg18388"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18388'>msg18388</a>
          <a href='msg18388'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-30.12:45:00
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Release with fixes: 3.2.3, 3.0.7, 2.8.11, 2.6.14, 2.4.15</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18387"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18387'>msg18387</a>
          <a href='msg18387'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-30.12:11:46
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">@matb you can ask to make CVE public.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18386"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18386'>msg18386</a>
          <a href='msg18386'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-30.12:07:53
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">New published so mark the issue as resolved and make it public.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18372"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18372'>msg18372</a>
          <a href='msg18372'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-29.18:29:38
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">The releases have been published.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18348"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18348'>msg18348</a>
          <a href='msg18348'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-25.14:50:52
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Thanks! :)</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18346"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18346'>msg18346</a>
          <a href='msg18346'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-25.13:03:39
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">So OK, I will backport both patch.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18344"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18344'>msg18344</a>
          <a href='msg18344'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-25.12:02:55
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">&gt;&gt; I think, this one is also a big step to improve the situation. What is your motivation to not apply to the series?

&gt;Because <a href="//codereview.tryton.org/5601002">review5601002</a> is enough to fix the issue.

But the way this works is broken by design: You can't be sure that this is safe, because

* Some of the builtins given to the code [0] may leak globals on some obscure "path" (some attribute of an attribute of an attribute)

* Future python version won't add some attributes to these builtins which might leak globals.

Note that adding attributes wouldn't break backwards compatibility and therefore might even happen within a minor update.

[0] <a href="https://github.com/tryton/trytond/blob/feeea16ec199441e558511cf74f9353260f8ae55/trytond/tools/misc.py#L376" rel="nofollow noopener">https://github.com/tryton/trytond/blob/feeea16ec199441e558511cf74f9353260f8ae55/trytond/tools/misc.py#L376</a></pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18330"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18330'>msg18330</a>
          <a href='msg18330'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-24.19:45:19
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Here is the <a href="//codereview.tryton.org/12571002">review12571002</a> for the news.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18311"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18311'>msg18311</a>
          <a href='msg18311'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-24.11:49:21
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">On 24 Sep 11:32, Mathias Behrle wrote:
&gt; &gt; <a href="//codereview.tryton.org/10521002">review10521002</a> will be only applied on trunk after.
&gt; 
&gt; I think, this one is also a big step to improve the situation. What is your motivation to not apply to the series?

Because <a href="//codereview.tryton.org/5601002">review5601002</a> is enough to fix the issue.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18308"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18308'>msg18308</a>
          <a href='msg18308'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-24.11:32:36
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">&gt; CÃ©dric Krier &lt;<a href="mailto:cedric.krier@b2ck.com">cedric.krier@b2ck.com</a>&gt; added the comment:
&gt; 
&gt; OK, so I propose this scheduling:
&gt; - a release of the current series + <a href="//codereview.tryton.org/5601002">review5601002</a> the 29th September.
&gt; - publish the news the 30th September.

Ok.
 
&gt; <a href="//codereview.tryton.org/10521002">review10521002</a> will be only applied on trunk after.

I think, this one is also a big step to improve the situation. What is your motivation to not apply to the series?
At least I backported both reviews for 2.2 in Debian stable and all unit tests are working and I had no issues while testing on a 2.2 installation.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18303"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18303'>msg18303</a>
          <a href='msg18303'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-24.08:53:13
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">OK, so I propose this scheduling:
- a release of the current series + <a href="//codereview.tryton.org/5601002">review5601002</a> the 29th September.
- publish the news the 30th September.

<a href="//codereview.tryton.org/10521002">review10521002</a> will be only applied on trunk after.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18276"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18276'>msg18276</a>
          <a href='msg18276'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-22.20:34:45
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">&gt; This issue could have leaked partially to the public via the Tryton
&gt; commit channel, so directly requesting the CVE at mitre.org.
&gt; 
&gt; safe_eval in trytond could be used to execute arbitrary commands,
&gt; mainly via the webdav interface. Several fixes are ready to be applied
&gt; to the supported versions and to be released in the next days.  

&gt; usage of the internal safe_eval command could be used to call __subclasses__
&gt; (double underscores). An analysis of the maintainer revealed two weak points,
&gt; where this function is used.
&gt; The first weak point was module webdav, where an authenticated user could misuse
&gt; the collection.domain. 
&gt; The second weak point was module price_list, where an internal user with
&gt; adminstration privileges could misuse the formula field of
&gt; the module.
&gt; 
&gt; There exist two approaches to fix/reduce the problem at its best:
&gt; - usage of literal_eval instead of safe_eval, where possible (i.e. webdav)
&gt; - disallowing double underscores in safe_eval
&gt; 
&gt; We think, that one CVE should be enough with respect to the central problem:
&gt; the possible misusage of safe_eval (which in your examples is 2.).  

&gt;&gt;   2. safe_eval does not properly restrict the input data, and
&gt;&gt;      therefore allows shell metacharacters such as ; or `  

&gt; Please assign a CVE  

Use CVE-2014-6633.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18195"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18195'>msg18195</a>
          <a href='msg18195'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-17.22:25:26
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">And do we get a CVE?</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18025"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18025'>msg18025</a>
          <a href='msg18025'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-11.11:06:10
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">&gt; On 10 Sep 22:06, Mathias Behrle wrote:
&gt; &gt; &gt; So for me,we can start the process of creating a security update.
&gt; &gt; 
&gt; &gt; Do you think, this is backportable for 2.2?
&gt; 
&gt; No more supported.

I know, that 2.2 is no more supported from Tryton side, but Debian supports at least stable releases for their lifetime. So I didn't ask you to do the backport, but to give a quick estimation.

&gt; &gt; &gt; Do you think it requires a CVE?
&gt; &gt; 
&gt; &gt; Information leaked already via commit channel, so at least not via Debian.
&gt; 
&gt; Nothing really useful was leaked.

For me enough to not involve Debian. They assign only CVEs to complete non-disclosed issues. As a general guideline in Tryton I would propose to get a CVE for each bug of type security, that is handled with an embargo to the public (is handled with disclosure).</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18022"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18022'>msg18022</a>
          <a href='msg18022'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-11.00:30:21
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">On 10 Sep 22:06, Mathias Behrle wrote:
&gt; &gt; So for me,we can start the process of creating a security update.
&gt; 
&gt; Do you think, this is backportable for 2.2?

No more supported.

&gt; &gt; Do you think it requires a CVE?
&gt; 
&gt; Information leaked already via commit channel, so at least not via Debian.

Nothing really useful was leaked.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18021"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18021'>msg18021</a>
          <a href='msg18021'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-10.22:06:25
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Reviews are generally looking fine for me.

&gt; So for me,we can start the process of creating a security update.

Do you think, this is backportable for 2.2?

&gt; Do you think it requires a CVE?

Information leaked already via commit channel, so at least not via Debian. But generally it is always nice to assign CVEs, so let me know, if I should try to get one via MITRE Corporation (<a href="mailto:cve-assign@mitre.org">cve-assign@mitre.org</a>).</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18017"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18017'>msg18017</a>
          <a href='msg18017'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user9">yangoon</a>)
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-10.19:19:27
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/642235664a31a3dad55da23f7b5ed50c?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Could you please grant me permission for the reviews. Thanks.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg18016"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg18016'>msg18016</a>
          <a href='msg18016'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-10.18:48:35
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Here is the <a href="//codereview.tryton.org/5601002">review5601002</a> that prevents double underscore.
I run all the test on it without issue.
So for me,we can start the process of creating a security update.
Do you think it requires a CVE?</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17962"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17962'>msg17962</a>
          <a href='msg17962'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-07.21:47:13
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">I don't know how to handle upload.py and generally your infrastructure, therefore I would appreciate you to handle this. The patch is already attached here and can be used as-is.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17961"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17961'>msg17961</a>
          <a href='msg17961'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-07.16:23:03
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Why not, could you make a private review.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17954"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17954'>msg17954</a>
          <a href='msg17954'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-07.10:41:02
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">"internals"-&gt;"built-ins"</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17953"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17953'>msg17953</a>
          <a href='msg17953'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-07.10:32:34
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Yes, you can still create strings that include double underscores.
But since you can't use __getattribute__ or __setattribute__, these strings are rather worthless. So can even access these attributes with str.format, but then you only have their string representation.

The problem for me is that we still trust every usable class (list, str, int, float, etc.) that they don't "leak" internals, but it's much more unlikely for every  of them to leak them with attributes that don't include double underscores.

So while still unsafe (because basically impossible to verify as "safe"), it would be a lot harder to exploit.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17951"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17951'>msg17951</a>
          <a href='msg17951'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-07.09:39:24
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">This doesn't fix the problem because you can still trick the test like you did with something like '_' + '_' + 'subclassess' + '_' + '_'.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17950"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17950'>msg17950</a>
          <a href='msg17950'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-07.00:39:20
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">To clarify: I just wanted to disallow eval'ing any string that contains a double underscore - as we already do with the string "__subclasses__".
Since I don't really know the use cases, I also don't know wether this could be a problem. If there are cases where this doesn't work, maybe we could introduce a new optional argument "allow_double_underscores=True" that gets set to False in most uses.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17949"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17949'>msg17949</a>
          <a href='msg17949'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.23:46:22
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">If you know how to do it, please provide a path.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17948"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17948'>msg17948</a>
          <a href='msg17948'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.23:30:29
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Is there any sane reason to use double underscore for things that get safe_eval'd?
While not fixing the underlying problem, disallowing them would make something like that a magnitude harder.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17947"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17947'>msg17947</a>
          <a href='msg17947'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.22:14:25
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">I removed some more safe_eval usages in other places.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17946"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17946'>msg17946</a>
          <a href='msg17946'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.20:00:10
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">The review is private, I can give access on request.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17945"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17945'>msg17945</a>
          <a href='msg17945'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.19:59:02
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">I got this fix for webdav, <a href="//codereview.tryton.org/10521002">review10521002</a></pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17944"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17944'>msg17944</a>
          <a href='msg17944'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.18:19:27
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Sorry for the spam again, reuploaded without the unnecessary commands</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17943"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17943'>msg17943</a>
          <a href='msg17943'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.18:13:32
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">To clarify: this file doesn't do anything bad, just uses echo</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17942"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17942'>msg17942</a>
          <a href='msg17942'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.18:12:21
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Proof! :)</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17941"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17941'>msg17941</a>
          <a href='msg17941'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.18:12:04
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">For the record, safe_eval is used:

- convert.py for XML evaluation (no security issue)
- action.py for some field evaluation (by default only admin has write access) *
- cron.py: idem *
- lang.py: idem *
- model.py only for migration (no security issue after migration)
- rule.py: idem *
- trigger.py: idem *
- view.py: idem *
- modelview.py: same as for view.py
- currency.py: idem *
- price_list.py: write access to product admin user
- webdav.py: any user has write access

So for me, there are 2 weak points price_list and webdav.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17940"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17940'>msg17940</a>
          <a href='msg17940'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.17:57:56
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">On 06 Sep 16:34, duesenfranz wrote:
&gt; That said, calling it "not 100% safe" is an understatement, its not safe at all. (see "executing arbitrary commands is also possible")

Proof?</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17939"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17939'>msg17939</a>
          <a href='msg17939'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.16:34:02
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">I agree that getting rid of safe_eval is the best solution by far.

That said, calling it "not 100% safe" is an understatement, its not safe at all. (see "executing arbitrary commands is also possible")
I can't tell which code is really run, but authenticated tryton users being able to own the server is an issue (in my opinion)</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17938"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17938'>msg17938</a>
          <a href='msg17938'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.16:30:11
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">Also the best way will be to get ride safe_eval which is partially started in <a href="issue3211">issue3211</a>.</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17937"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17937'>msg17937</a>
          <a href='msg17937'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user3">ced</a>)
          
          <img src="@@file/committer.png" title="Tryton committer" alt="Tryton committer"/>
          
          
          <img src="@@file/translator.png" title="Tryton translator" alt="Tryton translator"/>
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.16:28:28
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/bedb3a4b40d90063feb70b48ee2b0f25?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">For me, it is not a big issue because:

- it is known that safe_eval is not 100% safe
- safe_eval is normaly used on code from autheticated users (and so trusted)</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17936"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17936'>msg17936</a>
          <a href='msg17936'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.15:32:02
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">sorry for the spam: ban double underscores is probably easier</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17935"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17935'>msg17935</a>
          <a href='msg17935'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.15:30:02
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">a quick &amp; dirty fix would be to ban underscores as a whole. While you can create strings with underscores, I think you can't use __getattr__ or similar and therefore can't use your string with underscores.

Note that this would be an easy fix and is probably breakable with a few hours time investment</pre>
      
      </div>
    
      
      <div class="anchor"  id="msg17934"></div>
      <div class="row row-cols-1 row-cols-md-4 mt-4" style="margin-left: 45px;">
        <div class="col col-md-auto">
          <a href='issue4155#msg17934'>msg17934</a>
          <a href='msg17934'>(view)</a>
        </div>
        <div class="col col-md-auto">
          Author: [hidden] (<a href="user497">duesenfranz</a>)
          
          
        </div>
        <div class="col col-md-auto">
          Date: 2014-09-06.14:57:06
        </div>
        <div class="col col-md-auto">
          
        </div>
      </div>
      
      <div class="d-flex ">
        <img src="//cdn.tryton.org/avatar/8068d69b9f563957b6d35c0d6257dd75?s=45&amp;d=retro&amp;r=g" class="align-self-start rounded-circle m-1">
      
        <pre class="msg flex-fill">executing arbitrary commands is also possible</pre>
      
      </div>
    
  

  <div class='vspace-five'></div>

  
  
  <table class="history table table-condensed table-striped"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2014-10-03&nbsp;11:17:44</td><td>yangoon</td><td>link</td><td><a rel="nofollow noopener" href="issue4228">issue4228 superseder</a></td></tr>
<tr><td>2014-09-30&nbsp;12:45:01</td><td>ced</td><td>set</td><td>status: chatting -> resolved<br />messages:
  + <a rel="nofollow noopener" href="msg18388">msg18388</a></td></tr>
<tr><td>2014-09-30&nbsp;12:11:47</td><td>ced</td><td>set</td><td>status: resolved -> chatting<br />messages:
  + <a rel="nofollow noopener" href="msg18387">msg18387</a></td></tr>
<tr><td>2014-09-30&nbsp;12:07:54</td><td>ced</td><td>set</td><td>status: in-progress -> resolved<br />messages:
  + <a rel="nofollow noopener" href="msg18386">msg18386</a></td></tr>
<tr><td>2014-09-29&nbsp;18:29:39</td><td>ced</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg18372">msg18372</a></td></tr>
<tr><td>2014-09-25&nbsp;14:50:53</td><td>duesenfranz</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg18348">msg18348</a></td></tr>
<tr><td>2014-09-25&nbsp;13:03:40</td><td>ced</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg18346">msg18346</a></td></tr>
<tr><td>2014-09-25&nbsp;12:02:55</td><td>duesenfranz</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg18344">msg18344</a></td></tr>
<tr><td>2014-09-24&nbsp;19:45:20</td><td>ced</td><td>set</td><td>reviews: 10521002,5601002 -> 10521002,5601002,12571002<br />messages:
  + <a rel="nofollow noopener" href="msg18330">msg18330</a></td></tr>
<tr><td>2014-09-24&nbsp;11:49:22</td><td>ced</td><td>set</td><td>messages:
  + <a rel="nofollow noopener" href="msg18311">msg18311</a></td></tr>
</table>
  
  <p>Showing 10 items.
  <a href="issue4155?show_all_history=yes">Show all history</a>
  (warning: this could be VERY long)</p>
  
  

          </div>
        </div>
      </div>
    

    
      <footer>
  <div class='container-fluid'>
    <div class="col-md-9 col-lg-10 ml-sm-auto">
    <hr>
    A
    <a href='http://www.roundup-tracker.org/'>roundup</a>
    production.
    </div>
  </div>
</footer>
    

    <script src='@@file/jquery-1.9.0.min.js'></script>
    <script src='@@file/bootstrap.min.js'></script>
    <script src='@@file/script.js'></script>
    
  

  </body>
</html>