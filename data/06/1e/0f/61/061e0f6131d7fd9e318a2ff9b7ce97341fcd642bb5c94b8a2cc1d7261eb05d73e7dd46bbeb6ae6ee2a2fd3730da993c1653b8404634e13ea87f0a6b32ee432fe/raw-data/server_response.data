<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
<meta property="og:type" content="website">
<meta property="og:title" content="1049095 - (CVE-2014-1582) Spdy/Http-2 Coalescing Key Pinning Bypass">
<meta property="og:url" content="https://bugzilla.mozilla.org/show_bug.cgi?id=1049095">
<meta property="og:description"
      content="RESOLVED (dkeeler) in Core - Security: PSM. Last updated 2016-06-04.">
<meta name="twitter:label1" value="Type">
<meta name="twitter:data1" value="defect">
<meta name="twitter:label2" value="Priority">
<meta name="twitter:data2" value="--">

    <meta name="viewport" content="width=1024">
    <meta name="color-scheme" content="dark light">
    <meta name="generator" content="Bugzilla 20211025.1">
    <meta name="bugzilla-global" content="dummy"
        id="bugzilla-global" data-bugzilla="{&quot;api_token&quot;:&quot;&quot;,&quot;config&quot;:{&quot;basepath&quot;:&quot;\/&quot;},&quot;constant&quot;:{&quot;COMMENT_COLS&quot;:80},&quot;param&quot;:{&quot;maxattachmentsize&quot;:&quot;10240&quot;,&quot;maxusermatches&quot;:&quot;50&quot;,&quot;splinter_base&quot;:&quot;\/page.cgi?id=splinter.html&amp;ignore=\/&quot;},&quot;string&quot;:{&quot;bug_type_required&quot;:&quot;You must select a Type for this bug&quot;,&quot;component_required&quot;:&quot;You must select a Component for this bug&quot;,&quot;description_required&quot;:&quot;You must enter a Description for this bug&quot;,&quot;short_desc_required&quot;:&quot;You must enter a Summary for this bug&quot;,&quot;version_required&quot;:&quot;You must select a Version for this bug&quot;},&quot;user&quot;:{&quot;is_new&quot;:1,&quot;login&quot;:&quot;&quot;}}">
    <title>1049095 - (CVE-2014-1582) Spdy/Http-2 Coalescing Key Pinning Bypass</title>

<link rel="Top" href="/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="/showdependencytree.cgi?id=1049095&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="/showdependencygraph.cgi?id=1049095">

      <link rel="Show" title="Bug Activity"
            href="/show_activity.cgi?id=1049095">

<link href="/static/v20211025.1/skins/yui.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/standard/global.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BugModal/web/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/BMO/web/styles/bug_modal.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/EditComments/web/styles/inline-editor.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-structure-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/js/jquery/ui/jquery-ui-theme-min.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/skins/lib/prism.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Needinfo/web/styles/needinfo.css" rel="stylesheet" type="text/css"><link href="/static/v20211025.1/extensions/Review/web/styles/badge.css" rel="stylesheet" type="text/css">



    
<script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/jquery/jquery-min.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/jquery/ui/jquery-ui-min.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/yui.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/jquery/plugins/contextMenu/contextMenu-min.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/jquery/plugins/devbridgeAutocomplete/devbridgeAutocomplete-min.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/global.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/util.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/dropdown.js"></script>

      <script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV">
          YAHOO.namespace('bugzilla');
          if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
              YAHOO.util.Event._simpleRemove(window, "unload",
                                             YAHOO.util.Event._unload);
          }BUGZILLA.value_descs = JSON.parse('{\"bug_status\":{},\"resolution\":{\"\":\"---\"}}');

  
    var tracking_flags_str = "{\"types\":[\"tracking\"],\"flags\":{\"tracking\":{\"cf_status_b2g_1_4\":\"unaffected\",\"cf_status_firefox32\":\"wontfix\",\"cf_status_firefox34\":\"fixed\",\"cf_tracking_firefox33\":\"+\",\"cf_status_firefox94\":\"---\",\"cf_status_firefox_esr91\":\"---\",\"cf_tracking_thunderbird_esr78\":\"---\",\"cf_status_b2g_2_0\":\"wontfix\",\"cf_tracking_firefox93\":\"---\",\"cf_tracking_firefox95\":\"---\",\"cf_status_firefox93\":\"---\",\"cf_tracking_thunderbird_esr91\":\"---\",\"cf_status_thunderbird_esr91\":\"---\",\"cf_tracking_firefox32\":\"-\",\"cf_tracking_firefox_esr78\":\"---\",\"cf_status_thunderbird_esr78\":\"---\",\"cf_tracking_firefox_esr91\":\"---\",\"cf_status_firefox_esr78\":\"---\",\"cf_tracking_firefox_relnote\":\"---\",\"cf_status_firefox33\":\"fixed\",\"cf_status_b2g_2_1\":\"fixed\",\"cf_status_firefox_esr31\":\"unaffected\",\"cf_tracking_firefox94\":\"---\",\"cf_status_firefox95\":\"---\"},\"project\":{\"cf_root_cause\":\"---\",\"cf_tracking_firefox_sumo\":\"---\",\"cf_a11y_review_project_flag\":\"---\",\"cf_webcompat_priority\":\"---\",\"cf_fission_milestone\":\"---\"}},\"comments\":{\"cf_a11y_review_project_flag\":{\"requested\":\"Description:\\nPlease provide an explanation of the feature or change. Include a description of the user scenario in which it would be used and how the user would complete the task(s).\\nScreenshots and visual UI specs are welcome, but please include sufficient accompanying explanation so that blind members of the accessibility team are able to understand the feature\/change.\\n\\nHow do we test this?\\nIf there is an implementation to test, please provide instructions for testing it; e.g. setting preferences, other preparation, how to trigger the UI, etc.\\n\\nWhen will this ship?\\nTracking bug\/issue:\\nDesign documents (e.g. Product Requirements Document, UI spec):\\nEngineering lead:\\nProduct manager:\\n\\nThe accessibility team has developed the Mozilla Accessibility Release Guidelines which outline what is needed to make user interfaces accessible:\\nhttps:\/\/wiki.mozilla.org\/Accessibility\/Guidelines\\nPlease describe the accessibility guidelines you considered and what steps you\'ve taken to address them:\\n\\nDescribe any areas of concern to which you want the accessibility team to give special attention:\"},\"cf_tracking_firefox32\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr78\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox33\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox94\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox95\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox93\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_esr91\":{\"?\":\"[Tracking Requested - why for this release]:\"},\"cf_tracking_firefox_relnote\":{\"?\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"},\"cf_tracking_firefox_sumo\":{\"none-needed\":\"Release Note Request (optional, but appreciated)\\n[Why is this notable]:\\n[Affects Firefox for Android]:\\n[Suggested wording]:\\n[Links (documentation, blog post, etc)]:\"}}}";
    var TrackingFlags = $.parseJSON(tracking_flags_str);

  

  
  BUGZILLA.bug_id = 1049095;
  BUGZILLA.bug_title = '1049095 - (CVE-2014-1582) Spdy\/Http-2 Coalescing Key Pinning Bypass';
  BUGZILLA.bug_summary = 'Spdy\/Http-2 Coalescing Key Pinning Bypass';
  BUGZILLA.bug_url = 'https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1049095';
  BUGZILLA.bug_keywords = 'sec-moderate',
  BUGZILLA.user = {
    id: 0,
    login: '',
    is_insider: false,
    is_timetracker: false,
    can_tag: false,
    timezone: 'America\/Los_Angeles',
    settings: {
      quote_replies: 'quoted_reply',
      zoom_textareas: true,
      remember_collapsed: true,
      inline_attachments: true,
      autosize_comments: false
    }
  };

  BUGZILLA.bug_secure = false;
      </script>
<script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/BugModal/web/autosize.min.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/ProdCompSearch/web/js/prod_comp_search.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/BugModal/web/bug_modal.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/BugModal/web/comments.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/ComponentWatching/web/js/overlay.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/bugzilla-readable-status-min.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/field.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/comments.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/TrackingFlags/web/js/flags.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/BMO/web/js/firefox-crash-table.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/MozChangeField/web/js/severity-s1-priority-p1.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/MozChangeField/web/js/clear-tracking-priority-s1.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/MozChangeField/web/js/set-tracking-severity-s1.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/lib/prism.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/GoogleAnalytics/web/js/analytics.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/js/lib/md5.min.js"></script><script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV" src="/static/v20211025.1/extensions/Review/web/js/badge.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla@Mozilla" href="/search_plugin.cgi"><link rel="shortcut icon" href="/extensions/BMO/web/images/favicon.ico">
<link rel="canonical" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1049095">
<link rel="shorturl" href="https://bugzilla.mozilla.org/1049095"><meta name="google-analytics" content="UA-36116321-3" data-location="https://bugzilla.mozilla.org/bug/show-modal" data-title="1049095 - (CVE-2014-1582) Spdy/Http-2 Coalescing Key Pinning Bypass">
<script async src="https://www.google-analytics.com/analytics.js"></script><meta name="robots" content="noarchive">
  </head>



  <body
        class="bugzilla-mozilla-org
               skin-standard bug_modal yui-skin-sam">



<div id="wrapper">

<header id="header" role="banner">
  <div class="inner">
    <h1 id="header-title" class="title"><a href="https://bugzilla.mozilla.org/home" title="Go to home page">Bugzilla</a></h1>
    <form role="search" id="header-search" class="quicksearch" action="/buglist.cgi" data-no-csrf>
      <section class="searchbox-outer dropdown" role="combobox" aria-expanded="false" aria-haspopup="listbox"
               aria-labelledby="header-search-label" aria-owns="header-search-dropdown">
        <h2 id="header-search-label">Quick Search</h2>
        <span class="icon" aria-hidden="true"></span>
        <input role="searchbox" id="quicksearch_top" class="dropdown-button" name="quicksearch" autocomplete="off"
               value="" placeholder="Search Bugs"
               title="Enter a bug number or some search terms" aria-controls="header-search-dropdown"
               aria-label="Quick Search"><div id="header-search-dropdown" class="dropdown-content right" role="listbox" style="display: none;">
  <div id="header-search-dropdown-wrapper">
  </div>
</div>
      </section>
    </form>
    <nav id="header-nav">
      <ul class="links">
        <li class="link-browse">
          <a href="/describecomponents.cgi" title="Browse bugs by component">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Browse</span>
          </a>
        </li>
        <li class="link-search">
          <a href="/query.cgi?format=advanced" title="Search bugs using various criteria">
            <span class="icon" aria-hidden="true"></span>
            <span class="label">Advanced Search</span>
          </a>
        </li>
      </ul>
      <div class="dropdown">
        <button type="button" id="header-tools-menu-button" class="dropdown-button minor" title="More tools…"
                aria-label="More tools…" aria-expanded="false" aria-haspopup="true" aria-controls="header-tools-menu">
          <span class="icon" aria-hidden="true"></span>
        </button>
        <ul class="dropdown-content left" id="header-tools-menu" role="menu" style="display:none;">
          <li role="presentation">
            <a href="/report.cgi" role="menuitem" tabindex="-1">Reports</a>
          </li>
            <li role="separator"></li>
            <li role="presentation">
              <a href="https://bmo.readthedocs.io/en/latest/" role="menuitem" tabindex="-1">Documentation</a>
            </li>
        </ul>
      </div>
    </nav>
      <ul id="header-login" class="links">
          <li id="moz_new_account_container_top"><a href="/createaccount.cgi">New Account</a></li><li id="mini_login_container_top">
  <a id="login_link_top" href="/index.cgi?GoAheadAndLogIn=1"
     class='show_mini_login_form' data-qs-suffix="_top">Log In</a>

  <div id="mini_login_top" class="mini-popup mini_login bz_default_hidden"><span id="github_mini_login_top" class="mini_login_top">
    <form method="post" action="/github.cgi">
      <input type="hidden" name="github_secret" value="hkPMYb2YurGhM9EdfEx9KLzyYcarYkZrHC5qWREmVZzzXghOodD9DUC7JjGviZfpRnhUiHdME6beSWocBxz3UdUl0esKIRN4N3LEHiBzhYx3fpKnKbg347z27qeSQayQhBqe1tPfVIbLRth6moFwLexdZfu7Fz1ZLzYxM47XUajv0q20j6G7fe6YO6jIxqQqModgz0ZRnMzxNANgKMFGCFjttPveBt9LthDjM5dunSnyXNlZUaQdyEZopR0fVUOf">
      <input type="hidden" name="target_uri" value="https://bugzilla.mozilla.org/show_bug.cgi">
      <input type="image" src="/extensions/GitHubAuth/web/images/sign_in.png" height="22" width="75" align="absmiddle"
             alt="Sign in with GitHub"
             title="Sign in with GitHub"> or
    </form>
  </span>

  <form action="/show_bug.cgi?id=1049095" method="POST"
        data-qs-suffix="_top">

    <input id="Bugzilla_login_top"
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           placeholder="Email"
           aria-label="Email"
           type="email"
           required
    >
    <input class="bz_password"
           id="Bugzilla_password_top"
           name="Bugzilla_password"
           type="password"
           title="Password"
           placeholder="Password"
           aria-label="Password"
           required
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text"
           id="Bugzilla_password_dummy_top" value="password"
           title="Password"
    >
      <input type="checkbox" id="Bugzilla_remember_top"
             name="Bugzilla_remember" value="on" class="bz_remember"
                 checked>
      <label for="Bugzilla_remember_top">Remember</label>
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
           class="check_mini_login_fields"
            id="log_in_top">
    <a href="#" id="hide_mini_login_top" aria-label="Close"
       class="close-button hide_mini_login_form" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
<li id="forgot_container_top">
  <a id="forgot_link_top" href="/index.cgi?GoAheadAndLogIn=1#forgot"
     class='show_forgot_form'
     data-qs-suffix="_top">Forgot Password</a>
  <div id="forgot_form_top" class="mini-popup mini_forgot bz_default_hidden">
  <form action="/token.cgi" method="post">
    <input type="email" name="loginname" size="20" placeholder="Email" aria-label="Email" required>
    <input id="forgot_button_top" value="Reset Password"
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token_top" name="token" value="1635622474-jUVAs1x4aHmD_Qlys6q0JVK_Bnv6u2I_ILIFmbxYmP8">
    <a href="#" class="close-button hide_forgot_form" aria-label="Close" data-qs-suffix="_top">
      <span class="icon" aria-hidden="true"></span>
    </a>
  </form>
  </div>
</li>
      </ul><div id="header-external-links" class="dropdown first">
  <button type="button" id="header-external-menu-button" class="dropdown-button minor" title="Mozilla"
          aria-label="Mozilla" aria-expanded="false" aria-haspopup="true" aria-controls="header-external-menu">
    <img src="/static/v20211025.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg" width="32" height="32" alt="">
  </button>
  <ul class="dropdown-content right" id="header-external-menu" role="menu" style="display:none;">
    <li role="presentation">
      <a href="https://www.mozilla.org/" role="menuitem" tabindex="-1">Mozilla Home</a>
    </li>
    <li role="separator"></li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/" role="menuitem" tabindex="-1">Privacy</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/privacy/websites/#cookies" role="menuitem" tabindex="-1">Cookies</a>
    </li>
    <li role="presentation">
      <a href="https://www.mozilla.org/about/legal/" role="menuitem" tabindex="-1">Legal</a>
    </li>
  </ul>
</div>
  </div>
</header> 


<main id="bugzilla-body" tabindex="-1">

<aside id="message-container" role="complementary">
  <noscript>
    <div class="noscript">
      <div class="inner">
        <p>Please enable JavaScript in your browser to use all the features on this site.</p>
      </div>
    </div>
  </noscript>
</aside>

<div id="main-inner">




<div role="toolbar" id="page-toolbar">
  <div role="group" class="buttons">
    <button type="button" id="copy-summary" class="secondary"
      title="Copy bug number and summary to your clipboard">Copy Summary</button>
    <div id="clip-container" style="display:none"><input type="text" id="clip"></div>
    <div class="dropdown">
      <button type="button" id="action-menu-btn" aria-haspopup="true" aria-label="View"
        aria-expanded="false" aria-controls="action-menu" class="dropdown-button secondary">View &#9662;</button>
      <ul class="dropdown-content left" id="action-menu" role="menu" style="display:none;">
        <li role="presentation">
          <a id="action-reset" role="menuitem" tabindex="-1">Reset Sections</a>
        </li>
        <li role="presentation">
          <a id="action-expand-all" role="menuitem" tabindex="-1">Expand All Sections</a>
        </li>
        <li role="presentation">
          <a id="action-collapse-all" role="menuitem" tabindex="-1">Collapse All Sections</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a id="action-history" role="menuitem" tabindex="-1">History</a>
        </li>
        <li role="separator"></li>
        <li role="presentation">
          <a href="/rest/bug/1049095" role="menuitem" tabindex="-1">JSON</a>
        </li>
        <li role="presentation">
          <a href="/show_bug.cgi?ctype=xml&amp;id=1049095" role="menuitem" tabindex="-1">XML</a>
        </li>
      </ul>
    </div>
  </div>
</div>



<div role="status" id="io-error" style="display:none"></div>
<div role="status" id="floating-message" style="display:none">
  <div id="floating-message-text"></div>
</div>
<section class="module"
>
  <div class="module-content"
  >
  <div id="summary-container">
    <div class="field indent" id="field-status_summary"
>


  
    <div class=" container">
        <span id="field-value-status_summary">
      <span class="bug-status-label text" data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="/show_bug.cgi?id=1049095">Bug 1049095</a>
          <span class="edit-hide">(CVE-2014-1582)</span>
      </span>
      <span>
        <span class="bug-time-label">Opened <span class="rel-time" title="2014-08-05 12:47 PDT" data-time="1407268049">7 years ago</span></span>
          <span class="bug-time-label">Closed <span class="rel-time" title="2014-08-21 18:31 PDT" data-time="1408671116">7 years ago</span></span>
      </span>
        </span>
    </div>

  
</div>
<div class="field indent edit-hide"
>


  
    <div class=" container">
      

      <h1 id="field-value-short_desc">Spdy/Http-2 Coalescing Key Pinning Bypass</h1>
    </div>

  
</div>

    <div class="field edit-show" id="field-short_desc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc" id="short_desc-help-link" class="help">Summary:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-short_desc">
            Spdy/Http-2 Coalescing Key Pinning Bypass

        </span>
    </div>

  
</div>
  </div>
  </div>
</section>


<section class="module" id="module-categories"
>
    <header id="module-categories-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Categories section"
           data-label-collapsed="Expand Categories section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-categories-content"
             aria-expanded="true"
             aria-labeledby="module-categories-title"
             aria-describedby="module-categories-subtitle"></div>
        <h2 class="module-title" id="module-categories-title">Categories</h2>
          <h3 class="module-subtitle" id="module-categories-subtitle">
            (Core :: Security: PSM, defect)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-categories-content"
  ><div class="fields-lhs">

    <div class="field" id="field-product"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core" id="product-help-link" class="help">Product:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-product">
      <div class="name-info-outer dropdown">
        <span id="product-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="product-info">Core
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="product-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Product description and actions">
          <header>
            <div class="title">Core</div>
            <div class="description">Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the <a href="https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox">Firefox</a> product. (<a href="https://wiki.mozilla.org/Modules/All#Core">More info</a>)</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Product</a></div>
            <div><a href="/enter_bug.cgi?product=Core"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Product</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core"
                         data-label-watch="Watch This Product" data-label-unwatch="Unwatch This Product"
                         data-source="BugModal">Watch This Product</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-component"
>
    <div class="name">
        <a href="/describecomponents.cgi?product=Core&component=Security%3A%20PSM#Security%3A%20PSM" id="component-help-link" class="help">Component:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-component">
      <div class="name-info-outer dropdown">
        <span id="component-name" class="dropdown-button" tabindex="0" role="button"
             aria-haspopup="menu" aria-controls="component-info">Security: PSM
          <span class="icon" aria-hidden="true">&#x25BE;</span>
        </span>
        <aside id="component-info" class="name-info-popup dropdown-content right hover-display" hidden role="menu"
               aria-label="Component description and actions">
          <header>
            <div class="title">Core :: Security: PSM</div>
            <div class="description">A daemon that performs cryptographic operations on behalf of a client application.</div>
          </header>
          <li role="separator"></li>
          <div class="actions">
            <div><a href="/buglist.cgi?product=Core&amp;component=Security%3A%20PSM&amp;bug_status=__open__"
                    target="_blank" role="menuitem" tabindex="-1">See Open Bugs in This Component</a></div>
            <div><a href="/buglist.cgi?product=Core&amp;component=Security%3A%20PSM&amp;chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__"
                    target="_blank" role="menuitem" tabindex="-1">Recently Fixed Bugs in This Component</a></div>
            <div><a href="/enter_bug.cgi?product=Core&amp;component=Security%3A%20PSM"
                    target="_blank" role="menuitem" tabindex="-1">File New Bug in This Component</a></div>
            <div><button disabled type="button" class="secondary component-watching" role="menuitem" tabindex="-1"
                         data-product="Core" data-component="Security: PSM"
                         data-label-watch="Watch This Component" data-label-unwatch="Unwatch This Component"
                         data-source="BugModal">Watch This Component</button></div>
          </div>
        </aside>
      </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-version"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#version" id="version-help-link" class="help">Version:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-version">
            32 Branch

        </span>
    </div>

  
</div>

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform" id="-help-link" class="help">Platform:
        </a>
    </div>


  
    <div class=" container"><div class="field inline" id="field-rep_platform"
>


  
    <div class="value">
        <span id="field-value-rep_platform">
            x86_64

        </span>
    </div>

  
</div><div class="field indent inline" id="field-op_sys"
>


  
    <div class="value">
        <span id="field-value-op_sys">
            Linux

        </span>
    </div>

  
</div><div class="field indent inline"
>


  
    <div class=" container">
    </div>

  
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field contains-buttons" id="field-bug_type"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type" id="bug_type-help-link" class="help">Type:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_type">
      <span class="bug-type-label iconic-text" data-type="defect">
        <span class="icon" aria-hidden="true"></span>defect</span>
        </span>
    </div>

  
</div>

    <div class="field" id="field-importance"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority" id="importance-help-link" class="help">Priority:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-importance"><div class="field inline" id="field-priority"
>


  
    <div class="value">
        <span id="field-value-priority">
          <em>Not set</em>
        </span>
    </div>

  
</div><div class="field inline" id="field-bug_severity"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity" id="bug_severity-help-link" class="help">Severity:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_severity">
            normal

        </span>
    </div>

  
</div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_points" style="display:none"
>
    <div class="name">Points:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_points">
            ---

        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-tracking"
>
    <header id="module-tracking-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Tracking section"
           data-label-collapsed="Expand Tracking section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-tracking-content"
             aria-expanded="true"
             aria-labeledby="module-tracking-title"
             aria-describedby="module-tracking-subtitle"></div>
        <h2 class="module-title" id="module-tracking-title">Tracking</h2>
          <h3 class="module-subtitle" id="module-tracking-subtitle">
            (<span id="readable-bug-status" data-readable-bug-status="{&quot;dupe_of&quot;:null,&quot;cf_tracking_firefox94&quot;:&quot;---&quot;,&quot;cf_fission_milestone&quot;:&quot;---&quot;,&quot;cf_status_firefox95&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_relnote&quot;:&quot;---&quot;,&quot;cf_tracking_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_status_b2g_2_1&quot;:&quot;fixed&quot;,&quot;cf_status_firefox_esr31&quot;:&quot;unaffected&quot;,&quot;cf_status_firefox33&quot;:&quot;fixed&quot;,&quot;cf_tracking_firefox_esr78&quot;:&quot;---&quot;,&quot;cf_tracking_firefox32&quot;:&quot;-&quot;,&quot;cf_status_thunderbird_esr91&quot;:&quot;---&quot;,&quot;cf_status_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox93&quot;:&quot;---&quot;,&quot;status&quot;:&quot;RESOLVED&quot;,&quot;cf_root_cause&quot;:&quot;---&quot;,&quot;keywords&quot;:[&quot;sec-moderate&quot;],&quot;target_milestone&quot;:&quot;mozilla34&quot;,&quot;cf_tracking_thunderbird_esr91&quot;:&quot;---&quot;,&quot;id&quot;:1049095,&quot;cf_tracking_firefox95&quot;:&quot;---&quot;,&quot;cf_tracking_firefox93&quot;:&quot;---&quot;,&quot;cf_a11y_review_project_flag&quot;:&quot;---&quot;,&quot;flags&quot;:[{&quot;name&quot;:&quot;qe-verify&quot;,&quot;status&quot;:&quot;-&quot;}],&quot;cf_tracking_thunderbird_esr78&quot;:&quot;---&quot;,&quot;cf_status_firefox_esr91&quot;:&quot;---&quot;,&quot;cf_status_firefox94&quot;:&quot;---&quot;,&quot;cf_status_b2g_2_0&quot;:&quot;wontfix&quot;,&quot;cf_tracking_firefox33&quot;:&quot;+&quot;,&quot;priority&quot;:&quot;--&quot;,&quot;resolution&quot;:&quot;FIXED&quot;,&quot;cf_tracking_firefox_sumo&quot;:&quot;---&quot;,&quot;cf_webcompat_priority&quot;:&quot;---&quot;,&quot;cf_status_firefox34&quot;:&quot;fixed&quot;,&quot;cf_status_firefox32&quot;:&quot;wontfix&quot;,&quot;cf_status_b2g_1_4&quot;:&quot;unaffected&quot;}"></span>)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-tracking-content"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-status-view"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-view-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-view">RESOLVED
        FIXED
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-status-edit" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugStatuses" id="status-edit-help-link" class="help">Status:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-status-edit"><div class="field inline" id="field-bug_status"
>


  
    <div class="value">
        <span id="field-value-bug_status">
            RESOLVED

        </span>
    </div>

  
</div><div class="field indent inline" id="field-resolution"
>


  
    <div class="value">
        <span id="field-value-resolution">
            FIXED

        </span>
    </div>

  
</div>
  <div id="status-action-buttons">
      <div id="assigned-container" style="display:none">
        <button type="button" class="secondary" id="mark-as-assigned-btn">
          Mark as Assigned
        </button>
      </div>
  </div>
        </span>
    </div>

  
</div>

    <div class="field" id="field-target_milestone"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone" id="target_milestone-help-link" class="help">Milestone:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-target_milestone">
            mozilla34

        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-cf_fx_iteration" style="display:none"
>
    <div class="name">Iteration:
    </div>


  
    <div class="value">
        <span id="field-value-cf_fx_iteration">
            ---

        </span>
    </div>

  
</div>


      <div class="field edit-show" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Project Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <td class="tracking-flag-name">a11y-review</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_a11y_review_project_flag-dirty">
  <select id="cf_a11y_review_project_flag" name="cf_a11y_review_project_flag">
        <option value="---"
          id="v4876_cf_a11y_review_project_flag" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Webcompat Priority</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_webcompat_priority-dirty">
  <select id="cf_webcompat_priority" name="cf_webcompat_priority">
        <option value="---"
          id="v4274_cf_webcompat_priority" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Root Cause</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_root_cause-dirty">
  <select id="cf_root_cause" name="cf_root_cause">
        <option value="---"
          id="v4701_cf_root_cause" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">user-doc-firefox</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_sumo-dirty">
  <select id="cf_tracking_firefox_sumo" name="cf_tracking_firefox_sumo">
        <option value="---"
          id="v4660_cf_tracking_firefox_sumo" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">Fission Milestone</td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_fission_milestone-dirty">
  <select id="cf_fission_milestone" name="cf_fission_milestone">
        <option value="---"
          id="v4222_cf_fission_milestone" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>
</div><div class="fields-rhs">

      <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags" id="-help-link" class="help">Tracking Flags:
        </a>
    </div>


  
    <div class=" container"><div class="flags edit-hide">
    <table class="layout-table tracking-flags">
        <tr>
          <th></th>
          <th>Tracking</th>
          <th>Status</th>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox32</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox32&amp;o1=equals&amp;v1=-">-</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox32&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox33</td>
            <td class="tracking-flag-tracking">
                <a href="/buglist.cgi?f1=cf_tracking_firefox33&amp;o1=equals&amp;v1=%2B">+</a>
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox33&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox34</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox34&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">firefox-esr31</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_firefox_esr31&amp;o1=equals&amp;v1=unaffected">unaffected</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">b2g-v1.4</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_b2g_1_4&amp;o1=equals&amp;v1=unaffected">unaffected</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">b2g-v2.0</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_b2g_2_0&amp;o1=equals&amp;v1=wontfix">wontfix</a>
          </td>
        </tr>
        <tr>
          <td class="tracking-flag-name">b2g-v2.1</td>
            <td class="tracking-flag-tracking">---
            </td>
          <td class="tracking-flag-status">
              <a href="/buglist.cgi?f1=cf_status_b2g_2_1&amp;o1=equals&amp;v1=fixed">fixed</a>
          </td>
        </tr>
    </table>
  </div>


<div class="flags edit-show" style="display:none">
  <table class="layout-table tracking-flags">
      <tr>
        <th></th>
        <th>Tracking</th>
        <th>Status</th>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox32</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox32-dirty">
  <select id="cf_tracking_firefox32" name="cf_tracking_firefox32">
        <option value="-"
          id="v1634_cf_tracking_firefox32" selected
        >-
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox32-dirty">
  <select id="cf_status_firefox32" name="cf_status_firefox32">
        <option value="wontfix"
          id="v1640_cf_status_firefox32" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox33</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox33-dirty">
  <select id="cf_tracking_firefox33" name="cf_tracking_firefox33">
        <option value="+"
          id="v1720_cf_tracking_firefox33" selected
        >+
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox33-dirty">
  <select id="cf_status_firefox33" name="cf_status_firefox33">
        <option value="fixed"
          id="v1713_cf_status_firefox33" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox34</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox34-dirty">
  <select id="cf_status_firefox34" name="cf_status_firefox34">
        <option value="fixed"
          id="v1784_cf_status_firefox34" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr31</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr31-dirty">
  <select id="cf_status_firefox_esr31" name="cf_status_firefox_esr31">
        <option value="unaffected"
          id="v1764_cf_status_firefox_esr31" selected
        >unaffected
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">b2g-v1.4</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_b2g_1_4-dirty">
  <select id="cf_status_b2g_1_4" name="cf_status_b2g_1_4">
        <option value="unaffected"
          id="v1464_cf_status_b2g_1_4" selected
        >unaffected
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">b2g-v2.0</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_b2g_2_0-dirty">
  <select id="cf_status_b2g_2_0" name="cf_status_b2g_2_0">
        <option value="wontfix"
          id="v1604_cf_status_b2g_2_0" selected
        >wontfix
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">b2g-v2.1</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_b2g_2_1-dirty">
  <select id="cf_status_b2g_2_1" name="cf_status_b2g_2_1">
        <option value="fixed"
          id="v1737_cf_status_b2g_2_1" selected
        >fixed
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">relnote-firefox</td>
          <td class="tracking-flag-tracking"></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_tracking_firefox_relnote-dirty">
  <select id="cf_tracking_firefox_relnote" name="cf_tracking_firefox_relnote">
        <option value="---"
          id="v539_cf_tracking_firefox_relnote" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr78-dirty">
  <select id="cf_tracking_thunderbird_esr78" name="cf_tracking_thunderbird_esr78">
        <option value="---"
          id="v4823_cf_tracking_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr78-dirty">
  <select id="cf_status_thunderbird_esr78" name="cf_status_thunderbird_esr78">
        <option value="---"
          id="v4829_cf_status_thunderbird_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">thunderbird_esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_thunderbird_esr91-dirty">
  <select id="cf_tracking_thunderbird_esr91" name="cf_tracking_thunderbird_esr91">
        <option value="---"
          id="v5236_cf_tracking_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_thunderbird_esr91-dirty">
  <select id="cf_status_thunderbird_esr91" name="cf_status_thunderbird_esr91">
        <option value="---"
          id="v5242_cf_status_thunderbird_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr78</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr78-dirty">
  <select id="cf_tracking_firefox_esr78" name="cf_tracking_firefox_esr78">
        <option value="---"
          id="v4808_cf_tracking_firefox_esr78" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr78-dirty">
  <select id="cf_status_firefox_esr78" name="cf_status_firefox_esr78">
        <option value="---"
          id="v4813_cf_status_firefox_esr78" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox-esr91</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox_esr91-dirty">
  <select id="cf_tracking_firefox_esr91" name="cf_tracking_firefox_esr91">
        <option value="---"
          id="v5194_cf_tracking_firefox_esr91" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox_esr91-dirty">
  <select id="cf_status_firefox_esr91" name="cf_status_firefox_esr91">
        <option value="---"
          id="v5199_cf_status_firefox_esr91" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox93</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox93-dirty">
  <select id="cf_tracking_firefox93" name="cf_tracking_firefox93">
        <option value="---"
          id="v5266_cf_tracking_firefox93" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox93-dirty">
  <select id="cf_status_firefox93" name="cf_status_firefox93">
        <option value="---"
          id="v5271_cf_status_firefox93" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox94</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox94-dirty">
  <select id="cf_tracking_firefox94" name="cf_tracking_firefox94">
        <option value="---"
          id="v5284_cf_tracking_firefox94" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox94-dirty">
  <select id="cf_status_firefox94" name="cf_status_firefox94">
        <option value="---"
          id="v5289_cf_status_firefox94" selected
        >---
        </option>
  </select></td>
      </tr>
      <tr>
        <td class="tracking-flag-name">firefox95</td>
          <td class="tracking-flag-tracking"><input type="hidden" id="cf_tracking_firefox95-dirty">
  <select id="cf_tracking_firefox95" name="cf_tracking_firefox95">
        <option value="---"
          id="v5311_cf_tracking_firefox95" selected
        >---
        </option>
  </select></td>
        <td class="tracking-flag-status"><input type="hidden" id="cf_status_firefox95-dirty">
  <select id="cf_status_firefox95" name="cf_status_firefox95">
        <option value="---"
          id="v5316_cf_status_firefox95" selected
        >---
        </option>
  </select></td>
      </tr>
  </table>
</div>
    </div>

  
</div>

</div>
  </div>
</section>



<section class="module" id="module-people"
>
    <header id="module-people-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse People section"
           data-label-collapsed="Expand People section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-people-content"
             aria-expanded="false"
             aria-labeledby="module-people-title"
             aria-describedby="module-people-subtitle"></div>
        <h2 class="module-title" id="module-people-title">People</h2>
          <h3 class="module-subtitle" id="module-people-subtitle">
            (Reporter: mcmanus, Assigned: keeler)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-people-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-hide" id="field-assigned_to"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to"><div class="vcard vcard_349244" ><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=349244" > <span class="fna">keeler</span></a>
</div>
        </span>
    </div>

  
</div><div class="field edit-show" id="field-assigned_to" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to" id="assigned_to-help-link" class="help">Assignee:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-assigned_to">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-assignee" name="set_default_assignee" class="set-default"
          value="1" data-for="assigned_to">
        <label for="set-default-assignee">Reset Assignee to default</label>
      </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-bug_mentors" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor" id="bug_mentors-help-link" class="help">Mentors:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_mentors">---
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-qa_contact" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact" id="qa_contact-help-link" class="help">QA Contact:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-qa_contact">
      <div class="set-default-container" style="display:none">
        <input type="checkbox" id="set-default-qa-contact" name="set_default_qa_contact" class="set-default"
          value="1" data-for="qa_contact">
        <label for="set-default-qa-contact">Reset QA Contact to default</label>
      </div>
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-reporter"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter" id="reporter-help-link" class="help">Reporter:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-reporter">
            <div class="vcard vcard_32546" ><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=40" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=32546" > <span class="fna">mcmanus</span></a>
</div>

        </span>
    </div>

  
</div>

    <div class="field" id="field-triage_owner"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner" id="triage_owner-help-link" class="help">Triage Owner:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-triage_owner">
            <div class="vcard vcard_349244" ><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="20" height="20"> <a class="email " href="/user_profile?user_id=349244" > <span class="fna">keeler</span></a>
</div>

        </span>
    </div>

  
</div>

    

    <div class="field"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc" id="-help-link" class="help">CC:
        </a>
    </div>


  
    <div class=" container">


        <span aria-owns="cc-summary cc-latch">
          <span role="button" tabindex="0" id="cc-summary" data-count="17">17 people
          </span>
        </span>


        <div id="cc-list" style="display:none"></div>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-references"
>
    <header id="module-references-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse References section"
           data-label-collapsed="Expand References section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-references-content"
             aria-expanded="false"
             aria-labeledby="module-references-title"
             aria-describedby="module-references-subtitle"></div>
        <h2 class="module-title" id="module-references-title">References</h2>
      </div>
    </header>
  <div class="module-content" id="module-references-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field bug-list edit-show" id="field-dependson" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson" id="dependson-help-link" class="help">Depends on:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-dependson">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-blocked" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks" id="blocked-help-link" class="help">Blocks:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-blocked">
        ---
        </span>
    </div>

  
</div>

    <div class="field bug-list edit-show" id="field-regresses" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses" id="regresses-help-link" class="help">Regressions:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regresses">
        ---
        </span>
    </div>

  
</div><div class="field bug-list edit-show" id="field-regressed_by" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by" id="regressed_by-help-link" class="help">Regressed by:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-regressed_by">
        ---
        </span>
    </div>

  
</div>

    
</div><div class="fields-rhs">

    <div class="field edit-show" id="field-bug_file_loc" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc" id="bug_file_loc-help-link" class="help">URL:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-bug_file_loc"><div class="link">
    <a href="" target="_blank"
      rel="noreferrer" title=""
      class="bug-url" data-safe="0"></a>
  </div>
        </span>
    </div>

  
</div>

    <div class="field edit-show" id="field-see_also" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also" id="see_also-help-link" class="help">See Also:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-see_also">
        ---
        </span>
    </div>

  
</div>
</div>
  </div>
</section>


<section class="module" id="module-details"
>
    <header id="module-details-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Details section"
           data-label-collapsed="Expand Details section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-details-content"
             aria-expanded="false"
             aria-labeledby="module-details-title"
             aria-describedby="module-details-subtitle"></div>
        <h2 class="module-title" id="module-details-title">Details</h2>
          <h3 class="module-subtitle" id="module-details-subtitle">
            (Keywords: sec-moderate, Whiteboard: [sdpy][adv-main33+])
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-details-content" style="display:none"
  ><div class="fields-lhs">

    <div class="field edit-show" id="field-alias" style="display:none"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias" id="alias-help-link" class="help">Alias:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-alias">
            CVE-2014-1582

        </span>
    </div>

  
</div>

    <div class="field" id="field-keywords"
>
    <div class="name">
        <a href="/describekeywords.cgi" id="keywords-help-link" class="help">Keywords:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-keywords">
          <a href="/buglist.cgi?keywords=sec-moderate&amp;resolution=---">sec-moderate</a>
        </span>
    </div>

  
</div>

    <div class="field" id="field-status_whiteboard"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/Whiteboard" id="status_whiteboard-help-link" class="help">Whiteboard:
        </a>
    </div>


  
    <div class="value">
        <span id="field-value-status_whiteboard">[sdpy][adv-main33+]
        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_qa_whiteboard" style="display:none"
>
    <div class="name">QA Whiteboard:
    </div>


  
    <div class="value">
        <span id="field-value-cf_qa_whiteboard">
        ---
        </span>
    </div>

  
</div>

    

    <div class="field edit-show" id="field-cf_has_regression_range" style="display:none"
>
    <div class="name">Has Regression Range:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_regression_range">
            ---

        </span>
    </div>

  
</div><div class="field edit-show" id="field-cf_has_str" style="display:none"
>
    <div class="name">Has STR:
    </div>


  
    <div class="value">
        <span id="field-value-cf_has_str">
            ---

        </span>
    </div>

  
</div>

    <div class="field" id="field-votes"
>
    <div class="name">
        <a href="https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes" id="votes-help-link" class="help">Votes:
        </a>
    </div>


  
    <div class=" container">
        <span id="field-value-votes">0
        </span>
    </div>

  
</div>
</div><div class="fields-rhs">

    <div class="field" id="field-bug_flags"
>
    <div class="name">Bug Flags:
    </div>


  
    <div class=" container">
        <span id="field-value-bug_flags"><div id="bug-flags" class="flags">
  <table class="layout-table">
          <tbody class="edit-hide"><tr>
    <td class="flag-setter"><div class="vcard vcard_452604" ><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">mwobensmith</span></a>
</div>
    </td>

    <td class="flag-name">
        <a href="#c47"
            class="rel-time-title activity-ref"
            title="7 years ago"
        data-time="1409690118"
      >qe-verify</a>
    </td>

    <td class="flag-value">-
    </td>

  </tr>
          </tbody>
          <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter"><div class="vcard vcard_452604" ><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">mwobensmith</span></a>
</div>
    </td>

    <td class="flag-name">
      <label title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually" for="flag-967361">qe-verify</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag-967361-dirty">
      <select id="flag-967361" name="flag-967361"
        title="qe-verify: ? ➜ request to assess whether the bug should be tested manually
qe-verify: + ➜ request to verify the bug manually
qe-verify: – ➜ the bug will not/can not be verified manually"
          disabled
        class="bug-flag">
            <option value="-" selected>-</option>
      </select>
    </td>


  </tr>
          </tbody>
    <tbody class="edit-show" style="display:none"><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?" for="flag_type-930">behind-pref</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-930-dirty">
      <select id="flag_type-930" name="flag_type-930"
        title="Is this bug/feature enabled in a release by a pref flag (see https://github.com/mozilla/bug-handling/blob/master/policy/feature-flags.md)?"
        class="bug-flag">
          <option value="X"></option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag tracking inclusion in the desktop Firefox product backlog." for="flag_type-846">firefox-backlog</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-846-dirty">
      <select id="flag_type-846" name="flag_type-846"
        title="Flag tracking inclusion in the desktop Firefox product backlog."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug." for="flag_type-803">sec-bounty</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-803-dirty">
      <select id="flag_type-803" name="flag_type-803"
        title="Flag is used to track security bug bounty nominations. Mail security(at)mozilla.org to nominate a bug."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame." for="flag_type-913">sec-bounty-hof</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-913-dirty">
      <select id="flag_type-913" name="flag_type-913"
        title="Flag is used to track whether the bug report is eligible for inclusion in the Bug Bounty Hall of Fame."
          disabled
        class="bug-flag">
          <option value="X"></option>
      </select>
    </td>


  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-787">in-qa-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-787-dirty">
      <select id="flag_type-787" name="flag_type-787"
        title="Whether the bug has a testcase in the qa test suite or not. Set it to &quot;in-qa-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-qa-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-qa-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>

      <td class="flag-requestee">
        <div id="requestee_type-787-container" style="display:none"><input
    name="requestee_type-787"
    value="" class="requestee bz_autocomplete_user"  id="requestee_type-787" 
  >
        </div>
      <td>

  </tr><tr>
    <td class="flag-setter">
    </td>

    <td class="flag-name">
      <label title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword." for="flag_type-37">in-testsuite</label>
    </td>

    <td class="flag-value">
      <input type="hidden" id="flag_type-37-dirty">
      <select id="flag_type-37" name="flag_type-37"
        title="Whether the bug has a testcase in the test suite or not. Set it to &quot;in-testsuite?&quot; if the bug needs a testcase (only set this if the bug actually *needs* a testcase - not all bugs do, even layout bugs!), set it to &quot;in-testsuite+&quot; if the bug has an appropriate testcase, and set it to &quot;in-testsuite-&quot; if the bug doesn't need an explicit testcase (e.g. for code cleanup bugs). Only QA actively working on test cases in the component should use this keyword."
        class="bug-flag">
          <option value="X"></option>
            <option value="?" >?</option>
            <option value="+" >+</option>
            <option value="-" >-</option>
      </select>
    </td>


  </tr>
    </tbody>
  </table>
</div>
        </span>
    </div>

  
</div>
</div>

  
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-crash-data"
>
    <header id="module-crash-data-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Crash Data section"
           data-label-collapsed="Expand Crash Data section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-crash-data-content"
             aria-expanded="false"
             aria-labeledby="module-crash-data-title"
             aria-describedby="module-crash-data-subtitle"></div>
        <h2 class="module-title" id="module-crash-data-title">Crash Data</h2>
      </div>
    </header>
  <div class="module-content" id="module-crash-data-content" style="display:none"
  ><div class="field edit-show" id="field-cf_crash_signature" style="display:none"
>
    <div class="name">Signature:
    </div>


  
    <div class="value">
        <span id="field-value-cf_crash_signature">
        </span>
    </div>

  
</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-security"
>
    <header id="module-security-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Security section"
           data-label-collapsed="Expand Security section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-security-content"
             aria-expanded="false"
             aria-labeledby="module-security-title"
             aria-describedby="module-security-subtitle"></div>
        <h2 class="module-title" id="module-security-title">Security</h2>
          <h3 class="module-subtitle" id="module-security-subtitle">
            (public)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-security-content" style="display:none"
  ><div class="groups edit-hide">
    This bug is publicly visible.
</div>

<div class="groups edit-show" style="display:none">


</div>
  </div>
</section>


<section class="module edit-show" style="display:none" id="module-user-story" data-non-stick="1"
>
    <header id="module-user-story-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse User Story section"
           data-label-collapsed="Expand User Story section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-user-story-content"
             aria-expanded="false"
             aria-labeledby="module-user-story-title"
             aria-describedby="module-user-story-subtitle"></div>
        <h2 class="module-title" id="module-user-story-title">User Story</h2>
      </div>
    </header>
  <div class="module-content" id="module-user-story-content" style="display:none"
  >
    <pre id="user-story"></pre>
  </div>
</section>







<section class="module" id="module-attachments"
>
    <header id="module-attachments-header" class="module-header">
      <div class="module-latch"
           data-label-expanded="Collapse Attachments section"
           data-label-collapsed="Expand Attachments section">
        <div class="module-spinner" role="button" tabindex="0"
             aria-controls="module-attachments-content"
             aria-expanded="true"
             aria-labeledby="module-attachments-title"
             aria-describedby="module-attachments-subtitle"></div>
        <h2 class="module-title" id="module-attachments-title">Attachments</h2>
          <h3 class="module-subtitle" id="module-attachments-subtitle">
            (3 files, 2 obsolete files)
          </h3>
      </div>
    </header>
  <div class="module-content" id="module-attachments-content"
  ><table role="table" class="layout-table" id="attachments">
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8475360">patch</a>
        </div>
        <div>
            <a href="#c8" class="attach-time activity-ref"><span class="rel-time" title="2014-08-19 12:04 PDT" data-time="1408475093">7 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_349244" ><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div></span>
        </div>
        <div class="attach-info">30.14 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_14661" ><span class="fn">briansmith</span>
</div>:
              <a href="#c14"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1408475093"
            >
              review-</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_32546" ><span class="fn">mcmanus</span>
</div>:
              <a href="#c15"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1408544963"
            >
              feedback+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8475360&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8475360&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8475360">Splinter Review</a>
    </tr>
    <tr class=" attach-obsolete attach-patch
    " style="display:none">
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8476050">patch v2</a>
        </div>
        <div>
            <a href="#c16" class="attach-time activity-ref"><span class="rel-time" title="2014-08-20 10:26 PDT" data-time="1408555578">7 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_349244" ><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div></span>
        </div>
        <div class="attach-info">5.73 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_14661" ><span class="fn">briansmith</span>
</div>:
              <a href="#c25"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1408555578"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_32546" ><span class="fn">mcmanus</span>
</div>:
              <a href="#c18"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1408555594"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_433899" ><span class="fn">cviecco</span>
</div>:
              <a href="#c27"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1408576831"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8476050&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8476050&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8476050">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8476805">patch v2.1</a>
        </div>
        <div>
            <a href="#c29" class="attach-time activity-ref"><span class="rel-time" title="2014-08-21 10:40 PDT" data-time="1408642807">7 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_349244" ><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div></span>
        </div>
        <div class="attach-info">6.36 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_349244" ><span class="fn">keeler</span>
</div>:
              <a href="#c29"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1408642807"
            >
              review+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8476805&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8476805&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8476805">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8477072">patch for beta</a>
        </div>
        <div>
            <a href="#c35" class="attach-time activity-ref"><span class="rel-time" title="2014-08-21 16:52 PDT" data-time="1408665152">7 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_349244" ><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div></span>
        </div>
        <div class="attach-info">6.60 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_32546" ><span class="fn">mcmanus</span>
</div>:
              <a href="#a1398548_32546"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1408665152"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_424995" ><span class="fn">lmandel</span>
</div>:
              <a href="#c39"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1408665152"
            >
              approval-mozilla-beta-</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8477072&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8477072&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8477072">Splinter Review</a>
    </tr>
    <tr class=" attach-patch
    " >
      <td class="attach-desc-td">
        <div class="attach-desc">
            <a href="/attachment.cgi?id=8478701">patch for aurora</a>
        </div>
        <div>
            <a href="#c40" class="attach-time activity-ref"><span class="rel-time" title="2014-08-25 16:48 PDT" data-time="1409010519">7 years ago</span></a>
          <span class="attach-author"><div class="vcard vcard_349244" ><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div></span>
        </div>
        <div class="attach-info">6.33 KB,
          patch        </div>
      </td>
      <td>
          <div class="attach-flag"><div class="vcard vcard_349244" ><span class="fn">keeler</span>
</div>:
              <a href="#c40"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1409010519"
            >
              review+</a>
          </div>
          <div class="attach-flag"><div class="vcard vcard_495955" ><span class="fn">Sylvestre</span>
</div>:
              <a href="#a1771016_495955"
                  class="flag-name-status rel-time-title activity-ref"
                  title="7 years ago"
              data-time="1409010583"
            >
              approval-mozilla-aurora+</a>
          </div>
      </td>
      <td class="attach-actions">
        <a href="/attachment.cgi?id=8478701&amp;action=edit">Details</a>
          | <a href="/attachment.cgi?id=8478701&amp;action=diff">Diff</a>&#x0020; |
  <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8478701">Splinter Review</a>
    </tr>
</table>

<footer id="attachments-footer">
  <div id="attachments-actions">
      <button type="button" id="attachments-obsolete-btn" class="secondary">Show Obsolete</button>
  </div>
  
</footer>
  </div>
</section>



<script nonce="qXkOlCdrz2yaa9qxw0DXikpKfWkFBcTgkt7xV0Y2Bn02yVJV">
  init_module_visibility();
</script>



<meta name="firefox-versions" content="{&quot;FIREFOX_AURORA&quot;:&quot;&quot;,&quot;FIREFOX_DEVEDITION&quot;:&quot;94.0b9&quot;,&quot;FIREFOX_ESR&quot;:&quot;78.15.0esr&quot;,&quot;FIREFOX_ESR_NEXT&quot;:&quot;91.2.0esr&quot;,&quot;FIREFOX_NIGHTLY&quot;:&quot;95.0a1&quot;,&quot;FIREFOX_PINEBUILD&quot;:&quot;&quot;,&quot;LAST_MERGE_DATE&quot;:&quot;2021-10-04&quot;,&quot;LAST_RELEASE_DATE&quot;:&quot;2021-10-05&quot;,&quot;LAST_SOFTFREEZE_DATE&quot;:&quot;2021-09-30&quot;,&quot;LATEST_FIREFOX_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_OLDER_VERSION&quot;:&quot;3.6.28&quot;,&quot;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&quot;:&quot;94.0b9&quot;,&quot;LATEST_FIREFOX_VERSION&quot;:&quot;93.0&quot;,&quot;NEXT_MERGE_DATE&quot;:&quot;2021-11-01&quot;,&quot;NEXT_RELEASE_DATE&quot;:&quot;2021-11-02&quot;,&quot;NEXT_SOFTFREEZE_DATE&quot;:&quot;2021-10-28&quot;}">


<div id="comment-actions">
    <button type="button" id="bottom-btn" class="secondary" aria-label="Go to Page Bottom">Bottom &darr;</button>
  <div class="dropdown">
    <button type="button" id="comment-tags-btn" aria-haspopup="true" aria-label="Tags"
      aria-expanded="false" aria-controls="comment-tags-menu" class="dropdown-button minor">Tags &#9662;</button>
    <ul id="comment-tags-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a role="menuitem" tabindex="-1" data-comment-tag="">Reset</a>
      </li>
    </ul>
  </div>
  <div class="dropdown">
    <button type="button" id="view-menu-btn" aria-haspopup="true" aria-label="Timeline"
      aria-expanded="false" aria-controls="view-menu" class="dropdown-button minor">Timeline &#9662;</button>
    <ul id="view-menu" role="menu" tabindex="0" class="dropdown-content left" style="display:none">
      <li role="presentation">
        <a id="view-reset" role="menuitem" tabindex="-1">Reset</a>
      </li>
      <li role="separator"></li>
      <li role="presentation">
        <a id="view-collapse-all" role="menuitem" tabindex="-1">Collapse All</a>
      </li>
      <li role="presentation">
        <a id="view-expand-all" role="menuitem" tabindex="-1">Expand All</a>
      </li>
      <li role="presentation">
        <a id="view-comments-only" role="menuitem" tabindex="-1">Comments Only</a>
      </li>
    </ul>
   </div>
</div>
<div class="change-set" id="c0"><div class="comment" data-id="9144450" data-no="0"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-0" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" ><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" ><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-0"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-0" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c0">Description</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-05 12:47 PDT" data-time="1407268049">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-0">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-0" data-comment-id="9144450">I was informed of a potential key pinning bypass attack that I can confirm we are vulnerable to. The attack uses spdy/h2 connection-coalescing to bypass the key pin.

Assume a.example.com is pinned to key-a and b.example.com is pinned to key-b

1] goto host <a rel="nofollow" href="https://a.example.com/">https://a.example.com/</a>  - it has a cert valid for *.example.com on 1.1.1.1 and uses key-a.. it negotiates a spdy connection that stays alive.

2] ask for <a rel="nofollow" href="https://b.example.com/">https://b.example.com/</a> - it resolves also to 1.1.1.1. Under the spdy/h2 coalescing rules b can use the spdy connection from step 1 because it is the same host (1.1.1.1) and that connection has a valid cert for b.example.com (it was a wildcard) so it can be &quot;joined&quot;

the problem is that b.example.com/ is dispatched on the connection that used key-a and b is supposed to be pinned to key-b.

Before the &quot;joining&quot; we can just check if the connection from step 1 has a full cert chain that satisfies any pins for b.example.com - unfortunately getting the full cert chain requires some work especially with resumed connections (<a class="bz_bug_link
          bz_status_ASSIGNED"
   title="ASSIGNED - Cache the peer's intermediate CA certificates in SSL session ID"
   href="/show_bug.cgi?id=731478">bug 731478</a>)

Realistically, this is probably not a big problem because the configuration is somewhat non-sensical. If these hosts are really eligible for coalescing (which is being done now on &lt;=ff31 which doesn't have any key pinning checks) then you would expect they would be pinned to the same key.

The inclination between keeler, monica, and myself was to try and get this in 34 and ride the trains with the fix.</pre></div><div class="change-set" id="a1008_349244"><div class="change" id="aa1008_349244">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1008_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_349244" id="a1008_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1008_349244"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1008_349244">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a1008_349244">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-05 13:04 PDT" data-time="1407269057">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - save the verified certificate chain from TLS connections on TransportSecurityInfo (or SSLStatus or something)"
   href="/show_bug.cgi?id=1049110">1049110</a></div></div></div><div class="change-set" id="c1"><div class="comment" data-id="9144789" data-no="1"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-1" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_237291" id="a1008_349244"><img src="https://secure.gravatar.com/avatar/a1247da27c1c5ae6eb2830a4535d3d54?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_237291" id="a1008_349244"><a class="email disabled" href="/user_profile?user_id=237291" > <span class="fna">[:mmc] Monica Chew (no longer reading bugmail)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-1"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-1" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c1">Comment 1</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-05 13:56 PDT" data-time="1407272189">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-1">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-1" data-comment-id="9144789">I just told Garrett about this bug and his initial thought was that the stuff that he is doing for ssl error reporting is easy to modify to carry along the cert chain regardless of verification success or failure.</pre></div><div class="change-set" id="c2"><div class="comment" data-id="9144796" data-no="2"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-2" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_14661" id="a1008_349244"><img src="https://secure.gravatar.com/avatar/708ad4f6494aae9c1711a823f447d415?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_14661" id="a1008_349244"><a class="email " href="/user_profile?user_id=14661" > <span class="fna">Brian Smith (:briansmith, :bsmith, use NEEDINFO?)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-2"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-2" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c2">Comment 2</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-05 13:57 PDT" data-time="1407272267">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-2">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-2" data-comment-id="9144796">(In reply to Patrick McManus [:mcmanus] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c0">comment #0</a>)
<span class="quote">&gt; 1] goto host <a rel="nofollow" href="https://a.example.com/">https://a.example.com/</a>  - it has a cert valid for *.example.com
&gt; on 1.1.1.1 and uses key-a.. it negotiates a spdy connection that stays alive.
&gt; 
&gt; 2] ask for <a rel="nofollow" href="https://b.example.com/">https://b.example.com/</a> - it resolves also to 1.1.1.1. Under the
&gt; spdy/h2 coalescing rules b can use the spdy connection from step 1 because
&gt; it is the same host (1.1.1.1) and that connection has a valid cert for
&gt; b.example.com (it was a wildcard) so it can be &quot;joined&quot;
&gt; 
&gt; the problem is that b.example.com/ is dispatched on the connection that used
&gt; key-a and b is supposed to be pinned to key-b.
&gt; 
&gt; Before the &quot;joining&quot; we can just check if the connection from step 1 has a
&gt; full cert chain that satisfies any pins for b.example.com - unfortunately
&gt; getting the full cert chain requires some work especially with resumed
&gt; connections (<a class="bz_bug_link
          bz_status_ASSIGNED"
   title="ASSIGNED - Cache the peer's intermediate CA certificates in SSL session ID"
   href="/show_bug.cgi?id=731478">bug 731478</a>)
&gt; 
&gt; Realistically, this is probably not a big problem because the configuration
&gt; is somewhat non-sensical. If these hosts are really eligible for coalescing
&gt; (which is being done now on &lt;=ff31 which doesn't have any key pinning
&gt; checks) then you would expect they would be pinned to the same key.</span >

Consider a connection to <a rel="nofollow" href="https://attacker.com/">https://attacker.com/</a>, which has a certificate with SANs for both attacker.com and victim.com. The attacker is MitMing your DNS so that DNS resolves to the same IP address for both. Thus, the attacker can now induce Firefox to coalesce victim.com onto attacker.com's connection, regardless of pinning. The attack requires a trusted CA to issue a certificate with SANs for both attacker.com and victim.com, but that's exactly the type of problem (mis-issuance) that key pinning is supposed to protect websites from.</pre></div><div class="change-set" id="c3"><div class="comment" data-id="9144844" data-no="3"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-3" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_438654" id="a1008_349244"><img src="https://secure.gravatar.com/avatar/46e6b92a08f8b5ece24df3416e36f4cc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_438654" id="a1008_349244"><a class="email " href="/user_profile?user_id=438654" > <span class="fna">Martin Thomson [:mt:]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-3"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-3" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c3">Comment 3</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-05 14:06 PDT" data-time="1407272811">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-3">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-3" data-comment-id="9144844">(In reply to Brian Smith (:briansmith, was :bsmith; NEEDINFO? for response) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c2">comment #2</a>)
<span class="quote">&gt; ... that's
&gt; exactly the type of problem (mis-issuance) that key pinning is supposed to
&gt; protect websites from.</span >

Indeed.  How far back does this go?  I'm guessing that this is going to affect SPDY all the way back.  HTTP/2 bothers me less, since it's still off by default.

We should probably consider uplift for SPDY.</pre></div><div class="change-set" id="c4"><div class="comment" data-id="9147741" data-no="4"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-4" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a1008_349244"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" id="a1008_349244"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-4"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-4" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c4">Comment 4</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-06 06:32 PDT" data-time="1407331943">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-4">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-4" data-comment-id="9147741">(In reply to Martin Thomson [:mt] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c3">comment #3</a>)
m.
<span class="quote">&gt; 
&gt; Indeed.  How far back does this go?  </span >

We don't have any key pinning, as I understand it, until firefox-32 (on beta).</pre></div><div class="change-set" id="c5"><div class="comment" data-id="9173531" data-no="5"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-5" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_406194" id="a1008_349244"><img src="https://secure.gravatar.com/avatar/0a70c84cd33dba0151fe15f2f8773137?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_406194" id="a1008_349244"><a class="email " href="/user_profile?user_id=406194" > <span class="fna">Andrew McCreight [:mccr8]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-5"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-5" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c5">Comment 5</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-12 10:33 PDT" data-time="1407864834">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-5">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-5" data-comment-id="9173531">David, do you know what security rating this should get? Thanks.
<a rel="nofollow" href="https://wiki.mozilla.org/Security_Severity_Ratings">https://wiki.mozilla.org/Security_Severity_Ratings</a></pre><div class="activity"><div class="change">Flags: needinfo?(dkeeler)</div></div></div><div class="change-set" id="c6"><div class="comment" data-id="9175815" data-no="6"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-6" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1008_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1008_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-6"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-6" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c6">Comment 6</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-12 16:39 PDT" data-time="1407886757">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-6">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-6" data-comment-id="9175815">Maybe sec-moderate? (I'm thinking this falls under &quot;Missing Additional Security Controls&quot; since it's a pinning bypass)</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dkeeler)</span></div></div></div><div class="change-set" id="c7"><div class="comment" data-id="9175994" data-no="7"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-7" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_406194" id="a1008_349244"><img src="https://secure.gravatar.com/avatar/0a70c84cd33dba0151fe15f2f8773137?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_406194" id="a1008_349244"><a class="email " href="/user_profile?user_id=406194" > <span class="fna">Andrew McCreight [:mccr8]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-7"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-7" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c7">Comment 7</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-12 17:35 PDT" data-time="1407890145">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-7">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-7" data-comment-id="9175994">Thanks.  Feel free to adjust as appropriate.</pre><div class="activity"><div class="change">Keywords: <a href="/buglist.cgi?keywords=sec-moderate&amp;resolution=---">sec-moderate</a></div></div></div><div class="change-set" id="c8"><div class="comment" data-id="9202484" data-no="8"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-8" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1008_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1008_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-8"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-8" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c8">Comment 8</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-19 12:04 PDT" data-time="1408475093">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-8">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8475360"
         class="attachment patch obsolete"
         data-id="8475360" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1049095-verifiedCertChain.diff">
      <meta itemprop="contentSize" content="30862">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8475360">
          <a class="link" href="attachment.cgi?id=8475360&amp;action=diff">
        <span id="att-8475360-description" itemprop="description">patch</span></a> (obsolete)
        — <a href="attachment.cgi?id=8475360&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8475360">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-8" data-comment-id="9202484">This patch saves the verified cert chain for each TransportSecurityInfo so it can be used later to see if pinning checks would pass for the host that is attempting to join. The unfortunate problem is that for session tickets, we don't have direct access to the previously-validated chain, so we have to add a hash table that keeps track of validated chains from hosts that could possibly initiate a session resumption. Then, we don't want that to grow unboundedly, so we have to cull it periodically (NSS appears to save tickets for 24 hours).</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8475360&amp;action=edit"
           title="patch"
           class=""
        >Attachment #8475360</a> -
        Flags: review?(brian)</div></div></div><div class="change-set" id="a1207062_349244"><div class="change" id="aa1207062_349244">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1207062_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_349244" id="a1207062_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1207062_349244"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1207062_349244">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a1207062_349244">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-19 12:05 PDT" data-time="1408475111">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8475360&amp;action=edit"
           title="patch"
           class=""
        >Attachment #8475360</a> -
        Flags: review?(mcmanus)</div></div></div><div class="change-set" id="c9"><div class="comment" data-id="9203176" data-no="9"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-9" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1207062_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1207062_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-9"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-9" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c9">Comment 9</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-19 14:00 PDT" data-time="1408482034">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-9">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-9" data-comment-id="9203176">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>
patch

bsmedberg, this could have a performance impact in that it will in general require more memory. Also, I would appreciate a look at the usage of threads/timers. I realize you have a long review queue, so feel free to redirect this review.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8475360&amp;action=edit"
           title="patch"
           class=""
        >Attachment #8475360</a> -
        Flags: review?(benjamin)</div></div></div><div class="change-set" id="c10"><div class="comment" data-id="9203212" data-no="10"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-10" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_7044" id="a1207062_349244"><img src="https://secure.gravatar.com/avatar/3301a62f3707d6bcef9542d316fb587f?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_7044" id="a1207062_349244"><a class="email " href="/user_profile?user_id=7044" > <span class="fna">Benjamin Smedberg</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-10"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-10" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c10">Comment 10</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-19 14:05 PDT" data-time="1408482314">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-10">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-10" data-comment-id="9203212">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>
patch

I really don't have the ability to review this. mcmanus is a good reviewer: if you have specific threading or memory-use questions, nathan froyd and maybe nnethercote may be able to help as well.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8475360&amp;action=edit"
           title="patch"
           class=""
        >Attachment #8475360</a> -
        Flags: <span class="activity-deleted">review?(benjamin)</span></div></div></div><div class="change-set" id="c11"><div class="comment" data-id="9203346" data-no="11"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-11" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_237291" id="a1207062_349244"><img src="https://secure.gravatar.com/avatar/a1247da27c1c5ae6eb2830a4535d3d54?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_237291" id="a1207062_349244"><a class="email disabled" href="/user_profile?user_id=237291" > <span class="fna">[:mmc] Monica Chew (no longer reading bugmail)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-11"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-11" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c11">Comment 11</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-19 14:29 PDT" data-time="1408483766">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-11">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-11" data-comment-id="9203346">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>
patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>:
-----------------------------------------------------------------

::: security/manager/boot/src/PublicKeyPinningService.cpp
&#64;&#64; +320,5 &#64;&#64;
<span class="quote">&gt; +  char* evalHost = const_cast&lt;char*&gt;(hostname);
&gt; +  char* evalPart;
&gt; +  // If there is no '.' in the given hostname, we never enter the while loop,
&gt; +  // which prevents pins for unqualified domain names.
&gt; +  while ((evalPart = strchr(evalHost, '.'))) {</span >

This code is repeated in CheckPinsForHostname, can it be refactored?

::: security/manager/ssl/src/nsNSSComponent.cpp
&#64;&#64; +820,5 &#64;&#64;
<span class="quote">&gt;                                                  pinningEnforcementLevel);
&gt;  }
&gt;  
&gt; +/*static*/ CertVerifier::pinning_enforcement_config
&gt; +nsNSSComponent::GetPinningConfig()</span >

GetPinningLevel or GetPinningEnforcementLevel, no need to inherit bad naming from the enum type

::: security/manager/ssl/src/nsNSSIOLayer.cpp
&#64;&#64; +438,5 &#64;&#64;
<span class="quote">&gt; +  CertVerifier::pinning_enforcement_config
&gt; +    pinningLevel = nsNSSComponent::GetPinningConfig();
&gt; +  // Note that verifiedCertChain may be null when ChainHasValidPins is called
&gt; +  // (if, for instance, we resumed a session but couldn't find the chain in the
&gt; +  // ResumedHandshakeInfoTable. This is safe, because ChainHasValidPins will</span >

This is a terrible name, it should be ChainPassesPinningChecks or similar. Also not sure why HostOrSuperdomainHasPins is not part of the check. That way the code is

if (pinningLevel != disabled &amp;&amp; !ChainPassesPinningChecks) {
  // Don't join</pre></div><div class="change-set" id="c12"><div class="comment" data-id="9203383" data-no="12"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-12" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a1207062_349244"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" id="a1207062_349244"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-12"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-12" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c12">Comment 12</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-19 14:34 PDT" data-time="1408484073">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-12">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-12" data-comment-id="9203383">this will be item #1 on wed.. fwiw</pre></div><div class="change-set" id="c13"><div class="comment" data-id="9203423" data-no="13"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-13" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_433899" id="a1207062_349244"><img src="https://secure.gravatar.com/avatar/f64f5c9d2771dc9cdce4de8e39a0df42?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_433899" id="a1207062_349244"><a class="email " href="/user_profile?user_id=433899" > <span class="fna">Camilo Viecco (:cviecco)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-13"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-13" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c13">Comment 13</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-19 14:41 PDT" data-time="1408484469">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-13">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-13" data-comment-id="9203423">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>
patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>:
-----------------------------------------------------------------

::: security/manager/ssl/src/nsNSSIOLayer.cpp
&#64;&#64; +444,5 &#64;&#64;
<span class="quote">&gt; +  nsCOMPtr&lt;nsIX509CertList&gt; verifiedCertChain;
&gt; +  GetVerifiedCertChain(getter_AddRefs(verifiedCertChain));
&gt; +  mozilla::pkix::Time now = mozilla::pkix::Now();
&gt; +  if (pinningLevel != CertVerifier::pinningDisabled &amp;&amp;
&gt; +      PublicKeyPinningService::HostOrSuperdomainHasPins(hostnameFlat.get(), now) &amp;&amp;</span >

I dont see the need for HostOrSuperdomainHasPins. If verifiedCertChain-&gt;GetRawCertList() will return null then just call ChainHasValidPins with a non null empty CERTCertList.
That way we are guaranteed that we only implement the search logic once (a plus once we have dynamic pins)</pre></div><div class="change-set" id="c14"><div class="comment" data-id="9203682" data-no="14"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-14" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_14661" id="a1207062_349244"><img src="https://secure.gravatar.com/avatar/708ad4f6494aae9c1711a823f447d415?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_14661" id="a1207062_349244"><a class="email " href="/user_profile?user_id=14661" > <span class="fna">Brian Smith (:briansmith, :bsmith, use NEEDINFO?)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-14"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-14" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c14">Comment 14</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-19 15:29 PDT" data-time="1408487386">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-14">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-14" data-comment-id="9203682">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>
patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>:
-----------------------------------------------------------------

::: security/manager/ssl/src/nsNSSCallbacks.h
&#64;&#64; +226,5 &#64;&#64;
<span class="quote">&gt;    static void initTable();
&gt;    static SEC_HttpClientFcn sNSSInterfaceTable;
&gt;  };
&gt;  
&gt; +class ResumedHandshakeInfoTable</span >

Why not just finish the work I started for <a class="bz_bug_link
          bz_status_ASSIGNED"
   title="ASSIGNED - Cache the peer's intermediate CA certificates in SSL session ID"
   href="/show_bug.cgi?id=731478">bug 731478</a>? Then you would be able to use SSL_PeerCertificateChain to get the cert chain the libssl fd in JoinConnection for resumed sessions too, without all this complexity.

::: security/manager/ssl/src/nsNSSIOLayer.cpp
&#64;&#64; +438,5 &#64;&#64;
<span class="quote">&gt; +  CertVerifier::pinning_enforcement_config
&gt; +    pinningLevel = nsNSSComponent::GetPinningConfig();
&gt; +  // Note that verifiedCertChain may be null when ChainHasValidPins is called
&gt; +  // (if, for instance, we resumed a session but couldn't find the chain in the
&gt; +  // ResumedHandshakeInfoTable. This is safe, because ChainHasValidPins will</span >

Why not just call unconditionally call CertVerifier::VerifySSLServerCert here, perhaps in a new &quot;local-only&quot; (no OCSP fetching) mode? It seems like the root cause of this problem is that we tried to do a subset of the work that CertVerifier::VerifySSLServerCert is doing here, but we didn't keep this subset in sync with what CertVerifier::VerifySSLServerCert does. It seems likely that in the future, similar problems will come up as we extend the behavior of CertVerifier to do more kinds of checks.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8475360&amp;action=edit"
           title="patch"
           class=""
        >Attachment #8475360</a> -
        Flags: review?(brian) &rarr; review-</div></div></div><div class="change-set" id="c15"><div class="comment" data-id="9206565" data-no="15"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-15" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a1207062_349244"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" id="a1207062_349244"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-15"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-15" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c15">Comment 15</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 07:29 PDT" data-time="1408544963">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-15">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-15" data-comment-id="9206565">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>
patch

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8475360" name="attach_8475360" title="patch">attachment 8475360</a> <a href="/attachment.cgi?id=8475360&amp;action=edit" title="patch">[details]</a> <a href="/attachment.cgi?id=8475360&amp;action=diff" title="patch">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8475360'>[review]</a>:
-----------------------------------------------------------------

I've built and tested the patch and, other than the assert mentioned below, we still join connections on google.com which is in the pin list. cool.

A chief concern here is the unbounded size of the cert chain cache in the resumed handshake info table (it is bounded by time, but not size). Do we have any sense of mean cert chain sizes and the distribution of how many people collect in 24 hrs?

I do think you can effectively bound it with an lru. Just store all the entries as lru-list with a hash index for quick lookups and when a new entry makes the list exceed a configured max size (variable by platform), drop the lru to make room. At time of use in joinConnection() if the cert chain can't be found, pessimistically don't join the connection. It would be nice to have data, but I bet you will have a high hit rate while knowing the max size. You can still walk the list periodically to toss out things over a day old.

::: security/manager/ssl/src/nsNSSComponent.cpp
&#64;&#64; +825,5 &#64;&#64;
<span class="quote">&gt; +{
&gt; +  // Default pinning enforcement level is disabled.
&gt; +  CertVerifier::pinning_enforcement_config pinningLevel =
&gt; +    static_cast&lt;CertVerifier::pinning_enforcement_config&gt;
&gt; +      (Preferences::GetInt(&quot;security.cert_pinning.enforcement_level&quot;,</span >

this isn't the main thread :(

#0  0x00007f98d0678d8d in nanosleep () at ../sysdeps/unix/syscall-template.S:81
#1  0x00007f98d0678c24 in __sleep (seconds=0) at ../sysdeps/unix/sysv/linux/sleep.c:137
#2  0x00007f98cab3d8ad in ah_crap_handler (signum=11) at ../../../gecko-dev/toolkit/xre/nsSigHandlers.cpp:88
#3  0x00007f98cab1b731 in nsProfileLock::FatalSignalHandler (signo=11, info=0x7f98b75fdd70, context=0x7f98b75fdc40) at /home/mcmanus/src/mozilla2/wd/gecko-dev/profile/dirserviceprovider/nsProfileLock.cpp:185
#4  0x00007f98cb97b42f in AsmJSFaultHandler (signum=11, info=0x7f98b75fdd70, context=0x7f98b75fdc40) at ../../../gecko-dev/js/src/asmjs/AsmJSSignalHandlers.cpp:978
#5  &lt;signal handler called&gt;
#6  mozilla::Preferences::InitStaticMembers () at ../../../gecko-dev/modules/libpref/Preferences.cpp:443
#7  0x00007f98c6f9e682 in mozilla::Preferences::GetInt (aPref=0x7f98cc9af349 &lt;.L.str41&gt; &quot;security.cert_pinning.enforcement_level&quot;, aResult=0x7f98b75fe0f0) at ../../../gecko-dev/modules/libpref/Preferences.cpp:1395
#8  0x00007f98c6f328b5 in mozilla::Preferences::GetInt (aPref=0x7f98cc9af349 &lt;.L.str41&gt; &quot;security.cert_pinning.enforcement_level&quot;, aDefault=0) at ../../dist/include/mozilla/Preferences.h:115
#9  0x00007f98ca9459d9 in nsNSSComponent::GetPinningConfig () at ../../../../../gecko-dev/security/manager/ssl/src/nsNSSComponent.cpp:829
#10 0x00007f98ca90bf5e in nsNSSSocketInfo::JoinConnection (this=0x7f9895eb8380, npnProtocol=..., hostname=..., port=443, _retval=0x7f98b75fe41f) at ../../../../../gecko-dev/security/manager/ssl/src/nsNSSIOLayer.cpp:446
#11 0x00007f98ca90c175 in non-virtual thunk to nsNSSSocketInfo::JoinConnection(nsACString_internal const&amp;, nsACString_internal const&amp;, int, bool*) () at /home/mcmanus/src/mozilla2/wd/ccache/data/tmp/nsNSSIOLay.tmp.ds9.842.ii:467

::: security/manager/ssl/src/nsNSSIOLayer.cpp
&#64;&#64; +438,5 &#64;&#64;
<span class="quote">&gt; +  CertVerifier::pinning_enforcement_config
&gt; +    pinningLevel = nsNSSComponent::GetPinningConfig();
&gt; +  // Note that verifiedCertChain may be null when ChainHasValidPins is called
&gt; +  // (if, for instance, we resumed a session but couldn't find the chain in the
&gt; +  // ResumedHandshakeInfoTable. This is safe, because ChainHasValidPins will</span >

I think brian's suggestion here about using VerifySSLServerCert is very good.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8475360&amp;action=edit"
           title="patch"
           class=""
        >Attachment #8475360</a> -
        Flags: review?(mcmanus) &rarr; feedback+</div></div></div><div class="change-set" id="c16"><div class="comment" data-id="9207633" data-no="16"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-16" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1207062_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1207062_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-16"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-16" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c16">Comment 16</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 10:26 PDT" data-time="1408555578">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-16">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8476050"
         class="attachment patch obsolete"
         data-id="8476050" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1049095-reverify.diff">
      <meta itemprop="contentSize" content="5868">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8476050">
          <a class="link" href="attachment.cgi?id=8476050&amp;action=diff">
        <span id="att-8476050-description" itemprop="description">patch v2</span></a> (obsolete)
        — <a href="attachment.cgi?id=8476050&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8476050">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-16" data-comment-id="9207633">This patch is much better. I realized that as long as we're saving intermediates from successful connections, we'll be able to re-verify certificates from successful connections. (Unfortunately, this won't always work for private-browsing connections, since we don't save those intermediates.)</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8475360&amp;action=edit"
           title="patch"
           class=""
        >Attachment #8475360</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8476050&amp;action=edit"
           title="patch v2"
           class=""
        >Attachment #8476050</a> -
        Flags: review?(brian)</div></div></div><div class="change-set" id="a1287545_349244"><div class="change" id="aa1287545_349244">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287545_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_349244" id="a1287545_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1287545_349244"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1287545_349244">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a1287545_349244">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 10:26 PDT" data-time="1408555594">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8476050&amp;action=edit"
           title="patch v2"
           class=""
        >Attachment #8476050</a> -
        Flags: review?(mcmanus)</div></div></div><div class="change-set" id="a1287561_349244"><div class="change" id="aa1287561_349244">
    <table class="layout-table change-head assignee" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
            <span class="user-role">Assignee</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1287561_349244"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1287561_349244">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a1287561_349244">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 10:26 PDT" data-time="1408555610">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">No longer depends on: <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED DUPLICATE - save the verified certificate chain from TLS connections on TransportSecurityInfo (or SSLStatus or something)"
   href="/show_bug.cgi?id=1049110">1049110</a></div></div></div><div class="change-set" id="c17"><div class="comment" data-id="9208003" data-no="17"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-17" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" id="a1287561_349244"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-17"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-17" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c17">Comment 17</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 11:24 PDT" data-time="1408559042">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-17">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-17" data-comment-id="9208003">(In reply to David Keeler (:keeler) [use needinfo?] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c16">comment #16</a>)
<span class="quote">&gt; Created <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>
&gt; patch v2
&gt; 
&gt; This patch is much better. I realized that as long as we're saving
&gt; intermediates from successful connections, we'll be able to re-verify
&gt; certificates from successful connections. </span >

wow.</pre></div><div class="change-set" id="c18"><div class="comment" data-id="9208240" data-no="18"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-18" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" id="a1287561_349244"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-18"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-18" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c18">Comment 18</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 12:04 PDT" data-time="1408561496">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-18">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-18" data-comment-id="9208240">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>
patch v2

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>:
-----------------------------------------------------------------

I tested this and it wfm. I tested the fail path by messing with the intermediate cert directly in gdb and watching the join fail. Other joins succeed where expected.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8476050&amp;action=edit"
           title="patch v2"
           class=""
        >Attachment #8476050</a> -
        Flags: review?(mcmanus) &rarr; review+</div></div></div><div class="change-set" id="c19"><div class="comment" data-id="9209152" data-no="19"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-19" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-19"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-19" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c19">Comment 19</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 14:59 PDT" data-time="1408571986">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-19">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-19" data-comment-id="9209152">Patrick, do you have suggestions for how to write an automated test for this? I see there are some spdy xpcshell tests already, but is there a way to make sure that the test exercises joining connections?</pre><div class="activity"><div class="change">Flags: needinfo?(mcmanus)</div></div></div><div class="change-set" id="c20"><div class="comment" data-id="9209586" data-no="20"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-20" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-20"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-20" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c20">Comment 20</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 16:19 PDT" data-time="1408576781">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-20">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-20" data-comment-id="9209586">Here's a try run, in any case: <a rel="nofollow" href="https://tbpl.mozilla.org/?tree=Try&amp;rev=00be5800bbaf">https://tbpl.mozilla.org/?tree=Try&amp;rev=00be5800bbaf</a></pre></div><div class="change-set" id="c21"><div class="comment" data-id="9209589" data-no="21"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-21" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-21"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-21" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c21">Comment 21</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 16:20 PDT" data-time="1408576831">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-21">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-21" data-comment-id="9209589">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>
patch v2

We're trying to get this ready to be checked in and uplifted. Camilo, if Brian can't get to this today, would you mind reviewing it?</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8476050&amp;action=edit"
           title="patch v2"
           class=""
        >Attachment #8476050</a> -
        Flags: review?(cviecco)</div></div></div><div class="change-set" id="c22"><div class="comment" data-id="9209707" data-no="22"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-22" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_237291" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/a1247da27c1c5ae6eb2830a4535d3d54?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_237291" id="a1287561_349244"><a class="email disabled" href="/user_profile?user_id=237291" > <span class="fna">[:mmc] Monica Chew (no longer reading bugmail)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-22"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-22" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c22">Comment 22</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 16:49 PDT" data-time="1408578571">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-22">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-22" data-comment-id="9209707">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>
patch v2

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>:
-----------------------------------------------------------------

fwiw, lgtm.</pre></div><div class="change-set" id="c23"><div class="comment" data-id="9210214" data-no="23"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-23" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_373085" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/0f471505131b1c419602ba75cfa91397?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_373085" id="a1287561_349244"><a class="email " href="/user_profile?user_id=373085" > <span class="fna">Richard Barnes [:rbarnes]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-23"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-23" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c23">Comment 23</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 19:51 PDT" data-time="1408589514">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-23">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-23" data-comment-id="9210214">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>
patch v2

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>:
-----------------------------------------------------------------

The only thing that concerns me is this:

<span class="quote">&gt; (although not during private browsing mode)</span >

Just to confirm, in private browsing mode:
-- CertVerifier will not find the intermediate certs
-- So the verification will fail
-- So the connections will not coalesce (they'll just continue independently)

If that's correct, LGTM.</pre></div><div class="change-set" id="c24"><div class="comment" data-id="9210442" data-no="24"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-24" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-24"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-24" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c24">Comment 24</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 21:07 PDT" data-time="1408594055">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-24">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-24" data-comment-id="9210442">Yes, that's what I believe will happen.</pre></div><div class="change-set" id="c25"><div class="comment" data-id="9210560" data-no="25"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-25" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_14661" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/708ad4f6494aae9c1711a823f447d415?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_14661" id="a1287561_349244"><a class="email " href="/user_profile?user_id=14661" > <span class="fna">Brian Smith (:briansmith, :bsmith, use NEEDINFO?)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-25"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-25" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c25">Comment 25</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-20 22:10 PDT" data-time="1408597823">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-25">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-25" data-comment-id="9210560">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>
patch v2

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>:
-----------------------------------------------------------------

This patch is much better.

::: security/certverifier/CertVerifier.cpp
&#64;&#64; +431,5 &#64;&#64;
<span class="quote">&gt;                                    Time time,
&gt;                       /*optional*/ void* pinarg,
&gt;                                    const char* hostname,
&gt;                                    bool saveIntermediatesInPermanentDatabase,
&gt; +                                  bool localOnly,</span >

It is better to pass the flags the same way that they are passed to CertVerifier::VerifyCert, so that when you are reading the calling code, you see &quot;FLAG_LOCAL_ONLY&quot; instead of &quot;true&quot;, which is much clearer.

::: security/manager/ssl/src/SSLServerCertVerification.cpp
&#64;&#64; +758,5 &#64;&#64;
<span class="quote">&gt;    SECOidTag evOidPolicy;
&gt;    rv = certVerifier.VerifySSLServerCert(cert, stapledOCSPResponse,
&gt;                                          time, infoObject,
&gt;                                          infoObject-&gt;GetHostNameRaw(),
&gt; +                                        saveIntermediates, false, nullptr,</span >

I suggest s/false/CertVerifier::FLAG_LOCAL_ONLY/

::: security/manager/ssl/src/nsNSSIOLayer.cpp
&#64;&#64; +433,5 &#64;&#64;
<span class="quote">&gt;    }
&gt;  
&gt; +  // Attempt to verify the joinee's certificate using the joining hostname.
&gt; +  // This ensures that any key pins specified for the joining host are
&gt; +  // satisfied by the joinee's certificate chain.</span >

You should generalize this comment, e.g. by saying &quot;This ensures that any hostname-specific verification logic (e.g. key pinning) is satisfied by the joinee's end-entity certificate.&quot;

Please add this comment, and consider its implications:

&quot;XXX(bug XXXXXXX): The certificate chain built by this verification may be different than the certificate chain originally built during the joined connection's TLS handshake. Consequently, we may report a wrong and/or misleading certificate chain for HTTP transactions coalesced onto this connection. This may become problematic in the future. For example, if/when we begin relying on intermediate certificates being stored in the securityInfo of a cached HTTPS response, that cached certificate chain may actually be the wrong chain. We should consider having JoinConnection return the certificate chain built here, so that the calling Necko code can associate the correct certificate chain with the HTTP transactions it is trying to join onto this connection.&quot;

&#64;&#64; +436,5 &#64;&#64;
<span class="quote">&gt; +  // This ensures that any key pins specified for the joining host are
&gt; +  // satisfied by the joinee's certificate chain.
&gt; +  // This only works because we permanently save the intermediates from
&gt; +  // successfully-verified connections in the certificate database (although
&gt; +  // not during private browsing mode). Additionally, we make sure this</span >

David, whether or not we save certificates into the permanent database actually doesn't matter here. We are concerned about what CERT_CreateSubjectCertList does. CERT_CreateSubjectCertList looks for certificates in two places: (1) the permanent database, and (2) the set of (transient) CERTCertificate instances that have been created.

<a class="bz_bug_link
          bz_status_ASSIGNED"
   title="ASSIGNED - Cache the peer's intermediate CA certificates in SSL session ID"
   href="/show_bug.cgi?id=731478">Bug 731478</a> is relevant because, with that bug fixed, we are guaranteed to have a CERTCertificate instance for every cert in the chain, for both resumed and full handshakes. (Please verify this claim yourself.) This will be true whether or not we're in private browsing mode. (In fact, the fact that this is true in private browsing mode is actually a bug, because we're not supposed to be sharing things across connections like this in private browsing mode.)

In other words, your comment is misleading.

&#64;&#64; +437,5 &#64;&#64;
<span class="quote">&gt; +  // satisfied by the joinee's certificate chain.
&gt; +  // This only works because we permanently save the intermediates from
&gt; +  // successfully-verified connections in the certificate database (although
&gt; +  // not during private browsing mode). Additionally, we make sure this
&gt; +  // verification only uses local information. Since we're on the network</span >

NIT: s/. Since/information; since/

&#64;&#64; +440,5 &#64;&#64;
<span class="quote">&gt; +  // not during private browsing mode). Additionally, we make sure this
&gt; +  // verification only uses local information. Since we're on the network
&gt; +  // thread, we would be blocking on ourselves if we attempted any network i/o.
&gt; +  nsAutoCString hostnameFlat(PromiseFlatCString(hostname));
&gt; +  RefPtr&lt;SharedCertVerifier&gt; certVerifier(GetDefaultCertVerifier());</span >

GetDefaultCertVerifier can return nullptr, and you should handle that.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8476050&amp;action=edit"
           title="patch v2"
           class=""
        >Attachment #8476050</a> -
        Flags: review?(brian) &rarr; review+</div></div></div><div class="change-set" id="c26"><div class="comment" data-id="9212334" data-no="26"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-26" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" id="a1287561_349244"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-26"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-26" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c26">Comment 26</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 06:16 PDT" data-time="1408626992">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-26">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-26" data-comment-id="9212334">(In reply to David Keeler (:keeler) [use needinfo?] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c19">comment #19</a>)
<span class="quote">&gt; Patrick, do you have suggestions for how to write an automated test for
&gt; this? I see there are some spdy xpcshell tests already, but is there a way
&gt; to make sure that the test exercises joining connections?</span >

We would be a little ways away from that..

the spdy and h2 tests use self signed certs and an override - and we never join onto connections with exceptions.

So we would need a xpcshell test that annotates the trust anchor list instead.. and a dns shim to give localhost 3 names.. and then at that point the back end can make assertions about the number of streams that use a particular connection in the same way the multiplexing tests already do.

maybe nick has an easier thought</pre><div class="activity"><div class="change">Flags: needinfo?(mcmanus) &rarr; needinfo?(hurley)</div></div></div><div class="change-set" id="c27"><div class="comment" data-id="9213132" data-no="27"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-27" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_433899" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/f64f5c9d2771dc9cdce4de8e39a0df42?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_433899" id="a1287561_349244"><a class="email " href="/user_profile?user_id=433899" > <span class="fna">Camilo Viecco (:cviecco)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-27"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-27" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c27">Comment 27</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 09:07 PDT" data-time="1408637231">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-27">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-27" data-comment-id="9213132">Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>
patch v2

Review of <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>:
-----------------------------------------------------------------

Brian's comments are spot on.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8476050&amp;action=edit"
           title="patch v2"
           class=""
        >Attachment #8476050</a> -
        Flags: review?(cviecco) &rarr; review+</div></div></div><div class="change-set" id="c28"><div class="comment" data-id="9213650" data-no="28"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-28" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-28"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-28" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c28">Comment 28</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 10:35 PDT" data-time="1408642512">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-28">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-28" data-comment-id="9213650">(In reply to Brian Smith (:briansmith, :bsmith, use NEEDINFO?) from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c25">comment #25</a>)
<span class="quote">&gt; Comment on <span class="bz_obsolete"><a href="/attachment.cgi?id=8476050" name="attach_8476050" title="patch v2">attachment 8476050</a> <a href="/attachment.cgi?id=8476050&amp;action=edit" title="patch v2">[details]</a> <a href="/attachment.cgi?id=8476050&amp;action=diff" title="patch v2">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8476050'>[review]</a>
&gt; ::: security/manager/ssl/src/SSLServerCertVerification.cpp
&gt; &#64;&#64; +758,5 &#64;&#64;
&gt; &gt;    SECOidTag evOidPolicy;
&gt; &gt;    rv = certVerifier.VerifySSLServerCert(cert, stapledOCSPResponse,
&gt; &gt;                                          time, infoObject,
&gt; &gt;                                          infoObject-&gt;GetHostNameRaw(),
&gt; &gt; +                                        saveIntermediates, false, nullptr,
&gt; 
&gt; I suggest s/false/CertVerifier::FLAG_LOCAL_ONLY/</span >

Well, except we don't want local only for this verification, right? (So the flags would be 0 here.)

<span class="quote">&gt; ::: security/manager/ssl/src/nsNSSIOLayer.cpp
&gt; &#64;&#64; +433,5 &#64;&#64;
&gt; Please add this comment, and consider its implications:</span >

Filed <a class="bz_bug_link
          bz_status_NEW"
   title="NEW - JoinConnection should return the certificate chain built so necko can associate it with the joining transaction"
   href="/show_bug.cgi?id=1056935">bug 1056935</a>.
 
<span class="quote">&gt; &#64;&#64; +436,5 &#64;&#64;
&gt; David, whether or not we save certificates into the permanent database
&gt; actually doesn't matter here. We are concerned about what
&gt; CERT_CreateSubjectCertList does. CERT_CreateSubjectCertList looks for
&gt; certificates in two places: (1) the permanent database, and (2) the set of
&gt; (transient) CERTCertificate instances that have been created.
&gt; 
&gt; <a class="bz_bug_link
          bz_status_ASSIGNED"
   title="ASSIGNED - Cache the peer's intermediate CA certificates in SSL session ID"
   href="/show_bug.cgi?id=731478">Bug 731478</a> is relevant because, with that bug fixed, we are guaranteed to
&gt; have a CERTCertificate instance for every cert in the chain, for both
&gt; resumed and full handshakes. (Please verify this claim yourself.) This will
&gt; be true whether or not we're in private browsing mode. (In fact, the fact
&gt; that this is true in private browsing mode is actually a bug, because we're
&gt; not supposed to be sharing things across connections like this in private
&gt; browsing mode.)</span >

Ah, I see. Thanks for the explanation.</pre></div><div class="change-set" id="c29"><div class="comment" data-id="9213676" data-no="29"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-29" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-29"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-29" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c29">Comment 29</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 10:40 PDT" data-time="1408642807">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-29">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8476805"
         class="attachment patch"
         data-id="8476805" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1049095-reverify.diff">
      <meta itemprop="contentSize" content="6508">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8476805">
          <a class="link" href="attachment.cgi?id=8476805&amp;action=diff">
        <span id="att-8476805-description" itemprop="description">patch v2.1</span></a>
        — <a href="attachment.cgi?id=8476805&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8476805">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-29" data-comment-id="9213676">Addressed comments, carrying over r+.
<a rel="nofollow" href="https://hg.mozilla.org/integration/mozilla-inbound/rev/c4d1c0041347">https://hg.mozilla.org/integration/mozilla-inbound/rev/c4d1c0041347</a></pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8476050&amp;action=edit"
           title="patch v2"
           class=""
        >Attachment #8476050</a> -
        Attachment is obsolete: true</div><div class="change">
        <a href="/attachment.cgi?id=8476805&amp;action=edit"
           title="patch v2.1"
           class=""
        >Attachment #8476805</a> -
        Flags: review+</div></div></div><div class="change-set" id="c30"><div class="comment" data-id="9213722" data-no="30"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-30" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_408661" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/a57dffdcf7ec07da4820a55afdc5d3bc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_408661" id="a1287561_349244"><a class="email disabled" href="/user_profile?user_id=408661" > <span class="fna">u408661</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-30"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-30" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c30">Comment 30</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 10:45 PDT" data-time="1408643146">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-30">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-30" data-comment-id="9213722">(In reply to AFK Aug 22- Sep 01 Patrick McManus [:mcmanus] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c26">comment #26</a>)
<span class="quote">&gt; So we would need a xpcshell test that annotates the trust anchor list
&gt; instead.. and a dns shim to give localhost 3 names.. and then at that point
&gt; the back end can make assertions about the number of streams that use a
&gt; particular connection in the same way the multiplexing tests already do.
&gt; 
&gt; maybe nick has an easier thought</span >

Nope, we discussed this pretty thoroughly back when we were first adding the SPDY tests, and came to this same conclusion. We also came to the conclusion that that was *way* too much work, when we already had a hack for the certificate stuff.

That said, it's certainly functionality that I would *like* to be able to test.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(hurley)</span></div></div></div><div class="change-set" id="c31"><div class="comment" data-id="9213737" data-no="31"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-31" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" id="a1287561_349244"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-31"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-31" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c31">Comment 31</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 10:48 PDT" data-time="1408643297">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-31">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-31" data-comment-id="9213737">I g(In reply to Nicholas Hurley [:hurley] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c30">comment #30</a>)
<span class="quote">&gt; (In reply to AFK Aug 22- Sep 01 Patrick McManus [:mcmanus] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c26">comment #26</a>)
&gt; &gt; So we would need a xpcshell test that annotates the trust anchor list
&gt; &gt; instead.. and a dns shim to give localhost 3 names.. and then at that point
&gt; &gt; the back end can make assertions about the number of streams that use a
&gt; &gt; particular connection in the same way the multiplexing tests already do.
&gt; &gt; 
&gt; &gt; maybe nick has an easier thought
&gt; 
&gt; Nope, we discussed this pretty thoroughly back when we were first adding the
&gt; SPDY tests, and came to this same conclusion. We also came to the conclusion
&gt; that that was *way* too much work, when we already had a hack for the
&gt; certificate stuff.
&gt; 
&gt; That said, it's certainly functionality that I would *like* to be able to
&gt; test.</span >

I guess we could make the &quot;don't join on exceptions&quot; code preffable and have the test bypass that particular rule so it could test the other ones.</pre></div><div class="change-set" id="c32"><div class="comment" data-id="9213786" data-no="32"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-32" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-32"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-32" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c32">Comment 32</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 10:54 PDT" data-time="1408643644">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-32">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-32" data-comment-id="9213786">I don't think it would be too much work to set up those tests so that the certificate verifies without any exceptions/overrides. In fact, I did much (all?) of the work already in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - certificate override mechanisms for tests: use onreadystatechange, not nsIBadCertListener2"
   href="/show_bug.cgi?id=846581">bug 846581</a>.</pre></div><div class="change-set" id="c33"><div class="comment" data-id="9214141" data-no="33"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-33" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a1287561_349244"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" id="a1287561_349244"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-33"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-33" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c33">Comment 33</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 12:03 PDT" data-time="1408647797">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-33">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-33" data-comment-id="9214141">(In reply to David Keeler (:keeler) [use needinfo?] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c32">comment #32</a>)
<span class="quote">&gt; I don't think it would be too much work to set up those tests so that the
&gt; certificate verifies without any exceptions/overrides. In fact, I did much
&gt; (all?) of the work already in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - certificate override mechanisms for tests: use onreadystatechange, not nsIBadCertListener2"
   href="/show_bug.cgi?id=846581">bug 846581</a>.</span >

oh that's great. I made <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - h2 coalescing test"
   href="/show_bug.cgi?id=1056987">bug 1056987</a> for a new test and had it block on 846581. A new test would have also had some serious dns pains, but we added a mechanism to specify by pref a whole bunch of aliases for localhost sometime between introducing coalescing and now.</pre></div><div class="change-set" id="c34"><div class="comment" data-id="9215563" data-no="34"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-34" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-34"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-34" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c34">Comment 34</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 16:48 PDT" data-time="1408664930">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-34">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-34" data-comment-id="9215563">[Tracking Requested - why for this release]: Key pinning on twitter could be bypassed by this.</pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox32&amp;o1=isnotempty">status-firefox32</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox32&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox33&amp;o1=isnotempty">status-firefox33</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox33&amp;o1=equals&amp;v1=affected">affected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox32&amp;o1=isnotempty">tracking-firefox32</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox32&amp;o1=equals&amp;v1=%3F">?</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox33&amp;o1=isnotempty">tracking-firefox33</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox33&amp;o1=equals&amp;v1=%3F">?</a></div></div></div><div class="change-set" id="c35"><div class="comment" data-id="9215594" data-no="35"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-35" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1287561_349244"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1287561_349244"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-35"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-35" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c35">Comment 35</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 16:52 PDT" data-time="1408665152">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-35">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8477072"
         class="attachment patch"
         data-id="8477072" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1049095-reverify-beta.diff">
      <meta itemprop="contentSize" content="6762">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8477072">
          <a class="link" href="attachment.cgi?id=8477072&amp;action=diff">
        <span id="att-8477072-description" itemprop="description">patch for beta</span></a>
        — <a href="attachment.cgi?id=8477072&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8477072">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-35" data-comment-id="9215594">Here's a patch for beta. The one issue is that if the user has disabled mozilla::pkix and is using classic verification, the LOCAL_ONLY flag isn't respected (yay NSS). I thought the safe thing to do would be to pessimistically say all connections can't be joined in that case.

Approval Request Comment
[Feature/regressing bug #]: key pinning / spdy connection joining
[User impact if declined]: pinning on twitter will be bypassable
[Describe test coverage new/current, TBPL]: minimal (see earlier comments in this bug)
[Risks and why]: see above - could result in degraded user experience if the user has disabled mozilla::pkix (which requires them going into about:config, so...)
[String/UUID change made/needed]: none</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8477072&amp;action=edit"
           title="patch for beta"
           class=""
        >Attachment #8477072</a> -
        Flags: review?(mcmanus)</div><div class="change">
        <a href="/attachment.cgi?id=8477072&amp;action=edit"
           title="patch for beta"
           class=""
        >Attachment #8477072</a> -
        Flags: approval-mozilla-beta?</div></div></div><div class="change-set" id="a1398548_32546"><div class="change" id="aa1398548_32546">
    <table class="layout-table change-head reporter" role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a1398548_32546"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_32546" id="a1398548_32546"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
            <span class="user-role">Reporter</span>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1398548_32546"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1398548_32546">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a1398548_32546">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 17:16 PDT" data-time="1408666597">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8477072&amp;action=edit"
           title="patch for beta"
           class=""
        >Attachment #8477072</a> -
        Flags: review?(mcmanus) &rarr; review+</div></div></div><div class="change-set" id="c36"><div class="comment" data-id="9215908" data-no="36"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-36" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_424995" id="a1398548_32546"><img src="https://secure.gravatar.com/avatar/44db89c3c0e0ff5a5bff6afac6e68a17?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_424995" id="a1398548_32546"><a class="email disabled" href="/user_profile?user_id=424995" > <span class="fna">Lawrence Mandel [:lmandel] (use needinfo)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-36"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-36" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c36">Comment 36</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 18:20 PDT" data-time="1408670401">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-36">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-36" data-comment-id="9215908">We're really late in beta and this being a sec-moderate I think we should consider whether we really need this in 32 or we can live with this until 33. This also hasn't hit m-c yet and according to <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c35">comment 35</a> has received minimal testing.

David - How badly do we need to take this in 32? If this had been discovered after beta9, would you argue for inclusion the RC? Would you argue that we chemspill for this issue?</pre><div class="activity"><div class="change">Flags: needinfo?(dkeeler)</div></div></div><div class="change-set" id="c37"><div class="comment" data-id="9215972" data-no="37"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-37" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_308534" id="a1398548_32546"><img src="https://secure.gravatar.com/avatar/bb55b2a8c34fd29f570ca139f13d46b8?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_308534" id="a1398548_32546"><a class="email " href="/user_profile?user_id=308534" > <span class="fna">Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-37"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-37" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c37">Comment 37</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 18:31 PDT" data-time="1408671116">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-37">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-37" data-comment-id="9215972"><a rel="nofollow" href="https://hg.mozilla.org/mozilla-central/rev/c4d1c0041347">https://hg.mozilla.org/mozilla-central/rev/c4d1c0041347</a></pre><div class="activity"><div class="change">Status: NEW &rarr; RESOLVED</div><div class="change">Closed: <span class="rel-time" title="2014-08-21 18:31 PDT" data-time="1408671116">7 years ago</span></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox34&amp;o1=isnotempty">status-firefox34</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox34&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">Resolution: --- &rarr; FIXED</div><div class="change">Target Milestone: --- &rarr; mozilla34</div></div></div><div class="change-set" id="c38"><div class="comment" data-id="9216100" data-no="38"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-38" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1398548_32546"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1398548_32546"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-38"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-38" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c38">Comment 38</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 19:29 PDT" data-time="1408674580">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-38">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-38" data-comment-id="9216100">The effect of not taking this for 32 is that users don't really get the benefit of twitter and amo being pinned until 33. So, it's not worse than the status quo. I wouldn't argue for a chemspill. If we had better automated test coverage, I might argue for inclusion in the RC, but as it is, I can't claim with great confidence that it will be more beneficial than harmful, particularly considering the performance impact of a user disabling mozilla::pkix.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(dkeeler)</span></div></div></div><div class="change-set" id="c39"><div class="comment" data-id="9216118" data-no="39"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-39" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_424995" id="a1398548_32546"><img src="https://secure.gravatar.com/avatar/44db89c3c0e0ff5a5bff6afac6e68a17?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_424995" id="a1398548_32546"><a class="email disabled" href="/user_profile?user_id=424995" > <span class="fna">Lawrence Mandel [:lmandel] (use needinfo)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-39"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-39" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c39">Comment 39</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 19:35 PDT" data-time="1408674942">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-39">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-39" data-comment-id="9216118">Comment on <span class=""><a href="/attachment.cgi?id=8477072" name="attach_8477072" title="patch for beta">attachment 8477072</a> <a href="/attachment.cgi?id=8477072&amp;action=edit" title="patch for beta">[details]</a> <a href="/attachment.cgi?id=8477072&amp;action=diff" title="patch for beta">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8477072'>[review]</a>
patch for beta

Given <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c38">comment 38</a>, I'm going to deny this for beta. Let's wait until 33 for this change.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8477072&amp;action=edit"
           title="patch for beta"
           class=""
        >Attachment #8477072</a> -
        Flags: approval-mozilla-beta? &rarr; approval-mozilla-beta-</div></div></div><div class="change-set" id="a1406918_424995"><div class="change" id="aa1406918_424995">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_424995" id="a1406918_424995"><img src="https://secure.gravatar.com/avatar/44db89c3c0e0ff5a5bff6afac6e68a17?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_424995" id="a1406918_424995"><a class="email disabled" href="/user_profile?user_id=424995" > <span class="fna">Lawrence Mandel [:lmandel] (use needinfo)</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1406918_424995"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1406918_424995">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a1406918_424995">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-21 19:36 PDT" data-time="1408674967">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox32&amp;o1=isnotempty">status-firefox32</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox32&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox32&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox32&amp;o1=isnotempty">tracking-firefox32</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox32&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox32&amp;o1=equals&amp;v1=-">-</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_tracking_firefox33&amp;o1=isnotempty">tracking-firefox33</a>:
          <a href="/buglist.cgi?f1=cf_tracking_firefox33&amp;o1=equals&amp;v1=%3F">?</a> &rarr; <a href="/buglist.cgi?f1=cf_tracking_firefox33&amp;o1=equals&amp;v1=%2B">+</a></div></div></div><div class="change-set" id="c40"><div class="comment" data-id="9227480" data-no="40"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-40" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1406918_424995"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1406918_424995"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-40"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-40" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c40">Comment 40</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-25 16:48 PDT" data-time="1409010519">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-40">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><div id="att-8478701"
         class="attachment patch"
         data-id="8478701" itemscope itemtype="http://schema.org/MediaObject">
      <meta itemprop="name" content="1049095-reverify-aurora.diff">
      <meta itemprop="contentSize" content="6479">
      <meta itemprop="encodingFormat" content="text/plain">
      <div class="label">
        Attached patch
          <meta itemprop="contentUrl" content="attachment.cgi?id=8478701">
          <a class="link" href="attachment.cgi?id=8478701&amp;action=diff">
        <span id="att-8478701-description" itemprop="description">patch for aurora</span></a>
        — <a href="attachment.cgi?id=8478701&amp;action=edit" itemprop="url">Details</a>
          — <a href="/page.cgi?id=splinter.html&ignore=&bug=1049095&attachment=8478701">Splinter Review</a>
      </div>
    </div>

  
    <pre
        class="comment-text  "
        id="ct-40" data-comment-id="9227480">This is patch v2.1 rebased for Aurora.</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8478701&amp;action=edit"
           title="patch for aurora"
           class=""
        >Attachment #8478701</a> -
        Flags: review+</div></div></div><div class="change-set" id="c41"><div class="comment" data-id="9227486" data-no="41"
       data-tags="">
    
    <table class="layout-table change-head assignee" id="ch-41" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_349244" id="a1406918_424995"><img src="extensions/Gravatar/web/default.jpg" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_349244" id="a1406918_424995"><a class="email " href="/user_profile?user_id=349244" > <span class="fna">Dana Keeler (she/her) (use needinfo) (:keeler for reviews) (out of office)</span></a>
</div>
              <span class="user-role">Assignee</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-41"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-41" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c41">Comment 41</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-25 16:49 PDT" data-time="1409010583">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-41">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-41" data-comment-id="9227486">Comment on <span class=""><a href="/attachment.cgi?id=8478701" name="attach_8478701" title="patch for aurora">attachment 8478701</a> <a href="/attachment.cgi?id=8478701&amp;action=edit" title="patch for aurora">[details]</a> <a href="/attachment.cgi?id=8478701&amp;action=diff" title="patch for aurora">[diff]</a></span> <a href='/page.cgi?id=splinter.html&amp;ignore=&amp;bug=1049095&amp;attachment=8478701'>[review]</a>
patch for aurora

Approval Request Comment
[Feature/regressing bug #]: pinning / SPDY
[User impact if declined]: pinning won't actually be useful
[Describe test coverage new/current, TBPL]: minimal, although it has landed in Nightly (see previous comments)
[Risks and why]: low risk - haven't seen any problems on Nightly yet
[String/UUID change made/needed]: none</pre><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8478701&amp;action=edit"
           title="patch for aurora"
           class=""
        >Attachment #8478701</a> -
        Flags: approval-mozilla-aurora?</div></div></div><div class="change-set" id="a1771016_495955"><div class="change" id="aa1771016_495955">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_495955" id="a1771016_495955"><img src="https://secure.gravatar.com/avatar/5aa2e382197a147b42d020b6878f8623?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_495955" id="a1771016_495955"><a class="email " href="/user_profile?user_id=495955" > <span class="fna">Sylvestre Ledru [:Sylvestre]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a1771016_495955"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a1771016_495955">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a1771016_495955">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-26 00:44 PDT" data-time="1409039065">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
        <a href="/attachment.cgi?id=8478701&amp;action=edit"
           title="patch for aurora"
           class=""
        >Attachment #8478701</a> -
        Flags: approval-mozilla-aurora? &rarr; approval-mozilla-aurora+</div></div></div><div class="change-set" id="c42"><div class="comment" data-id="9230011" data-no="42"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-42" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_75935" id="a1771016_495955"><img src="https://secure.gravatar.com/avatar/a10f7f199c75a9a5a1eb347730524a7a?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_75935" id="a1771016_495955"><a class="email " href="/user_profile?user_id=75935" > <span class="fna">Ryan VanderMeulen [:RyanVM]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-42"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-42" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c42">Comment 42</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-08-26 06:51 PDT" data-time="1409061071">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-42">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-42" data-comment-id="9230011"><a rel="nofollow" href="https://hg.mozilla.org/releases/mozilla-aurora/rev/d8e146e60d24">https://hg.mozilla.org/releases/mozilla-aurora/rev/d8e146e60d24</a></pre><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_b2g_2_0&amp;o1=isnotempty">status-b2g-v2.0</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_b2g_2_0&amp;o1=equals&amp;v1=wontfix">wontfix</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_b2g_2_1&amp;o1=isnotempty">status-b2g-v2.1</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_b2g_2_1&amp;o1=equals&amp;v1=fixed">fixed</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox33&amp;o1=isnotempty">status-firefox33</a>:
          <a href="/buglist.cgi?f1=cf_status_firefox33&amp;o1=equals&amp;v1=affected">affected</a> &rarr; <a href="/buglist.cgi?f1=cf_status_firefox33&amp;o1=equals&amp;v1=fixed">fixed</a></div></div></div><div class="change-set" id="c43"><div class="comment" data-id="9260574" data-no="43"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-43" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_451704" id="a1771016_495955"><img src="https://secure.gravatar.com/avatar/6168ea97fda0cefa449331e59b24e8f7?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_451704" id="a1771016_495955"><a class="email " href="/user_profile?user_id=451704" > <span class="fna">Liz Henry (:lizzard Please n-i to RyanVM, jcristau, or pascal)</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-43"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-43" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c43">Comment 43</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-09-02 13:35 PDT" data-time="1409690118">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-43">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-43" data-comment-id="9260574">Marking this as needing verification so that I have it tracked. Sounds like verification should be covered by the automated tests in <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - h2 coalescing test"
   href="/show_bug.cgi?id=1056987">bug 1056987</a> and <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - certificate override mechanisms for tests: use onreadystatechange, not nsIBadCertListener2"
   href="/show_bug.cgi?id=846581">bug 846581</a>.</pre><div class="activity"><div class="change">Flags: qe-verify+</div></div></div><div class="change-set" id="c44"><div class="comment" data-id="9414845" data-no="44"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-44" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a1771016_495955"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a1771016_495955"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-44"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-44" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c44">Comment 44</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-10-07 11:23 PDT" data-time="1412706196">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-44">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-44" data-comment-id="9414845">(In reply to Patrick McManus [:mcmanus] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c0">comment #0</a>)
<span class="quote">&gt; I was informed of a potential key pinning bypass attack that I can confirm
&gt; we are vulnerable to.</span >

I'm writing an advisory for this fix/issue. If you didn't discover it, who is it that I should credit in the advisory?</pre><div class="activity"><div class="change">Flags: needinfo?(mcmanus)</div></div></div><div class="change-set" id="a5438164_280903"><div class="change" id="aa5438164_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5438164_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a5438164_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5438164_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5438164_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a5438164_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-10-07 11:23 PDT" data-time="1412706213">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Whiteboard: [sdpy] &rarr; [sdpy][adv-main33+]</div></div></div><div class="change-set" id="c45"><div class="comment" data-id="9414931" data-no="45"
       data-tags="">
    
    <table class="layout-table change-head reporter" id="ch-45" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_32546" id="a5438164_280903"><img src="https://secure.gravatar.com/avatar/2b0de973c803f192309b00777c594202?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_32546" id="a5438164_280903"><a class="email " href="/user_profile?user_id=32546" > <span class="fna">Patrick McManus [:mcmanus]</span></a>
</div>
              <span class="user-role">Reporter</span>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-45"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-45" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c45">Comment 45</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-10-07 11:36 PDT" data-time="1412707008">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-45">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-45" data-comment-id="9414931">(In reply to Al Billings [:abillings] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c44">comment #44</a>)
<span class="quote">&gt; (In reply to Patrick McManus [:mcmanus] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c0">comment #0</a>)
&gt; &gt; I was informed of a potential key pinning bypass attack that I can confirm
&gt; &gt; we are vulnerable to.
&gt; 
&gt; I'm writing an advisory for this fix/issue. If you didn't discover it, who
&gt; is it that I should credit in the advisory?</span >

it came privately from a chrome developer - they aren't expecting credit.</pre><div class="activity"><div class="change">Flags: <span class="activity-deleted">needinfo?(mcmanus)</span></div></div></div><div class="change-set" id="c46"><div class="comment" data-id="9415575" data-no="46"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-46" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5438164_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_280903" id="a5438164_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-46"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-46" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c46">Comment 46</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-10-07 13:28 PDT" data-time="1412713712">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-46">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-46" data-comment-id="9415575">(In reply to Patrick McManus [:mcmanus] from <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c45">comment #45</a>)

<span class="quote">&gt; it came privately from a chrome developer - they aren't expecting credit.</span >

I guess you get it then! (I have to put someone down.)</pre></div><div class="change-set" id="a5528527_280903"><div class="change" id="aa5528527_280903">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_280903" id="a5528527_280903"><img src="https://secure.gravatar.com/avatar/58211442c4cece862d7a7850637c4edc?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_280903" id="a5528527_280903"><a class="email " href="/user_profile?user_id=280903" > <span class="fna">Al Billings [:abillings - ex-MoCo]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5528527_280903"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5528527_280903">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a5528527_280903">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-10-08 12:29 PDT" data-time="1412796576">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Alias: CVE-2014-1582</div></div></div><div class="change-set" id="a5537878_1689"><div class="change" id="aa5537878_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a5537878_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a5537878_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a5537878_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a5537878_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a5537878_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-10-08 15:05 PDT" data-time="1412805927">7 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">
          <a href="/buglist.cgi?f1=cf_status_b2g_1_4&amp;o1=isnotempty">status-b2g-v1.4</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_b2g_1_4&amp;o1=equals&amp;v1=unaffected">unaffected</a></div><div class="change">
          <a href="/buglist.cgi?f1=cf_status_firefox_esr31&amp;o1=isnotempty">status-firefox-esr31</a>:
          --- &rarr; <a href="/buglist.cgi?f1=cf_status_firefox_esr31&amp;o1=equals&amp;v1=unaffected">unaffected</a></div></div></div><div class="change-set" id="c47"><div class="comment" data-id="9427950" data-no="47"
       data-tags="">
    
    <table class="layout-table change-head " id="ch-47" role="presentation">
      <tr>
          <td rowspan="2" class="change-gravatar"><div class="vcard vcard_452604" id="a5537878_1689"><img src="https://secure.gravatar.com/avatar/7bb698c4991c5af83adabe3c3b8ee8aa?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
          </td>

          <td class="change-author"><div class="vcard vcard_452604" id="a5537878_1689"><a class="email disabled" href="/user_profile?user_id=452604" > <span class="fna">Matt Wobensmith [:mwobensmith][:matt:]</span></a>
</div>
          </td>

        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="cs-47"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>

      <tr id="cr-47" >
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#c47">Comment 47</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2014-10-09 14:35 PDT" data-time="1412890510">7 years ago</span>
          </div>
        </td>
      </tr>

      <tr id="ctag-47">
        <td colspan="2" class="comment-tags">
        </td>
      </tr>
    </table>

    
  </div><pre
        class="comment-text  "
        id="ct-47" data-comment-id="9427950">Marking [qe-verify-] as creating the scenario that exercises this functionality would take us more time than we have allotted for bug verification. Also, the tests referenced on <a class="bz_bug_link
          bz_status_RESOLVED bz_closed"
   title="RESOLVED FIXED - Spdy/Http-2 Coalescing Key Pinning Bypass"
   href="/show_bug.cgi?id=1049095#c43">comment 43</a> have yet to be completed. If that is incorrect and more testing is needed on this, please let me know and I'm happy to do what I can.</pre><div class="activity"><div class="change">Flags: qe-verify+ &rarr; qe-verify-</div></div></div><div class="change-set" id="a33909075_546015"><div class="change" id="aa33909075_546015">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_546015" id="a33909075_546015"><img src="https://secure.gravatar.com/avatar/d0465b8931b44330f542efbeeae855da?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_546015" id="a33909075_546015"><a class="email " href="/user_profile?user_id=546015" > <span class="fna">BMO Automation</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a33909075_546015"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a33909075_546015">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a33909075_546015">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2015-09-01 23:58 PDT" data-time="1441177124">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: core-security &rarr; core-security-release</div></div></div><div class="change-set" id="a57813297_1689"><div class="change" id="aa57813297_1689">
    <table class="layout-table change-head " role="presentation">
      <tr>
        <td rowspan="2" class="change-gravatar"><div class="vcard vcard_1689" id="a57813297_1689"><img src="https://secure.gravatar.com/avatar/da6b54ad3fdb36ba7656df9adfe65d12?d=mm&size=64" class="gravatar" width="32" height="32">
</div>
        </td>
        <td class="change-author"><div class="vcard vcard_1689" id="a57813297_1689"><a class="email " href="/user_profile?user_id=1689" > <span class="fna">Daniel Veditz [:dveditz]</span></a>
</div>
        </td>
        <td rowspan="2" class="comment-actions"><div role="group">
          <button type="button" class="change-spinner minor iconic" id="as-a57813297_1689"
                  aria-label="Collapse" aria-expanded="true"
                  data-strings='{ "collapse_label": "Collapse", "expand_label": "Expanded" }'>
            <span class="icon" aria-hidden="true"></span>
          </button>
        </div></td>
      </tr>
      <tr id="ar-a57813297_1689">
        <td>
          <h3 class="change-name">
            <a href="/show_bug.cgi?id=1049095#a57813297_1689">Updated</a>
          </h3>
          &bull;
          <div class="change-time"><span class="rel-time" title="2016-06-04 16:02 PDT" data-time="1465081346">6 years ago</span>
          </div>
        </td>
      </tr>
    </table>
  </div><div class="activity"><div class="change">Group: <span class="activity-deleted">core-security-release</span></div></div></div><div id="new-comment-notice">
          You need to <a href="/show_bug.cgi?id=1049095&amp;GoAheadAndLogIn=1">log in</a>
          before you can comment on or make changes to this bug.
        </div>



<div id="bottom-actions">
  <div id="bottom-right-actions">
    <button type="button" id="top-btn" class="secondary" aria-label="Go to Page Top">Top &uarr;</button>
  </div>
</div></div> 
</main> 
</div> 


</body>
</html>