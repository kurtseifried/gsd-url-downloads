<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<link rel="icon" href="/favicon.png">
<title>#741659 - k4dirstat: Apostrophes not properly escaped in &#39;rm -rf&#39; invocation - Debian Bug report logs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bugs.css" type="text/css">

<link rel="canonical" href="&lt;a href=&quot;bugreport.cgi?bug=741659&quot;&gt;741659&lt;/a&gt;">
<script type="text/javascript">
<!--
function toggle_infmessages()
{
        allDivs=document.getElementsByTagName("div");
        for (var i = 0 ; i < allDivs.length ; i++ )
        {
                if (allDivs[i].className == "infmessage")
                {
                        allDivs[i].style.display=(allDivs[i].style.display == 'none' | allDivs[i].style.display == '') ? 'block' : 'none';
                }
        }
}
-->
</script>
</head>
<body>
<h1>Debian Bug report logs - 
<a href="mailto:741659@bugs.debian.org">#741659</a><br>
k4dirstat: Apostrophes not properly escaped in &#39;rm -rf&#39; invocation</h1>
<div class="versiongraph"><a href="version.cgi?package=k4dirstat;absolute=0;info=1;fixed=k4dirstat%2F2.7.5-1;collapse=1;found=k4dirstat%2F2.7.3-1"><img alt="version graph" src="version.cgi?fixed=k4dirstat%2F2.7.5-1;absolute=0;package=k4dirstat;width=2;collapse=1;height=2;found=k4dirstat%2F2.7.3-1"></a></div>
<div class="pkginfo">
  <p>Package:
     <a class="submitter" href="pkgreport.cgi?package=k4dirstat">k4dirstat</a>;
Maintainer for <a href="pkgreport.cgi?package=k4dirstat">k4dirstat</a> is <a href="pkgreport.cgi?maint=jeromerobert%40gmx.com">Jerome Robert &lt;jeromerobert@gmx.com&gt;</a>; Source for <a href="pkgreport.cgi?package=k4dirstat">k4dirstat</a> is <a href="pkgreport.cgi?src=k4dirstat">src:k4dirstat</a> (<a href="https://tracker.debian.org/pkg/k4dirstat">PTS</a>, <a href="https://buildd.debian.org/k4dirstat">buildd</a>, <a href="https://qa.debian.org/popcon.php?package=k4dirstat">popcon</a>). </p>

</div>

<div class="buginfo">
  <p>Reported by: <a href="pkgreport.cgi?submitter=perserwrita%40riseup.net">Adrian Panasiuk &lt;perserwrita@riseup.net&gt;</a></p>
  <p>Date: Sat, 15 Mar 2014 03:06:02 UTC</p>

<p>Severity: important</p>
<p>Tags: fixed-upstream, security</p>

<p>Found in version k4dirstat/2.7.3-1</p>
<p>Fixed in version k4dirstat/2.7.5-1</p>

<p><strong>Done:</strong> Jerome Robert &lt;jeromerobert@gmx.com&gt;</p>

<p>Bug is archived. No further changes may be made.<p></div>

<p><a href="javascript:toggle_infmessages();">Toggle useless messages</a></p><div class="msgreceived"><p>View this report as an <a href="bugreport.cgi?bug=741659;mbox=yes">mbox folder</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;mboxstatus=yes">status mbox</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;mboxmaint=yes">maintainer mbox</a></p></div>

<div class="infmessage"><hr><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, perserwrita@riseup.net, Jerome Robert &lt;jeromerobert@gmx.com&gt; -->
<!-- time:1394852767 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, perserwrita@riseup.net, Jerome Robert &lt;jeromerobert@gmx.com&gt;</code>:<br>
<code>Bug#741659</code>; Package <code>k4dirstat</code>.
 (Sat, 15 Mar 2014 03:06:07 GMT) (<a href="bugreport.cgi?bug=741659;msg=2">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=2">mbox</a>, <a href="#1">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="3"></a>
<!-- request_addr: Adrian Panasiuk &lt;perserwrita@riseup.net&gt; -->
<!-- time:1394852767 -->
<strong>Acknowledgement sent</strong>
to <code>Adrian Panasiuk &lt;perserwrita@riseup.net&gt;</code>:<br>
New Bug report received and forwarded.  Copy sent to <code>perserwrita@riseup.net, Jerome Robert &lt;jeromerobert@gmx.com&gt;</code>.
 (Sat, 15 Mar 2014 03:06:07 GMT) (<a href="bugreport.cgi?bug=741659;msg=4">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=4">mbox</a>, <a href="#3">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="bugreport.cgi?bug=741659;msg=5">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=5">mbox</a>, <a href="mailto:741659@bugs.debian.org?References=%3C20140315030142.28579.59372.reportbug%40laps.home.aster.pl%3E&amp;body=On%20Sat%2C%2015%20Mar%202014%2004%3A01%3A42%20%2B0100%20Adrian%20Panasiuk%20%3Cperserwrita%40riseup.net%3E%20wrote%3A%0A%3E%20Package%3A%20k4dirstat%0A%3E%20Version%3A%202.7.3-1%0A%3E%20Severity%3A%20important%0A%3E%20%0A%3E%20Dear%20Maintainer%2C%0A%3E%20%0A%3E%20this%20may%20be%20a%20possible%20security%20issue%20-%20in%20k4dirstat%3A%20when%20choosing%20to%0A%3E%20permanently%20delete%20a%20directory%20%28from%20the%20context%20menu%20in%20the%20directory%20tree%0A%3E%20view%2C%20%22Delete%2C%20no%20way%20to%20undelete%20-%20Ctrl%20Del%22%29%2C%20I%20can%20see%20in%20the%20logs%20that%0A%3E%20k4dirstat%20runs%20something%20like%2C%20in%20printf%20notation%3A%20%22%20rm%20-rf%20%27%25s%27%20%22%20where%0A%3E%20apostrophes%20are%20not%20escaped%20in%20the%20dir%20name.%0A%3E%20%0A%3E%20%2Fhome%2Fuser%2FJim%27s%20pictures%0A%3E%20%0A%3E%20generates%0A%3E%20%0A%3E%20rm%20-rf%20%27%2Fhome%2Fuser%2FJim%27s%20pictures%27%0A%3E%20%0A%3E%20and%20a%20directory%20called%0A%3E%20%0A%3E%20%2Fhome%2Fuser%2Fmalicious%27%3B%20rm%20-rf%20~%0A%3E%20%0A%3E%20may%20be%20harmful.%0A%3E%20%0A%3E%20%0A%3E%20Best%20regards%0A%3E%20%0A%3E%20%0A%3E%20%0A%3E%20--%20System%20Information%3A%0A%3E%20Debian%20Release%3A%207.1%0A%3E%20%20%20APT%20prefers%20stable%0A%3E%20%20%20APT%20policy%3A%20%28500%2C%20%27stable%27%29%0A%3E%20Architecture%3A%20amd64%20%28x86_64%29%0A%3E%20Foreign%20Architectures%3A%20i386%0A%3E%20%0A%3E%20Kernel%3A%20Linux%203.2.0-4-amd64%20%28SMP%20w%2F2%20CPU%20cores%29%0A%3E%20Locale%3A%20LANG%3Dpl_PL.UTF-8%2C%20LC_CTYPE%3Dpl_PL.UTF-8%20%28charmap%3DUTF-8%29%0A%3E%20Shell%3A%20%2Fbin%2Fsh%20linked%20to%20%2Fbin%2Fdash%0A%3E%20%0A%3E%20Versions%20of%20packages%20k4dirstat%20depends%20on%3A%0A%3E%20ii%20%20kdebase-runtime%20%20%20%204%3A4.8.4-2%0A%3E%20ii%20%20libc6%20%20%20%20%20%20%20%20%20%20%20%20%20%202.13-38%0A%3E%20ii%20%20libgcc1%20%20%20%20%20%20%20%20%20%20%20%201%3A4.7.2-5%0A%3E%20ii%20%20libkde3support4%20%20%20%204%3A4.8.4-4%0A%3E%20ii%20%20libkdecore5%20%20%20%20%20%20%20%204%3A4.8.4-4%0A%3E%20ii%20%20libkdeui5%20%20%20%20%20%20%20%20%20%204%3A4.8.4-4%0A%3E%20ii%20%20libkio5%20%20%20%20%20%20%20%20%20%20%20%204%3A4.8.4-4%0A%3E%20ii%20%20libkonq5abi1%20%20%20%20%20%20%204%3A4.8.4-2%0A%3E%20ii%20%20libqt4-dbus%20%20%20%20%20%20%20%204%3A4.8.2%2Bdfsg-11%0A%3E%20ii%20%20libqt4-network%20%20%20%20%204%3A4.8.2%2Bdfsg-11%0A%3E%20ii%20%20libqt4-qt3support%20%204%3A4.8.2%2Bdfsg-11%0A%3E%20ii%20%20libqt4-svg%20%20%20%20%20%20%20%20%204%3A4.8.2%2Bdfsg-11%0A%3E%20ii%20%20libqt4-xml%20%20%20%20%20%20%20%20%204%3A4.8.2%2Bdfsg-11%0A%3E%20ii%20%20libqtcore4%20%20%20%20%20%20%20%20%204%3A4.8.2%2Bdfsg-11%0A%3E%20ii%20%20libqtgui4%20%20%20%20%20%20%20%20%20%204%3A4.8.2%2Bdfsg-11%0A%3E%20ii%20%20libstdc%2B%2B6%20%20%20%20%20%20%20%20%204.7.2-5%0A%3E%20ii%20%20zlib1g%20%20%20%20%20%20%20%20%20%20%20%20%201%3A1.2.7.dfsg-13%0A%3E%20%0A%3E%20k4dirstat%20recommends%20no%20packages.%0A&amp;In-Reply-To=%3C20140315030142.28579.59372.reportbug%40laps.home.aster.pl%3E&amp;subject=Re%3A%20k4dirstat%3A%20Apostrophes%20not%20properly%20escaped%20in%20%27rm%20-rf%27%20invocation">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=perserwrita%40riseup.net" alt="">
<div class="header"><span class="headerfield">From:</span> Adrian Panasiuk &lt;perserwrita@riseup.net&gt;</div>
<div class="header"><span class="headerfield">To:</span> Debian Bug Tracking System &lt;submit@bugs.debian.org&gt;</div>
<div class="header"><span class="headerfield">Subject:</span> k4dirstat: Apostrophes not properly escaped in &#39;rm -rf&#39; invocation</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 15 Mar 2014 04:01:42 +0100</div>
</div>
<pre class="message">Package: k4dirstat
Version: 2.7.3-1
Severity: important

Dear Maintainer,

this may be a possible security issue - in k4dirstat: when choosing to
permanently delete a directory (from the context menu in the directory tree
view, &quot;Delete, no way to undelete - Ctrl Del&quot;), I can see in the logs that
k4dirstat runs something like, in printf notation: &quot; rm -rf &#39;%s&#39; &quot; where
apostrophes are not escaped in the dir name.

/home/user/Jim&#39;s pictures

generates

rm -rf &#39;/home/user/Jim&#39;s pictures&#39;

and a directory called

/home/user/malicious&#39;; rm -rf ~

may be harmful.


Best regards



-- System Information:
Debian Release: 7.1
  APT prefers stable
  APT policy: (500, &#39;stable&#39;)
Architecture: amd64 (x86_64)
Foreign Architectures: i386

Kernel: Linux 3.2.0-4-amd64 (SMP w/2 CPU cores)
Locale: LANG=pl_PL.UTF-8, LC_CTYPE=pl_PL.UTF-8 (charmap=UTF-8)
Shell: /bin/sh linked to /bin/dash

Versions of packages k4dirstat depends on:
ii  kdebase-runtime    4:4.8.4-2
ii  libc6              2.13-38
ii  libgcc1            1:4.7.2-5
ii  libkde3support4    4:4.8.4-4
ii  libkdecore5        4:4.8.4-4
ii  libkdeui5          4:4.8.4-4
ii  libkio5            4:4.8.4-4
ii  libkonq5abi1       4:4.8.4-2
ii  libqt4-dbus        4:4.8.2+dfsg-11
ii  libqt4-network     4:4.8.2+dfsg-11
ii  libqt4-qt3support  4:4.8.2+dfsg-11
ii  libqt4-svg         4:4.8.2+dfsg-11
ii  libqt4-xml         4:4.8.2+dfsg-11
ii  libqtcore4         4:4.8.2+dfsg-11
ii  libqtgui4          4:4.8.2+dfsg-11
ii  libstdc++6         4.7.2-5
ii  zlib1g             1:1.2.7.dfsg-13

k4dirstat recommends no packages.

k4dirstat suggests no packages.

-- no debconf information


</pre>

<div class="msgreceived"><hr><p>
<a name="6"></a>
<!-- command:tag -->
<!-- requester: Jerome Robert &lt;jeromerobert@gmx.com&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1394901911 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;security&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;&#39;
            };
-->
<strong>Added tag(s) security.</strong>
Request was from <code>Jerome Robert &lt;jeromerobert@gmx.com&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sat, 15 Mar 2014 16:45:11 GMT) (<a href="bugreport.cgi?bug=741659;msg=7">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=7">mbox</a>, <a href="#6">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="8"></a>
<!-- command:tag -->
<!-- requester: Jerome Robert &lt;jeromerobert@gmx.com&gt; -->
<!-- request_addr: control@bugs.debian.org -->
<!-- time:1394902268 -->
<!-- new_data:
$new_data = {
              &#39;keywords&#39; =&gt; &#39;security fixed-upstream&#39;
            };
-->
<!-- old_data:
$old_data = {
              &#39;keywords&#39; =&gt; &#39;security&#39;
            };
-->
<strong>Added tag(s) fixed-upstream.</strong>
Request was from <code>Jerome Robert &lt;jeromerobert@gmx.com&gt;</code>
to <code>control@bugs.debian.org</code>.
 (Sat, 15 Mar 2014 16:51:08 GMT) (<a href="bugreport.cgi?bug=741659;msg=9">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=9">mbox</a>, <a href="#8">link</a>).</p></p></div>

<div class="msgreceived"><hr><p>
<a name="10"></a>
<!-- request_addr: Jerome Robert &lt;jeromerobert@gmx.com&gt; -->
<!-- time:1394921349 -->
<strong>Reply sent</strong>
to <code>Jerome Robert &lt;jeromerobert@gmx.com&gt;</code>:<br>
You have taken responsibility.
 (Sat, 15 Mar 2014 22:09:09 GMT) (<a href="bugreport.cgi?bug=741659;msg=11">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=11">mbox</a>, <a href="#10">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="12"></a>
<!-- request_addr: Adrian Panasiuk &lt;perserwrita@riseup.net&gt; -->
<!-- time:1394921349 -->
<strong>Notification sent</strong>
to <code>Adrian Panasiuk &lt;perserwrita@riseup.net&gt;</code>:<br>
Bug acknowledged by developer.
 (Sat, 15 Mar 2014 22:09:09 GMT) (<a href="bugreport.cgi?bug=741659;msg=13">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=13">mbox</a>, <a href="#12">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="14"></a><a name="msg14"></a><a href="#14">Message #14</a> received at 741659-close@bugs.debian.org (<a href="bugreport.cgi?bug=741659;msg=14">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=14">mbox</a>, <a href="mailto:741659@bugs.debian.org?body=On%20Sat%2C%2015%20Mar%202014%2022%3A04%3A37%20%2B0000%20Jerome%20Robert%20%3Cjeromerobert%40gmx.com%3E%20wrote%3A%0A%3E%20Source%3A%20k4dirstat%0A%3E%20Source-Version%3A%202.7.5-1%0A%3E%20%0A%3E%20We%20believe%20that%20the%20bug%20you%20reported%20is%20fixed%20in%20the%20latest%20version%20of%0A%3E%20k4dirstat%2C%20which%20is%20due%20to%20be%20installed%20in%20the%20Debian%20FTP%20archive.%0A%3E%20%0A%3E%20A%20summary%20of%20the%20changes%20between%20this%20version%20and%20the%20previous%20one%20is%0A%3E%20attached.%0A%3E%20%0A%3E%20Thank%20you%20for%20reporting%20the%20bug%2C%20which%20will%20now%20be%20closed.%20%20If%20you%0A%3E%20have%20further%20comments%20please%20address%20them%20to%20741659%40bugs.debian.org%2C%0A%3E%20and%20the%20maintainer%20will%20reopen%20the%20bug%20report%20if%20appropriate.%0A%3E%20%0A%3E%20Debian%20distribution%20maintenance%20software%0A%3E%20pp.%0A%3E%20Jerome%20Robert%20%3Cjeromerobert%40gmx.com%3E%20%28supplier%20of%20updated%20k4dirstat%20package%29%0A%3E%20%0A%3E%20%28This%20message%20was%20generated%20automatically%20at%20their%20request%3B%20if%20you%0A%3E%20believe%20that%20there%20is%20a%20problem%20with%20it%20please%20contact%20the%20archive%0A%3E%20administrators%20by%20mailing%20ftpmaster%40ftp-master.debian.org%29%0A%3E%20%0A%3E%20%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA1%0A%3E%20%0A%3E%20Format%3A%201.8%0A%3E%20Date%3A%20Sat%2C%2015%20Mar%202014%2017%3A11%3A14%20%2B0100%0A%3E%20Source%3A%20k4dirstat%0A%3E%20Binary%3A%20k4dirstat%20kdirstat%0A%3E%20Architecture%3A%20source%20amd64%20all%0A%3E%20Version%3A%202.7.5-1%0A%3E%20Distribution%3A%20unstable%0A%3E%20Urgency%3A%20medium%0A%3E%20Maintainer%3A%20Jerome%20Robert%20%3Cjeromerobert%40gmx.com%3E%0A%3E%20Changed-By%3A%20Jerome%20Robert%20%3Cjeromerobert%40gmx.com%3E%0A%3E%20Description%3A%20%0A%3E%20%20k4dirstat%20%20-%20graphical%20disk%20usage%20display%20with%20cleanup%20facilities%0A%3E%20%20kdirstat%20%20%20-%20Transitional%20package%20for%20k4dirstat%0A%3E%20Closes%3A%20741659%0A%3E%20Changes%3A%20%0A%3E%20%20k4dirstat%20%282.7.5-1%29%20unstable%3B%20urgency%3Dmedium%0A%3E%20%20.%0A%3E%20%20%20%20%2A%20New%20upstream%20release%0A%3E%20%20%20%20%20%20-%20Apostrophes%20not%20properly%20escaped%20in%20%27rm%20-rf%27%20invocation%20%28closes%3A%20%23741659%29%0A%3E%20Checksums-Sha1%3A%20%0A%3E%20%20c4b77cf4e6096eb7581184f1c3e0d77916e089c1%201320%20k4dirstat_2.7.5-1.dsc%0A%3E%20%20503cdf564380f317910d3a1bb2e600514a29ccc2%20225485%20k4dirstat_2.7.5.orig.tar.bz2%0A%3E%20%204cea17cfb602eb4d09ffe12090581e63766f2b9c%203732%20k4dirstat_2.7.5-1.debian.tar.xz%0A%3E%20%20522709a021b08ceba4713fb06ed4dd9eb5c2e6bf%20225776%20k4dirstat_2.7.5-1_amd64.deb%0A%3E%20%200d339fba7fd98d866730eeb5700fd647859a5476%202468%20kdirstat_2.7.5-1_all.deb%0A%3E%20Checksums-Sha256%3A%20%0A%3E%20%201a73877be350f56eb3624b6d956e58bb03e57e1e4e6cb314a5424c5702f6260c%201320%20k4dirstat_2.7.5-1.dsc%0A%3E%20%2020fcf97285c8e1836cec94b05dc4e3ae92e0f7e806cd278d46ec2c3287f5ff31%20225485%20k4dirstat_2.7.5.orig.tar.bz2%0A%3E%20%20e7aa0682de4638a56817a41852d35959c7984843c832940633418c23677ffc30%203732%20k4dirstat_2.7.5-1.debian.tar.xz%0A%3E%20%20f1d4aef20220d9c1407000ef46935dad8e5d06275c1a3c969dbb17f8b0d3957e%20225776%20k4dirstat_2.7.5-1_amd64.deb%0A%3E%20%203b31bfaf844c41f8a6c430301e7bd78e881ca777d0053031a7f435ebef0bfcab%202468%20kdirstat_2.7.5-1_all.deb%0A%3E%20Files%3A%20%0A%3E%20%205b9c5099f7392f1045309714ce036f38%201320%20misc%20optional%20k4dirstat_2.7.5-1.dsc%0A%3E%20%2004d2a305dfcef019478764dcb3ca33c1%20225485%20misc%20optional%20k4dirstat_2.7.5.orig.tar.bz2%0A%3E%20%2048c0f36ca480e227f92b5a7037b1baee%203732%20misc%20optional%20k4dirstat_2.7.5-1.debian.tar.xz%0A&amp;References=%3CE1WOwh3-00069h-R5%40franck.debian.org%3E&amp;subject=Re%3A%20Bug%23741659%3A%20fixed%20in%20k4dirstat%202.7.5-1&amp;In-Reply-To=%3CE1WOwh3-00069h-R5%40franck.debian.org%3E">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=jeromerobert%40gmx.com" alt="">
<div class="header"><span class="headerfield">From:</span> Jerome Robert &lt;jeromerobert@gmx.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> 741659-close@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Bug#741659: fixed in k4dirstat 2.7.5-1</div>
<div class="header"><span class="headerfield">Date:</span> Sat, 15 Mar 2014 22:04:37 +0000</div>
</div>
<pre class="message">Source: k4dirstat
Source-Version: 2.7.5-1

We believe that the bug you reported is fixed in the latest version of
k4dirstat, which is due to be installed in the Debian FTP archive.

A summary of the changes between this version and the previous one is
attached.

Thank you for reporting the bug, which will now be closed.  If you
have further comments please address them to 741659@bugs.debian.org,
and the maintainer will reopen the bug report if appropriate.

Debian distribution maintenance software
pp.
Jerome Robert &lt;jeromerobert@gmx.com&gt; (supplier of updated k4dirstat package)

(This message was generated automatically at their request; if you
believe that there is a problem with it please contact the archive
administrators by mailing ftpmaster@ftp-master.debian.org)


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Format: 1.8
Date: Sat, 15 Mar 2014 17:11:14 +0100
Source: k4dirstat
Binary: k4dirstat kdirstat
Architecture: source amd64 all
Version: 2.7.5-1
Distribution: unstable
Urgency: medium
Maintainer: Jerome Robert &lt;jeromerobert@gmx.com&gt;
Changed-By: Jerome Robert &lt;jeromerobert@gmx.com&gt;
Description: 
 k4dirstat  - graphical disk usage display with cleanup facilities
 kdirstat   - Transitional package for k4dirstat
Closes: <a href="bugreport.cgi?bug=741659">741659</a>
Changes: 
 k4dirstat (2.7.5-1) unstable; urgency=medium
 .
   * New upstream release
     - Apostrophes not properly escaped in &#39;rm -rf&#39; invocation (closes: #<a href="bugreport.cgi?bug=741659">741659</a>)
Checksums-Sha1: 
 c4b77cf4e6096eb7581184f1c3e0d77916e089c1 1320 k4dirstat_2.7.5-1.dsc
 503cdf564380f317910d3a1bb2e600514a29ccc2 225485 k4dirstat_2.7.5.orig.tar.bz2
 4cea17cfb602eb4d09ffe12090581e63766f2b9c 3732 k4dirstat_2.7.5-1.debian.tar.xz
 522709a021b08ceba4713fb06ed4dd9eb5c2e6bf 225776 k4dirstat_2.7.5-1_amd64.deb
 0d339fba7fd98d866730eeb5700fd647859a5476 2468 kdirstat_2.7.5-1_all.deb
Checksums-Sha256: 
 1a73877be350f56eb3624b6d956e58bb03e57e1e4e6cb314a5424c5702f6260c 1320 k4dirstat_2.7.5-1.dsc
 20fcf97285c8e1836cec94b05dc4e3ae92e0f7e806cd278d46ec2c3287f5ff31 225485 k4dirstat_2.7.5.orig.tar.bz2
 e7aa0682de4638a56817a41852d35959c7984843c832940633418c23677ffc30 3732 k4dirstat_2.7.5-1.debian.tar.xz
 f1d4aef20220d9c1407000ef46935dad8e5d06275c1a3c969dbb17f8b0d3957e 225776 k4dirstat_2.7.5-1_amd64.deb
 3b31bfaf844c41f8a6c430301e7bd78e881ca777d0053031a7f435ebef0bfcab 2468 kdirstat_2.7.5-1_all.deb
Files: 
 5b9c5099f7392f1045309714ce036f38 1320 misc optional k4dirstat_2.7.5-1.dsc
 04d2a305dfcef019478764dcb3ca33c1 225485 misc optional k4dirstat_2.7.5.orig.tar.bz2
 48c0f36ca480e227f92b5a7037b1baee 3732 misc optional k4dirstat_2.7.5-1.debian.tar.xz
 e33aa6c36e1cb0ec0381c728af56b245 225776 misc optional k4dirstat_2.7.5-1_amd64.deb
 e71bdb1416791bf74baf3d83c4bddfa7 2468 misc optional kdirstat_2.7.5-1_all.deb

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iD8DBQFTJMql0i2bPSHbMcURAnmeAJ4nLc74wOC5vuoWuQaFaXdliivSEgCgqqfR
XA9UiN0IloUWsjUzP3nZ+mk=
=eMv3
-----END PGP SIGNATURE-----



</pre>

<div class="infmessage"><hr><p>
<a name="15"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jerome Robert &lt;jeromerobert@gmx.com&gt; -->
<!-- time:1395037445 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jerome Robert &lt;jeromerobert@gmx.com&gt;</code>:<br>
<code>Bug#741659</code>; Package <code>k4dirstat</code>.
 (Mon, 17 Mar 2014 06:24:05 GMT) (<a href="bugreport.cgi?bug=741659;msg=16">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=16">mbox</a>, <a href="#15">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="17"></a>
<!-- request_addr: mmcallis@redhat.com -->
<!-- time:1395037445 -->
<strong>Acknowledgement sent</strong>
to <code>mmcallis@redhat.com</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Jerome Robert &lt;jeromerobert@gmx.com&gt;</code>.
 (Mon, 17 Mar 2014 06:24:05 GMT) (<a href="bugreport.cgi?bug=741659;msg=18">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=18">mbox</a>, <a href="#17">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="19"></a><a name="msg19"></a><a href="#19">Message #19</a> received at 741659@bugs.debian.org (<a href="bugreport.cgi?bug=741659;msg=19">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=19">mbox</a>, <a href="mailto:741659@bugs.debian.org?References=%3C5326946D.40306%40redhat.com%3E&amp;body=On%20Mon%2C%2017%20Mar%202014%2017%3A21%3A33%20%2B1100%20Murray%20McAllister%20%3Cmmcallis%40redhat.com%3E%20wrote%3A%0A%3E%20Good%20morning%2C%0A%3E%20%0A%3E%20Adrian%20Panasiuk%20discovered%20that%20the%20KDirStat%20%28KDE%20Directory%20Statistics%29%20%0A%3E%20tool%20did%20not%20correctly%20escape%20quotes%20when%20deleting%20a%20directory%20%0A%3E%20permanently.%20Attempting%20to%20use%20KDirStat%20to%20permanently%20delete%20a%20%0A%3E%20directory%20that%20has%20a%20malicious%20name%20could%20result%20in%20arbitrary%20command%20%0A%3E%20execution.%0A%3E%20%0A%3E%20Original%20report%3A%20https%3A%2F%2Fbugs.debian.org%2Fcgi-bin%2Fbugreport.cgi%3Fbug%3D741659%0A%3E%20%0A%3E%20The%20Debian%20report%20is%20about%20single%20quotes.%20On%20Fedora%20%0A%3E%20%28https%3A%2F%2Fbugzilla.redhat.com%2Fshow_bug.cgi%3Fid%3D1077059%29%20double%20quotes%20were%20%0A%3E%20needed.%0A%3E%20%0A%3E%20Can%20a%20CVE%20please%20be%20assigned%20if%20one%20has%20not%20been%20already%3F%20%28And%20maybe%20it%20%0A%3E%20should%20be%20escaping%20%27%3B%27%20too%20if%20not%20already%3F%29%0A%3E%20%0A%3E%20Thanks%2C%0A%3E%20%0A%3E%20--%0A%3E%20Murray%20McAllister%20%2F%20Red%20Hat%20Security%20Response%20Team%0A%3E%20%0A%3E%20%0A&amp;In-Reply-To=%3C5326946D.40306%40redhat.com%3E&amp;subject=Re%3A%20CVE%20request%3A%20kdirstat%2C%20insufficient%20quote%20escaping%20leading%20to%20arbitrary%0A%20command%20execution">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=mmcallis%40redhat.com" alt="">
<div class="header"><span class="headerfield">From:</span> Murray McAllister &lt;mmcallis@redhat.com&gt;</div>
<div class="header"><span class="headerfield">To:</span> oss-security@lists.openwall.com</div>
<div class="header"><span class="headerfield">Cc:</span> 741659@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> CVE request: kdirstat, insufficient quote escaping leading to arbitrary
 command execution</div>
<div class="header"><span class="headerfield">Date:</span> Mon, 17 Mar 2014 17:21:33 +1100</div>
</div>
<pre class="message flowed">Good morning,

Adrian Panasiuk discovered that the KDirStat (KDE Directory Statistics) 
tool did not correctly escape quotes when deleting a directory 
permanently. Attempting to use KDirStat to permanently delete a 
directory that has a malicious name could result in arbitrary command 
execution.

Original report: <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=741659">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=741659</a>

The Debian report is about single quotes. On Fedora 
(<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1077059">https://bugzilla.redhat.com/show_bug.cgi?id=1077059</a>) double quotes were 
needed.

Can a CVE please be assigned if one has not been already? (And maybe it 
should be escaping &#39;;&#39; too if not already?)

Thanks,

--
Murray McAllister / Red Hat Security Response Team


</pre>

<div class="infmessage"><hr><p>
<a name="20"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jerome Robert &lt;jeromerobert@gmx.com&gt; -->
<!-- time:1395151929 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jerome Robert &lt;jeromerobert@gmx.com&gt;</code>:<br>
<code>Bug#741659</code>; Package <code>k4dirstat</code>.
 (Tue, 18 Mar 2014 14:12:09 GMT) (<a href="bugreport.cgi?bug=741659;msg=21">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=21">mbox</a>, <a href="#20">link</a>).</p></p></div>

<div class="infmessage"><hr><p>
<a name="22"></a>
<!-- request_addr: cve-assign@mitre.org -->
<!-- time:1395151929 -->
<strong>Acknowledgement sent</strong>
to <code>cve-assign@mitre.org</code>:<br>
Extra info received and forwarded to list.  Copy sent to <code>Jerome Robert &lt;jeromerobert@gmx.com&gt;</code>.
 (Tue, 18 Mar 2014 14:12:09 GMT) (<a href="bugreport.cgi?bug=741659;msg=23">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=23">mbox</a>, <a href="#22">link</a>).</p></p></div>

<hr><p class="msgreceived"><a name="24"></a><a name="msg24"></a><a href="#24">Message #24</a> received at 741659@bugs.debian.org (<a href="bugreport.cgi?bug=741659;msg=24">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=24">mbox</a>, <a href="mailto:741659@bugs.debian.org?In-Reply-To=%3C201403181408.s2IE8n5e025035%40linus.mitre.org%3E&amp;subject=Re%3A%20CVE%20request%3A%20kdirstat%2C%20insufficient%20quote%20escaping%20leading%20to%20arbitrary%20command%20execution&amp;References=%3C201403181408.s2IE8n5e025035%40linus.mitre.org%3E&amp;body=On%20Tue%2C%2018%20Mar%202014%2010%3A08%3A49%20-0400%20%28EDT%29%20cve-assign%40mitre.org%20wrote%3A%0A%3E%20-----BEGIN%20PGP%20SIGNED%20MESSAGE-----%0A%3E%20Hash%3A%20SHA1%0A%3E%20%0A%3E%20%3E%20The%20Debian%20report%20is%20about%20single%20quotes.%20On%20Fedora%0A%3E%20%3E%20%28https%3A%2F%2Fbugzilla.redhat.com%2Fshow_bug.cgi%3Fid%3D1077059%29%20double%20quotes%20were%0A%3E%20%3E%20needed.%0A%3E%20%0A%3E%20The%20recent%20upstream%20patch%3A%0A%3E%20%0A%3E%20%20%20https%3A%2F%2Fbitbucket.org%2Fjeromerobert%2Fk4dirstat%2Fcommits%2F1ad2e96d73fa06cd9be0f3749b337c03575016aa%23chg-src%2Fkcleanup.cpp%0A%3E%20%0A%3E%20addressed%20the%20%27%20issue%20using%20the%20%27%5C%5C%27%27%20approach.%0A%3E%20%0A%3E%20http%3A%2F%2Fdl.fedoraproject.org%2Fpub%2Ffedora%2Flinux%2Freleases%2F19%2FEverything%2Fsource%2FSRPMS%2Fk%2Fk4dirstat-2.7.0-0.9.20101010git6c0a9e6.fc19.src.rpm%0A%3E%20has%3A%0A%3E%20%0A%3E%20%20%20%20%20expanded.replace%28%20QRegExp%28%20%22%25p%22%20%29%2C%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%5C%22%22%20%2B%20QString%3A%3AfromLocal8Bit%28%20item-%3Eurl%28%29%20%29%20%20%2B%20%22%5C%22%22%20%29%3B%0A%3E%20%20%20%20%20expanded.replace%28%20QRegExp%28%20%22%25n%22%20%29%2C%0A%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%5C%22%22%20%2B%20QString%3A%3AfromLocal8Bit%28%20item-%3Ename%28%29%20%29%20%2B%20%22%5C%22%22%20%29%3B%0A%3E%20%0A%3E%20As%20mentioned%20in%20the%0A%3E%20http%3A%2F%2Fopenwall.com%2Flists%2Foss-security%2F2014%2F02%2F09%2F1%20post%2C%20attempted%0A%3E%20use%20of%20%22%20for%20this%20type%20of%20quoting%20is%20a%20conceptually%20different%20problem%0A%3E%20than%20attempted%20use%20of%20%27%20for%20this%20type%20of%20quoting%2C%20even%20if%20both%0A%3E%20attempts%20are%20ultimately%20incorrect.%0A%3E%20%0A%3E%20%28We%20did%20not%20try%20to%20check%20whether%20the%20upstream%20version%20made%20a%20change%0A%3E%20from%20incorrect%20use%20of%20%22%20to%20incorrect%20use%20of%20%27%20at%20some%20point.%20This%0A%3E%20could%20be%20considered%20an%20incomplete%20fix.%29%0A%3E%20%0A%3E%20Use%20CVE-2014-2527%20for%20the%20vulnerability%20involving%20use%20of%20%22%20%28as%20shown%0A%3E%20in%20the%20above%20calls%20to%20expanded.replace%29.%20This%20CVE%20assignment%20applies%0A%3E%20to%20any%20upstream%20code%20or%20any%20Fedora-specific%20code%20that%20has%20this%0A%3E%20specific%20issue.%0A%3E%20%0A%3E%20Use%20CVE-2014-2528%20for%20the%20vulnerability%20involving%20use%20of%20%27%20%28as%20shown%0A%3E%20in%20the%20above%20https%3A%2F%2Fbitbucket.org%20commit%29.%0A%3E%20%0A%3E%20If%20anyone%20happens%20to%20identify%20a%20version%20of%20the%20code%20that%20does%20not%0A%3E%20attempt%20any%20type%20of%20quoting%2C%20a%20third%20CVE%20assignment%20may%20be%20possible.%0A%3E%20%0A%3E%20%3E%20%28And%20maybe%20it%20should%20be%20escaping%20%27%3B%27%20too%20if%20not%20already%3F%29%0A%3E%20%0A%3E%20This%20would%20typically%20not%20be%20addressed%20as%20a%20separate%20fix.%0A%3E%20%0A%3E%20-%20--%20%0A%3E%20CVE%20assignment%20team%2C%20MITRE%20CVE%20Numbering%20Authority%0A%3E%20M%2FS%20M300%0A%3E%20202%20Burlington%20Road%2C%20Bedford%2C%20MA%2001730%20USA%0A%3E%20%5B%20PGP%20key%20available%20through%20http%3A%2F%2Fcve.mitre.org%2Fcve%2Frequest_id.html%20%5D%0A%3E%20-----BEGIN%20PGP%20SIGNATURE-----%0A%3E%20Version%3A%20GnuPG%20v1.4.14%20%28SunOS%29%0A%3E%20%0A%3E%20iQEcBAEBAgAGBQJTKFLiAAoJEKllVAevmvmsiPkH%2F30d7kfSQPL2v7AZ0NppcPKx%0A%3E%206TRaR8bren7sEI0t38XJ5CmVwyW9KwqSBf%2BpsnM6ubA9VDafl%2BizOefRw7GoJNIX%0A%3E%20w8sz67mBWDkBxyYazfLZJhgItGzjUwj8q222lhQ8maLKLS%2FiGpqnY5rPBnwVTIq6%0A%3E%205T9I0NWH5LrXRHFatS4JLargtU%2FjiMAIW%2B%2Fdim7ymj0MFWk9XSnLI4XboIWROdZq%0A%3E%20gGQU%2FNXyRhz1ZGenzpHwNHc9ddVC86TKR%2FxF1DTg8N1RmuAe6HNXEJSWuYooG9BK%0A%3E%202k99nuBpDsL6TD2L4dSN20prKkIGgCTumRJWO%2FIvCG3jdZYBrscrjWpFMAIqEGk%3D%0A">reply</a>):</p>
<div class="headers">
<img src="/cgi-bin/libravatar.cgi?email=cve-assign%40mitre.org" alt="">
<div class="header"><span class="headerfield">From:</span> cve-assign@mitre.org</div>
<div class="header"><span class="headerfield">To:</span> mmcallis@redhat.com</div>
<div class="header"><span class="headerfield">Cc:</span> cve-assign@mitre.org, oss-security@lists.openwall.com,
        741659@bugs.debian.org</div>
<div class="header"><span class="headerfield">Subject:</span> Re: CVE request: kdirstat, insufficient quote escaping leading to arbitrary command execution</div>
<div class="header"><span class="headerfield">Date:</span> Tue, 18 Mar 2014 10:08:49 -0400 (EDT)</div>
</div>
<pre class="message">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

&gt; The Debian report is about single quotes. On Fedora
&gt; (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1077059">https://bugzilla.redhat.com/show_bug.cgi?id=1077059</a>) double quotes were
&gt; needed.

The recent upstream patch:

  <a href="https://bitbucket.org/jeromerobert/k4dirstat/commits/1ad2e96d73fa06cd9be0f3749b337c03575016aa#chg-src/kcleanup.cpp">https://bitbucket.org/jeromerobert/k4dirstat/commits/1ad2e96d73fa06cd9be0f3749b337c03575016aa#chg-src/kcleanup.cpp</a>

addressed the &#39; issue using the &#39;\\&#39;&#39; approach.

<a href="http://dl.fedoraproject.org/pub/fedora/linux/releases/19/Everything/source/SRPMS/k/k4dirstat-2.7.0-0.9.20101010git6c0a9e6.fc19.src.rpm">http://dl.fedoraproject.org/pub/fedora/linux/releases/19/Everything/source/SRPMS/k/k4dirstat-2.7.0-0.9.20101010git6c0a9e6.fc19.src.rpm</a>
has:

    expanded.replace( QRegExp( &quot;%p&quot; ),
                      &quot;\&quot;&quot; + QString::fromLocal8Bit( item-&gt;url() )  + &quot;\&quot;&quot; );
    expanded.replace( QRegExp( &quot;%n&quot; ),
                      &quot;\&quot;&quot; + QString::fromLocal8Bit( item-&gt;name() ) + &quot;\&quot;&quot; );

As mentioned in the
<a href="http://openwall.com/lists/oss-security/2014/02/09/1">http://openwall.com/lists/oss-security/2014/02/09/1</a> post, attempted
use of &quot; for this type of quoting is a conceptually different problem
than attempted use of &#39; for this type of quoting, even if both
attempts are ultimately incorrect.

(We did not try to check whether the upstream version made a change
from incorrect use of &quot; to incorrect use of &#39; at some point. This
could be considered an incomplete fix.)

Use <a href="https://security-tracker.debian.org/tracker/CVE-2014-2527">CVE-2014-2527</a> for the vulnerability involving use of &quot; (as shown
in the above calls to expanded.replace). This CVE assignment applies
to any upstream code or any Fedora-specific code that has this
specific issue.

Use <a href="https://security-tracker.debian.org/tracker/CVE-2014-2528">CVE-2014-2528</a> for the vulnerability involving use of &#39; (as shown
in the above <a href="https://bitbucket.org">https://bitbucket.org</a> commit).

If anyone happens to identify a version of the code that does not
attempt any type of quoting, a third CVE assignment may be possible.

&gt; (And maybe it should be escaping &#39;;&#39; too if not already?)

This would typically not be addressed as a separate fix.

- -- 
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <a href="http://cve.mitre.org/cve/request_id.html">http://cve.mitre.org/cve/request_id.html</a> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.14 (SunOS)

iQEcBAEBAgAGBQJTKFLiAAoJEKllVAevmvmsiPkH/30d7kfSQPL2v7AZ0NppcPKx
6TRaR8bren7sEI0t38XJ5CmVwyW9KwqSBf+psnM6ubA9VDafl+izOefRw7GoJNIX
w8sz67mBWDkBxyYazfLZJhgItGzjUwj8q222lhQ8maLKLS/iGpqnY5rPBnwVTIq6
5T9I0NWH5LrXRHFatS4JLargtU/jiMAIW+/dim7ymj0MFWk9XSnLI4XboIWROdZq
gGQU/NXyRhz1ZGenzpHwNHc9ddVC86TKR/xF1DTg8N1RmuAe6HNXEJSWuYooG9BK
2k99nuBpDsL6TD2L4dSN20prKkIGgCTumRJWO/IvCG3jdZYBrscrjWpFMAIqEGk=
=lGmu
-----END PGP SIGNATURE-----


</pre>

<div class="msgreceived"><hr><p>
<a name="25"></a>
<!-- command:archive -->
<!-- requester: Debbugs Internal Request &lt;owner@bugs.debian.org&gt; -->
<!-- request_addr: internal_control@bugs.debian.org -->
<!-- time:1397806190 -->
<!-- new_data:
$new_data = {};
-->
<!-- old_data:
$old_data = {};
-->
<strong>Bug archived.</strong>
Request was from <code>Debbugs Internal Request &lt;owner@bugs.debian.org&gt;</code>
to <code>internal_control@bugs.debian.org</code>.
 (Fri, 18 Apr 2014 07:29:50 GMT) (<a href="bugreport.cgi?bug=741659;msg=26">full text</a>, <a href="bugreport.cgi?bug=741659;mbox=yes;msg=26">mbox</a>, <a href="#25">link</a>).</p></p></div>

<hr>
<p class="msgreceived">Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=741659">this bug log contains spam</a>.</p>
<hr>
<ADDRESS>Debian bug tracking system administrator &lt;<A HREF="mailto:owner@bugs.debian.org">owner@bugs.debian.org</A>&gt;.
Last modified:
<!--timestamp-->Sat Oct 30 18:29:01 2021<!--end timestamp-->; 
Machine Name:
<!--machinename-->buxtehude<!--machinename-->
<P>
<A HREF="https://www.debian.org/Bugs/">Debian Bug tracking system</A>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright Â© 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</ADDRESS>

</body>
</html>
