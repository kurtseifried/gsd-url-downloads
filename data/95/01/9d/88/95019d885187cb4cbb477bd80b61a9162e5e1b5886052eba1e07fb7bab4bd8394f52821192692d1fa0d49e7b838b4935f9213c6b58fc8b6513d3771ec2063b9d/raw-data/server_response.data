<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
<!-- overrides theme.html -->


  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="fe6cb45d24baa046a7e5395e";
      var jquery_ui={"ampm":true,"date_format":"M d, yy","day_names":{"abbreviated":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"narrow":["S","M","T","W","T","F","S"],"wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},"default_timezone":null,"first_week_day":0,"month_names":{"abbreviated":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wide":["January","February","March","April","May","June","July","August","September","October","November","December"]},"period_names":{"am":["AM","AM"],"pm":["PM","PM"]},"show_timezone":false,"time_format":"h:mm:ss TT","timepicker_separator":", ","timezone_iso8601":false,"timezone_list":null};
      var comments_prefs={"comments_order":"oldest","show_comments":"true","show_prop_changes":"true"};
    </script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/wikitoolbar.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/resizer.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/auto_preview.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/jquery-ui.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/jquery-ui-addons.js"></script>
      <script type="text/javascript" charset="utf-8" src="/chrome/common/js/jquery-ui-i18n.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        if ($.ui) { /* is jquery-ui added? */
          $(".trac-datepicker:not([readonly])").prop("autocomplete", "off").datepicker();
          $(".trac-datetimepicker:not([readonly])").prop("autocomplete", "off").datetimepicker();
          $("#main").addClass("trac-nodatetimehint");
        }
        $(".trac-disable").disableSubmit(".trac-disable-determinant");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript" src="/chrome/common/js/threaded_comments.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
      /*<![CDATA[*/
        $("#attachments").toggleClass("collapsed");
        $("#trac-up-attachments").click(function () {
          $("#attachments").removeClass("collapsed");
          return true;
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        function setRevertHandler() {
          $("button.trac-revert").click(function() {
            var div = $("div", this);
            var field_name = div[0].id.substr(7);
            var field_value = div.text();
            var input = $("#propertyform *[name=field_" + field_name + "]");
            if (input.length > 0) {
              if (input.filter("input[type=radio]").length > 0) {
                input.val([field_value]);
              } else if (input.filter("input[type=checkbox]").length > 0) {
                input.val(field_value == "1" ? [field_value] : []);
              } else {
                input.val(field_value);
              }
            } else { // Special case for CC checkbox
              input = $("#propertyform input[name=cc_update]").val([]);
            }
            input.change();
            // Remove the revert button
            if ($(this).closest("tbody").children("tr").length === 1)
              $(this).closest(".trac-change-panel").remove();
            else
              $(this).closest("tr").remove();
            return false;
          });
        }
        setRevertHandler();
        var comment_focused = false;
        $("#comment").focus(function() { comment_focused = true; })
                     .blur(function() { comment_focused = false; });
        $("#propertyform").autoSubmit({preview: '1'}, function(data, reply) {
          var items = $(reply);
          // Update ticket box
          $("#ticket").replaceWith(items.filter('#ticket'));
          // Replaces content of #changelog, without recreating it
          $("#changelog").empty().append(items.filter("#changelog").contents());
          // Apply comments order and "Show" preferences
          applyCommentsOrder(
            $('#prefs input[name="trac-comments-order"]:checked').val());
          // Show warning
          var new_changes = $("#changelog .trac-new");
          $("#trac-edit-warning").toggle(new_changes.length != 0);
          if (new_changes.length != 0)
            $("#changelog").parent().show().removeClass("collapsed");
          // Update view time
          $("#propertyform input[name='view_time']").replaceWith(items.filter("input[name='view_time']"));
          // Update preview
          var preview = $("#ticketchange").html(items.filter('#preview').children());
          var show_preview = preview.children().length != 0;
          $("#ticketchange").toggle(show_preview);
          setRevertHandler();
          // Execute scripts to load stylesheets
          items.filter("script").appendTo("head");
        }, "#ticketchange .trac-loading");
        $("#trac-comment-editor").autoSubmit({preview_comment: '1'}, function(data, reply) {
          var comment = $("#trac-comment-editor").next("div.comment").html(reply);
          comment.toggle(comment.children().length != 0);
        }, "#changelog .trac-loading");
        /*]]>*/
      });
    </script>
	<title>
      #11290 (selector interpreted as HTML)
     – jQuery
     - Bug Tracker</title>
  <link rel="shortcut icon" href="/chrome/common/trac.ico" type="image/x-icon" />
  <link rel="stylesheet" href="/chrome/site/css/reset.css" type="text/css" />
	<link rel="search" href="/search" /><link rel="prev" href="/ticket/11289" title="Ticket #11289" /><link rel="last" href="/ticket/15251" title="Ticket #15251" /><link rel="help" href="/wiki/TracGuide" /><link rel="alternate" href="/ticket/11290?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="/ticket/11290?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="/ticket/11290?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" /><link rel="next" href="/ticket/11291" title="Ticket #11291" /><link rel="start" href="/wiki" /><link rel="stylesheet" href="/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/chrome/common/css/ticket.css" type="text/css" /><link rel="stylesheet" href="/chrome/common/css/jquery-ui/jquery-ui.css" type="text/css" /><link rel="stylesheet" href="/chrome/common/css/jquery-ui-addons.css" type="text/css" /><link rel="stylesheet" href="/chrome/ticketguidelinesplugin/main.css" type="text/css" /><link rel="first" href="/ticket/1" title="Ticket #1" /><link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Search jQuery" />
  <link rel="stylesheet" href="/chrome/site/css/screen.css" type="text/css" />
  <script type="text/javascript" src="/chrome/site/js/custom.js"></script>
</head>
  <body id="jq-interior">
	<div id="jq-siteContain">
			<div id="jq-header">
				<a id="jq-siteLogo" href="https://jquery.com/" title="jQuery Home"><img src="/chrome/site/images/logo_jquery_215x53.gif" width="215" height="53" alt="jQuery: Write Less, Do More." /></a>
				<div id="jq-primaryNavigation">
					<ul>
						<li class="jq-jquery jq-current"><a href="https://jquery.com/" title="jQuery Home">jQuery</a></li>
						<li class="jq-plugins"><a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a></li>
						<li class="jq-ui"><a href="https://jqueryui.com/" title="jQuery UI">UI</a></li>
						<li class="jq-meetup"><a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a></li>
						<li class="jq-forum"><a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a></li>
						<li class="jq-blog"><a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a></li>
						<li class="jq-about"><a href="https://jquery.org/about" title="About jQuery">About</a></li>
						<li class="jq-donate"><a href="https://jquery.org/donate" title="Donate to jQuery">Donate</a></li>
					</ul>
				</div><!-- /#primaryNavigation -->
				<div id="jq-secondaryNavigation">
					<ul>
						<li class="jq-download jq-first"><a href="https://jquery.com/download/">Download</a></li>
						<li class="jq-documentation"><a href="https://api.jquery.com/">Documentation</a></li>
						<li class="jq-tutorials"><a href="https://learn.jquery.com/">Tutorials</a></li>
						<li class="jq-bugTracker jq-current"><a href="https://bugs.jquery.com/">Bug Tracker</a></li>
						<li class="jq-discussion jq-last"><a href="https://forum.jquery.com/">Discussion</a></li>
					</ul>
				</div><!-- /#secondaryNavigation -->
				<h1>Bug Tracker</h1>
				<form id="jq-primarySearchForm" action="/search" method="get"><div>
					<label for="jq-primarySearch">Search <span class="jq-jquery">Tickets</span></label>
					<input type="text" value="" title="Search jQuery" name="q" id="jq-primarySearch" />
					<button type="submit" name="go" id="jq-searchGoButton"><span>Go</span></button>
					<input type="hidden" name="ticket" value="on" />
				</div></form>
			</div><!-- /#header -->
			<div id="jq-content" class="jq-clearfix">
				<div id="jq-interiorNavigation">
					<div class="jq-mainnav">
						<h5>Bug Tracker</h5>
						<div id="jq-mainnav">
	<ul>
		<li class="first"><a href="/newticket">New Ticket</a></li><li class="active"><a href="/report">View Tickets</a></li><li><a href="/ticketgraph">Ticket Graph</a></li><li><a href="/roadmap">Roadmap</a></li><li class="last"><a href="/timeline">Recent Changes</a></li>
	</ul>
</div>
					</div>
					<div class="jq-metanav">
						<h5>Tracker Account</h5>
						<div id="jq-metanav">
	<ul>
		<li class="first"><a href="/login">GitHub Login</a></li><li class="last"><a href="/prefs">Preferences</a></li>
	</ul>
</div>
					</div>
				</div><!-- /#interiorNavigation -->
				<div id="jq-primaryContent">
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="/ticket/11289" title="Ticket #11289">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="/ticket/11291" title="Ticket #11291">Next Ticket</a> &rarr;</span></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
        <div id="ticket" class="trac-content ">
  <div class="date">
    <p>Opened <a class="timeline" href="/timeline?from=2012-02-06T13%3A08%3A25-05%3A00&amp;precision=second" title="See timeline at Feb 6, 2012, 1:08:25 PM">10 years ago</a></p>
    <p>Closed <a class="timeline" href="/timeline?from=2012-12-13T15%3A31%3A29-05%3A00&amp;precision=second" title="See timeline at Dec 13, 2012, 3:31:29 PM">9 years ago</a></p>
  </div>
  <h2>
    <a href="/ticket/11290" class="trac-id">#11290</a>
    <span class="trac-status">
      <a href="/query?status=closed">closed</a>
    </span>
    <span class="trac-type">
      <a href="/query?status=!closed&amp;type=bug">bug</a>
    </span>
    <span class="trac-resolution">
      (<a href="/query?status=closed&amp;resolution=fixed">fixed</a>)
    </span>
  </h2>
  <h1 id="trac-ticket-title" class="searchable">
    <span class="summary">selector interpreted as HTML</span>
  </h1>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable"><a class="trac-author" href="/query?status=!closed&amp;reporter=gibson042">gibson042</a></td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner"><a class="trac-author" href="/query?status=!closed&amp;owner=timmywil">timmywil</a></td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/query?status=!closed&amp;priority=blocker">blocker</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="/milestone/1.9" title="Completed 9 years ago (Jan 14, 2013, 11:00:01 PM)">1.9</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/query?status=!closed&amp;component=core">core</a>
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              <a href="/query?status=!closed&amp;version=1.7.1">1.7.1</a>
        </td>
    </tr><tr>
        <th id="h_keywords" class="missing">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
        <th id="h_cc" class="missing">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
    </tr><tr>
        <th id="h_blockedby" class="missing">
          Blocked by:
        </th>
        <td headers="h_blockedby">
        </td>
        <th id="h_blocking" class="missing">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
<a class="closed ticket" href="/ticket/9521" title="#9521: bug: XSS with $(location.hash) and $(#&lt;tag&gt;) is needed? (closed: fixed)">#9521</a> and <a class="closed ticket" href="/ticket/6429" title="#6429: bug: Selector problem: elements with &#34;&lt;&#34; and &#34;&gt;&#34; with backslash escaping ... (closed: wontfix)">#6429</a> and probably others identify specific instances of a general problem: <code>jQuery( strInput )</code> cannot reliably differentiate selectors from HTML.
</p>
<p>
<a class="ext-link" href="http://jsfiddle.net/C8dgG/"><span class="icon">​</span>http://jsfiddle.net/C8dgG/</a>
</p>
<p>
Looking for "&lt;" past the first character creates vulnerabilities and confusing behavior on complex input.
</p>
<p>
<code>quickExpr</code> should be abandoned in favor of a simpler "<em>parse as HTML if and only if there is a leading less-than</em>" rule, with intentional parsing handled by the <code>jQuery( "&lt;div/&gt;" ).html( strHtml ).contents()</code> pattern.
</p>

    </div>
  </div>
</div>
          

        <div>
          <div class="trac-noscript" style="position: relative">
            <form id="prefs" method="get" action="/prefs" style="position: absolute; right: 0">
              <div id="trac-comments-order">
                <input type="radio" id="trac-comments-oldest" name="trac-comments-order" value="oldest" checked="checked" />
                <label for="trac-comments-oldest">Oldest first</label>
                <input type="radio" id="trac-comments-newest" name="trac-comments-order" value="newest" />
                <label for="trac-comments-newest">Newest first</label>
                <span id="trac-threaded-toggle" style="display: none">
                  <input type="radio" id="trac-comments-threaded" name="trac-comments-order" value="threaded" />
                  <label for="trac-comments-threaded">Threaded</label>
                </span>
              </div>
              <div>
                <input id="trac-show-comments-toggle" type="checkbox" checked="checked" />
                <label for="trac-show-comments-toggle">Show comments</label>
                <input id="trac-show-property-changes-toggle" type="checkbox" />
                <label for="trac-show-property-changes-toggle">Show property changes</label>
              </div>
            </form>
          </div>
          <h3 class="foldable">Change History <span class="trac-count">(19)</span></h3>
          <div id="changelog">
              <div class="change" id="trac-change-1-1328552210635254">
                
  <h3 class="change" id="comment:1">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:1">comment:1</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-02-06T13%3A16%3A50-05%3A00&amp;precision=second" title="See timeline at Feb 6, 2012, 1:16:50 PM">10 years ago</a> by <span class="trac-author">gibson042</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
  </div>
    <div class="comment searchable">
      <p>
Also (for reference), <a class="ext-link" href="http://www.w3.org/TR/CSS2/syndata.html#tokenization"><span class="icon">​</span>CSS lexical tokenization</a>:
</p>
<pre class="wiki">string	{string1}|{string2}
string1	\"([^\n\r\f\\"]|\\{nl}|{escape})*\"
string2	\'([^\n\r\f\\']|\\{nl}|{escape})*\'
escape	{unicode}|\\[^\n\r\f0-9a-f]
unicode	\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?
</pre>
    </div>

              </div>
              <div class="change" id="trac-change-2-1328654875821583">
                
  <h3 class="change" id="comment:2">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:2">comment:2</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-02-07T17%3A47%3A55-05%3A00&amp;precision=second" title="See timeline at Feb 7, 2012, 5:47:55 PM">10 years ago</a> by <span class="trac-author">dmethvin</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-component">
        <th class="trac-field-component">Component:</th>
        <td>
            <span class="trac-field-old">unfiled</span> →
            <span class="trac-field-new">core</span>
        </td>
      </tr><tr class="trac-field-milestone">
        <th class="trac-field-milestone">Milestone:</th>
        <td>
            <span class="trac-field-old">None</span> →
            <span class="trac-field-new">1.8</span>
        </td>
      </tr><tr class="trac-field-priority">
        <th class="trac-field-priority">Priority:</th>
        <td>
            <span class="trac-field-old">undecided</span> →
            <span class="trac-field-new">blocker</span>
        </td>
      </tr><tr class="trac-field-status">
        <th class="trac-field-status">Status:</th>
        <td>
            <span class="trac-field-old">new</span> →
            <span class="trac-field-new">open</span>
        </td>
      </tr>
    </table>
  </div>

              </div>
              <div class="change" id="trac-change-3-1338831258766784">
                
  <h3 class="change" id="comment:3">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:3">comment:3</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-04T13%3A34%3A18-04%3A00&amp;precision=second" title="See timeline at Jun 4, 2012, 1:34:18 PM">9 years ago</a> by <span class="trac-author">timmywil</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-owner">
        <th class="trac-field-owner">Owner:</th>
        <td>
          set to <em>timmywil</em>
        </td>
      </tr><tr class="trac-field-status">
        <th class="trac-field-status">Status:</th>
        <td>
            <span class="trac-field-old">open</span> →
            <span class="trac-field-new">assigned</span>
        </td>
      </tr>
    </table>
  </div>

              </div>
              <div class="change" id="trac-change-4-1339450994883073">
                
  <h3 class="change" id="comment:4">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:4">comment:4</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-11T17%3A43%3A14-04%3A00&amp;precision=second" title="See timeline at Jun 11, 2012, 5:43:14 PM">9 years ago</a> by <span class="trac-author">dmethvin</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
  </div>
    <div class="comment searchable">
      <p>
As <a class="ext-link" href="http://bugs.jquery.com/ticket/9521#comment:24"><span class="icon">​</span>http://bugs.jquery.com/ticket/9521#comment:24</a> points out, a simple "starts with &lt;" rule will break some unit tests and is likely to cause issues in outside code. However, I think we should be willing to do that here for at least some cases. 
</p>
<p>
The only issue I'm on the fence about is whether to trim leading spaces. I can imagine situations where people may have templates that end up with leading spaces, but then again it seems expensive to always pass the string through a regexp to remove them for the handful of sloppy cases that could be resolved by using <code>$.trim()</code> externally.
</p>
<p>
If people *want* to parse arbitrary complex HTML and they know it's HTML, we should encourage them to use the new <code>$.parseHTML</code> method per <a class="closed ticket" href="/ticket/11617" title="#11617: feature: Define a $.parseHTML method for creating HTML fragments (closed: fixed)">#11617</a>. It would be best if <code>$(html)</code> didn't execute scripts for example.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5-1339453120450641">
                
  <h3 class="change" id="comment:5">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:5">comment:5</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-11T18%3A18%3A40-04%3A00&amp;precision=second" title="See timeline at Jun 11, 2012, 6:18:40 PM">9 years ago</a> by <span class="trac-author">gibson042</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
  </div>
    <div class="comment searchable">
      <p>
Given that we'll be providing <code>jQuery.parseHTML</code> for explicit HTML parsing, I'd like to be as strict as possible in <code>jQuery</code>.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6-1339717289504979">
                
  <h3 class="change" id="comment:6">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:6">comment:6</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-14T19%3A41%3A29-04%3A00&amp;precision=second" title="See timeline at Jun 14, 2012, 7:41:29 PM">9 years ago</a> by <span class="trac-author">timmywil</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
  </div>
    <div class="comment searchable">
      <p>
It is possible to adjust the regex to avoid matching html when it is within brackets, parens, or quotes, as well as ignoring any escaped html characters. This would fix the case presented in this ticket as well as jQuery mobile's, @jdalton's and @mathias' issue in <a class="closed ticket" href="/ticket/9521" title="#9521: bug: XSS with $(location.hash) and $(#&lt;tag&gt;) is needed? (closed: fixed)">#9521</a>. The other issue in <a class="closed ticket" href="/ticket/9521" title="#9521: bug: XSS with $(location.hash) and $(#&lt;tag&gt;) is needed? (closed: fixed)">#9521</a> is that there is a xss vulnerability when unexpected input is passed to <code>jQuery()</code>. I think it is safe to say that is much lower priority, but that would also be fixed by specifying that if some selector contains characters normally recognized as html, they should be escaped.  This would resolve all of the issues and be backwards-compatible, unless I've missed a case.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7-1340119985914659">
                
  <h3 class="change" id="comment:7">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:7">comment:7</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-19T11%3A33%3A05-04%3A00&amp;precision=second" title="See timeline at Jun 19, 2012, 11:33:05 AM">9 years ago</a> by <span class="trac-author">timmywil</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
  </div>
    <div class="comment searchable">
      <p>
I've implemented what I meant and adjusted the regex so we maintain backwards-compatibility as well as restrict the unexpected behaviors from occurring. This will fix most issues. Patch incoming.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8-1340120155241349">
                
  <h3 class="change" id="comment:8">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:8">comment:8</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-19T11%3A35%3A55-04%3A00&amp;precision=second" title="See timeline at Jun 19, 2012, 11:35:55 AM">9 years ago</a> by <span class="trac-author">timmywil</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-resolution">
        <th class="trac-field-resolution">Resolution:</th>
        <td>
            → <span class="trac-field-new">fixed</span>
        </td>
      </tr><tr class="trac-field-status">
        <th class="trac-field-status">Status:</th>
        <td>
            <span class="trac-field-old">assigned</span> →
            <span class="trac-field-new">closed</span>
        </td>
      </tr>
    </table>
  </div>
    <div class="comment searchable">
      <p>
When detecting html in init, ignore html characters within quotes, brackets, and parens as well as escaped characters which are valid in selectors. Fixes <a class="closed ticket" href="/ticket/11290" title="#11290: bug: selector interpreted as HTML (closed: fixed)">#11290</a>. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="/changeset/7692ae419d4c19bd06a0ba01fc2af8d21035873c/" title="When detecting html in init, ignore html characters within quotes, ...">7692ae419d4c19bd06a0ba01fc2af8d21035873c</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-9-1340131025236569">
                
  <h3 class="change" id="comment:9">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:9">comment:9</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-19T14%3A37%3A05-04%3A00&amp;precision=second" title="See timeline at Jun 19, 2012, 2:37:05 PM">9 years ago</a> by <span class="trac-author">gibson042</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-resolution">
        <th class="trac-field-resolution">Resolution:</th>
        <td>
            <span class="trac-field-deleted">fixed</span>
        </td>
      </tr><tr class="trac-field-status">
        <th class="trac-field-status">Status:</th>
        <td>
            <span class="trac-field-old">closed</span> →
            <span class="trac-field-new">reopened</span>
        </td>
      </tr>
    </table>
  </div>
    <div class="comment searchable">
      <p>
Now it's gone too far the other way... <a class="ext-link" href="http://jsfiddle.net/HCa89/1/"><span class="icon">​</span>http://jsfiddle.net/HCa89/1/</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10-1340205517964323">
                
  <h3 class="change" id="comment:10">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:10">comment:10</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-20T11%3A18%3A37-04%3A00&amp;precision=second" title="See timeline at Jun 20, 2012, 11:18:37 AM">9 years ago</a> by <span class="trac-author">timmywil</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
  </div>
    <div class="comment searchable">
      <p>
Having discussed it with gibson and Dave, we're adopting a different strategy (the starts-with rule). While ignoring html within quotes, brackets, and parens could have worked, I agree it would have come at too great a cost. Commit incoming.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11-1340205528202391">
                
  <h3 class="change" id="comment:11">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:11">comment:11</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-20T11%3A18%3A48-04%3A00&amp;precision=second" title="See timeline at Jun 20, 2012, 11:18:48 AM">9 years ago</a> by <span class="trac-author">timmywil</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-status">
        <th class="trac-field-status">Status:</th>
        <td>
            <span class="trac-field-old">reopened</span> →
            <span class="trac-field-new">assigned</span>
        </td>
      </tr>
    </table>
  </div>

              </div>
              <div class="change" id="trac-change-12-1340205590686765">
                
  <h3 class="change" id="comment:12">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:12">comment:12</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-20T11%3A19%3A50-04%3A00&amp;precision=second" title="See timeline at Jun 20, 2012, 11:19:50 AM">9 years ago</a> by <span class="trac-author">timmywil</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-resolution">
        <th class="trac-field-resolution">Resolution:</th>
        <td>
            → <span class="trac-field-new">fixed</span>
        </td>
      </tr><tr class="trac-field-status">
        <th class="trac-field-status">Status:</th>
        <td>
            <span class="trac-field-old">assigned</span> →
            <span class="trac-field-new">closed</span>
        </td>
      </tr>
    </table>
  </div>
    <div class="comment searchable">
      <p>
Adjust jQuery('html') detection to only match when html starts with '&lt;' (counting space characters). Fixes <a class="closed ticket" href="/ticket/11290" title="#11290: bug: selector interpreted as HTML (closed: fixed)">#11290</a> 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="/changeset/239fc86b01d52fd9df6d1963027ed37b4f6251fc/" title="Adjust jQuery('html') detection to only match when html starts with ...">239fc86b01d52fd9df6d1963027ed37b4f6251fc</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-13-1340300478298947">
                
  <h3 class="change" id="comment:13">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:13">comment:13</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-06-21T13%3A41%3A18-04%3A00&amp;precision=second" title="See timeline at Jun 21, 2012, 1:41:18 PM">9 years ago</a> by <span class="trac-author">timmywil</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
  </div>
    <div class="comment searchable">
      <p>
Revert "Adjust jQuery('html') detection to only match when html starts with '&lt;' (counting space characters). Fixes <a class="closed ticket" href="/ticket/11290" title="#11290: bug: selector interpreted as HTML (closed: fixed)">#11290</a>"
</p>
<p>
This reverts commit <a class="changeset" href="/changeset/239fc86b01d52fd9df6d1963027ed37b4f6251fc/" title="Adjust jQuery('html') detection to only match when html starts with ...">239fc86b01d52fd9df6d1963027ed37b4f6251fc</a>.
</p>
<p>
The consensus is that this would change behavior too abruptly. We will warn in 1.8 and do this in 1.9. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="/changeset/c20e031058c6210a1ed753f75af80588f076d60d/" title="Revert &#34;Adjust jQuery('html') detection to only match when html starts ...">c20e031058c6210a1ed753f75af80588f076d60d</a>
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-14-1351820653026749">
                
  <h3 class="change" id="comment:14">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:14">comment:14</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-11-01T21%3A44%3A13-04%3A00&amp;precision=second" title="See timeline at Nov 1, 2012, 9:44:13 PM">9 years ago</a> by <span class="trac-author">dmethvin</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-milestone">
        <th class="trac-field-milestone">Milestone:</th>
        <td>
            <span class="trac-field-old">1.8</span> →
            <span class="trac-field-new">1.9</span>
        </td>
      </tr>
    </table>
  </div>

              </div>
              <div class="change" id="trac-change-15-1351820671357654">
                
  <h3 class="change" id="comment:15">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:15">comment:15</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-11-01T21%3A44%3A31-04%3A00&amp;precision=second" title="See timeline at Nov 1, 2012, 9:44:31 PM">9 years ago</a> by <span class="trac-author">dmethvin</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-resolution">
        <th class="trac-field-resolution">Resolution:</th>
        <td>
            <span class="trac-field-deleted">fixed</span>
        </td>
      </tr><tr class="trac-field-status">
        <th class="trac-field-status">Status:</th>
        <td>
            <span class="trac-field-old">closed</span> →
            <span class="trac-field-new">reopened</span>
        </td>
      </tr>
    </table>
  </div>

              </div>
              <div class="change" id="trac-change-16-1351820685740947">
                
  <h3 class="change" id="comment:16">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:16">comment:16</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-11-01T21%3A44%3A45-04%3A00&amp;precision=second" title="See timeline at Nov 1, 2012, 9:44:45 PM">9 years ago</a> by <span class="trac-author">dmethvin</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-status">
        <th class="trac-field-status">Status:</th>
        <td>
            <span class="trac-field-old">reopened</span> →
            <span class="trac-field-new">open</span>
        </td>
      </tr>
    </table>
  </div>

              </div>
              <div class="change" id="trac-change-17-1351820744791141">
                
  <h3 class="change" id="comment:17">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:17">comment:17</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-11-01T21%3A45%3A44-04%3A00&amp;precision=second" title="See timeline at Nov 1, 2012, 9:45:44 PM">9 years ago</a> by <span class="trac-author">dmethvin</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
  </div>
    <div class="comment searchable">
      <p>
<a class="closed ticket" href="/ticket/12531" title="#12531: bug: elem[attr] selector (closed: duplicate)">#12531</a> is a duplicate of this ticket.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18-1355159744008265">
                
  <h3 class="change" id="comment:18">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:18">comment:18</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-12-10T12%3A15%3A44-05%3A00&amp;precision=second" title="See timeline at Dec 10, 2012, 12:15:44 PM">9 years ago</a> by <span class="trac-author">dmethvin</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
  </div>
    <div class="comment searchable">
      <p>
Going into 1.9; the compat plugin will restore the old behavior.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19-1355430689498249">
                
  <h3 class="change" id="comment:19">
    <span class="threading">
      <span class="cnum">
    <a href="#comment:19">comment:19</a>
  </span>
    </span>
        Changed <a class="timeline" href="/timeline?from=2012-12-13T15%3A31%3A29-05%3A00&amp;precision=second" title="See timeline at Dec 13, 2012, 3:31:29 PM">9 years ago</a> by <span class="trac-author">timmywil</span>
  </h3>
  <div class="trac-change-panel">
    <div class="trac-ticket-buttons">
    </div>
    <table class="changes">
      <tr class="trac-field-resolution">
        <th class="trac-field-resolution">Resolution:</th>
        <td>
            → <span class="trac-field-new">fixed</span>
        </td>
      </tr><tr class="trac-field-status">
        <th class="trac-field-status">Status:</th>
        <td>
            <span class="trac-field-old">open</span> →
            <span class="trac-field-new">closed</span>
        </td>
      </tr>
    </table>
  </div>
    <div class="comment searchable">
      <p>
Adjust jQuery('html') detection to only match when html starts with '&lt;' (not counting space characters). Fixes <a class="closed ticket" href="/ticket/11290" title="#11290: bug: selector interpreted as HTML (closed: fixed)">#11290</a>. 
</p>
<blockquote>
<p>
Changeset: <a class="changeset" href="/changeset/05531fc4080ae24070930d15ae0cea7ae056457d/" title="Adjust jQuery('html') detection to only match when html starts with ...">05531fc4080ae24070930d15ae0cea7ae056457d</a>
</p>
</blockquote>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="/ticket/11290?format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="/ticket/11290?format=csv" class="csv">Comma-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="/ticket/11290?format=tab" class="tab">Tab-delimited Text</a>
        </li>
      </ul>
    </div>
    </div>
				</div><!-- /#primaryContent -->
			</div><!-- /#content -->
			<div id="jq-footer" class="jq-clearfix">
				<div id="jq-credits">
					<p id="jq-copyright">Copyright 2013 <a href="https://jquery.org/team/">The jQuery Foundation</a></p>
					<style>
					.mc-link {
						background: url(https://jquery.com/jquery-wp-content/themes/jquery/images/logo-maxcdn.png) no-repeat;
						padding-left: 24px;
					}
					</style>
					<p id="jq-hosting">
						Hosting provided by <a href="https://mediatemple.net/" class="jq-mediaTemple">Media Temple</a><br />
						CDN provided by <a href="https://www.maxcdn.com" class="mc-link">MaxCDN</a>
					</p>
				</div>
				<div id="jq-footerNavigation">
					<ul>
						<li class="jq-download jq-first"><a href="https://jquery.com/download/">Download</a></li>
						<li class="jq-documentation jq-current"><a href="https://api.jquery.com/">Documentation</a></li>
						<li class="jq-tutorials"><a href="https://learn.jquery.com/">Tutorials</a></li>
						<li class="jq-bugTracker"><a href="https://bugs.jquery.com/">Bug Tracker</a></li>
						<li class="jq-discussion jq-last"><a href="https://forum.jquery.com/">Discussion</a></li>
					</ul>
				</div><!-- /#secondaryNavigation -->
			</div><!-- /#footer -->
	</div><!-- /#siteContain -->
	<script type="text/javascript">
		var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-1076265-1']); _gaq.push(['_trackPageview']); _gaq.push(['_setDomainName', '.jquery.com']);
		(function() {var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = 'https://ssl.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);})();
	</script>
</body>
</html>